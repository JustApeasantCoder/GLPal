"use strict";(self.webpackChunkglpal=self.webpackChunkglpal||[]).push([[411],{6411(e,t,a){a.r(t),a.d(t,{default:()=>h});var s=a(2555),r=a(5043),l=a(1235),o=a(8171),n=a(8421),c=a(2292),d=a(5644),i=a(579);const x=e=>{const t=new Date(e),a=t.getDay(),s=t.getDate()-a+(0===a?-6:1);return t.setDate(s),t.setHours(0,0,0,0),t},m=e=>{const t=new Date(e);return x(t).toISOString().split("T")[0]},g=e=>{const t=new Date(e),a=x(t),s=new Date(a);s.setDate(s.getDate()+6);const r={month:"short",day:"numeric"};return"".concat(a.toLocaleDateString("en-US",r)," - ").concat(s.toLocaleDateString("en-US",r))},p=["Nausea","Vomiting","Diarrhea","Constipation","Abdominal Pain","Headache","Fatigue","Dizziness","Loss of Appetite","Heartburn"],h=e=>{let{refreshKey:t,profile:a,useWheelForNumbers:x=!0}=e;const{bigCard:h,isDarkMode:b}=(0,n.$E)(),u=(null===a||void 0===a?void 0:a.unitSystem)||"metric",y=(0,c.PB)(u),v="text-lg font-bold text-text-primary mb-2",[f,j]=(0,r.useState)([]),[N,C]=(0,r.useState)([]),[w,D]=(0,r.useState)(null),[S,k]=(0,r.useState)(()=>"true"===localStorage.getItem("glpal_dose_log_collapsed")),[B,A]=(0,r.useState)("date"),[_,E]=(0,r.useState)(!1),[L,M]=(0,r.useState)(!1),[F,I]=(0,r.useState)(!1),[P,W]=(0,r.useState)([]),[U,T]=(0,r.useState)(()=>"true"===localStorage.getItem("glpal_weight_log_collapsed")),[V,z]=(0,r.useState)("daily"),[O,Q]=(0,r.useState)(null),[H,R]=(0,r.useState)(""),[Y,K]=(0,r.useState)({calories:0,protein:0,carbs:0,fat:0}),[$,q]=(0,r.useState)(!1),[G,J]=(0,r.useState)(!1),[X,Z]=(0,r.useState)([]),[ee,te]=(0,r.useState)([]),[ae,se]=(0,r.useState)(()=>"true"===localStorage.getItem("glpal_peptide_log_collapsed")),[re,le]=(0,r.useState)(!1),[oe,ne]=(0,r.useState)(!1),[ce,de]=(0,r.useState)(!1),[ie,xe]=(0,r.useState)(!1),me=((0,r.useMemo)(()=>{if(0===P.length)return new Map;const e=new Map;P.forEach(t=>{const a=m(t.date);e.has(a)||e.set(a,[]),e.get(a).push(t)});const t=new Map;return e.forEach((e,a)=>{const s=e.reduce((e,t)=>e+t.weight,0);t.set(a,s/e.length)}),t},[P]),(0,r.useMemo)(()=>{if(0===P.length)return{data:[],prevChange:null};const e=[...P].sort((e,t)=>e.date.localeCompare(t.date));if("daily"===V){const t=e.map((t,a)=>{let r=null;return a>0&&(r=e[a-1].weight-t.weight),(0,s.A)((0,s.A)({},t),{},{change:r})});let a=null;return e.length>=2&&(a=e[e.length-2].weight-e[e.length-1].weight),{data:t,prevChange:a}}if("weekly"===V){const t=new Map;e.forEach(e=>{const a=m(e.date);t.has(a)||t.set(a,[]),t.get(a).push(e)});const a=[];Array.from(t.keys()).sort().forEach((e,s)=>{const r=t.get(e),l=r.reduce((e,t)=>e+t.weight,0)/r.length,o=s>0?a[s-1].avgWeight:null,n=null!==o?o-l:null,c=r.reduce((e,t)=>{var a,s,r,l;return{calories:e.calories+((null===(a=t.macros)||void 0===a?void 0:a.calories)||0),protein:e.protein+((null===(s=t.macros)||void 0===s?void 0:s.protein)||0),carbs:e.carbs+((null===(r=t.macros)||void 0===r?void 0:r.carbs)||0),fat:e.fat+((null===(l=t.macros)||void 0===l?void 0:l.fat)||0)}},{calories:0,protein:0,carbs:0,fat:0}),d=r.some(e=>e.notes);a.push({date:e,avgWeight:l,weekLabel:g(r[0].date),change:n,macros:c.calories>0||c.protein>0||c.carbs>0||c.fat>0?c:null,hasNotes:d})});let s=null;return a.length>=2&&(s=a[a.length-2].avgWeight-a[a.length-1].avgWeight),{data:a,prevChange:s}}if("monthly"===V){const t=new Map;e.forEach(e=>{const a=(e=>{const t=new Date(e);return"".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"))})(e.date);t.has(a)||t.set(a,[]),t.get(a).push(e)});const a=[];Array.from(t.keys()).sort().forEach((e,s)=>{const r=t.get(e),l=r.reduce((e,t)=>e+t.weight,0)/r.length,o=s>0?a[s-1].avgWeight:null,n=null!==o?o-l:null,c=r.reduce((e,t)=>{var a,s,r,l;return{calories:e.calories+((null===(a=t.macros)||void 0===a?void 0:a.calories)||0),protein:e.protein+((null===(s=t.macros)||void 0===s?void 0:s.protein)||0),carbs:e.carbs+((null===(r=t.macros)||void 0===r?void 0:r.carbs)||0),fat:e.fat+((null===(l=t.macros)||void 0===l?void 0:l.fat)||0)}},{calories:0,protein:0,carbs:0,fat:0}),d=r.some(e=>e.notes);var i;a.push({date:e,avgWeight:l,monthLabel:(i=r[0].date,new Date(i).toLocaleDateString("en-US",{month:"long",year:"numeric"})),change:n,macros:c.calories>0||c.protein>0||c.carbs>0||c.fat>0?c:null,hasNotes:d})});let s=null;return a.length>=2&&(s=a[a.length-2].avgWeight-a[a.length-1].avgWeight),{data:a,prevChange:s}}return{data:e,prevChange:null}},[P,V])),ge=(0,r.useMemo)(()=>{const e=new Set;return f.forEach(t=>e.add(t.medication)),N.forEach(t=>e.add(t.medication)),Array.from(e)},[f,N]),pe=(0,r.useMemo)(()=>[...f].sort((e,t)=>"date"===B?_?e.date.localeCompare(t.date):t.date.localeCompare(e.date):"medication"===B?_?e.medication.localeCompare(t.medication):t.medication.localeCompare(e.medication):"dose"===B?_?e.dose-t.dose:t.dose-e.dose:0),[f,B,_]),he=e=>(0,o.F_)(e,ge).stroke,[be,ue]=(0,r.useState)([]),[ye,ve]=(0,r.useState)(""),[fe,je]=(0,r.useState)(null);(0,r.useEffect)(()=>{(()=>{const e=(0,l.Sr)(),t=(0,l.Lt)();j(e.sort((e,t)=>t.date.localeCompare(e.date))),C(t);const a=(0,l.v1)();W(a);const s=(0,l.jT)();te(s);const r=(0,l.jY)();Z(r.sort((e,t)=>t.date.localeCompare(e.date)))})()},[t]),(0,r.useEffect)(()=>{localStorage.setItem("glpal_dose_log_collapsed",String(S))},[S]),(0,r.useEffect)(()=>{localStorage.setItem("glpal_weight_log_collapsed",String(U))},[U]),(0,r.useEffect)(()=>{localStorage.setItem("glpal_peptide_log_collapsed",String(ae))},[ae]),(0,r.useEffect)(()=>{w?(M(!0),I(!1),document.body.classList.add("modal-open")):L&&!F&&(I(!0),setTimeout(()=>{M(!1),I(!1),document.body.classList.remove("modal-open")},200))},[w,L,F]),(0,r.useEffect)(()=>{O?(q(!0),J(!1),document.body.classList.add("modal-open")):$&&!G&&(J(!0),setTimeout(()=>{q(!1),J(!1),document.body.classList.remove("modal-open")},200))},[O,$,G]);const Ne=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return(0,i.jsxs)("div",{className:"space-y-3 pb-20",children:[(0,i.jsxs)("div",{className:h,children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,i.jsx)("h1",{className:v,style:{textShadow:"0 0 15px var(--accent-purple-light-shadow)"},children:"Dose Log"}),(0,i.jsx)("button",{onClick:()=>k(!S),className:"text-text-muted hover:text-white transition-colors",children:S?"\u25bc":"\u25b2"})]}),(0,i.jsx)("div",{className:"border-t border-[#B19CD9]/20 mb-3"}),S?(0,i.jsxs)("p",{className:"text-text-muted text-center py-2",children:[f.length," entries"]}):0===f.length?(0,i.jsx)("p",{className:"text-text-muted text-center py-8",children:"No manually logged doses yet."}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,i.jsx)("div",{className:"flex gap-1",children:["date","medication","dose"].map(e=>(0,i.jsxs)("button",{onClick:()=>{B===e?E(!_):(A(e),E(!1))},className:"px-2 py-1 text-xs rounded transition-all ".concat(B===e?"bg-[#B19CD9] text-white":b?"bg-black/20 text-text-muted hover:text-white":"bg-gray-100 text-gray-600 hover:text-gray-900"),children:["date"===e?"Date":"medication"===e?"Med":"Dose",B===e&&(0,i.jsx)("span",{className:"ml-1",children:_?"\u2191":"\u2193"})]},e))})}),(0,i.jsx)("div",{className:"space-y-2",children:pe.map(e=>(0,i.jsxs)("div",{className:"rounded-lg p-3 border ".concat(b?"bg-black/20 border-[#B19CD9]/20":"bg-gray-50 border-gray-200"),children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-text-primary font-medium",children:Ne(e.date)}),(0,i.jsx)("p",{className:"text-sm",style:{color:he(e.medication)},children:e.medication})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsxs)("p",{className:"text-[#4ADEA8] font-bold",children:[e.dose,"mg"]}),e.isManual&&(0,i.jsx)("span",{className:"text-xs text-[#B19CD9]",children:"Manual"})]})]}),(0,i.jsx)("div",{className:"border-t border-[#B19CD9]/10 pt-2 mt-2",children:(0,i.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[e.time&&(0,i.jsx)("span",{className:"text-xs bg-[#B19CD9]/20 text-[#B19CD9] px-2 py-1 rounded",children:e.time}),void 0!==e.painLevel&&e.painLevel>0&&(0,i.jsxs)("span",{className:"text-xs px-2 py-1 rounded ".concat(e.painLevel<=3?"bg-green-500/20 text-green-400":e.painLevel<=6?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"),children:["Pain: ",e.painLevel,"/10"]}),e.injectionSite&&(0,i.jsx)("span",{className:"text-xs bg-[#4ADEA8]/20 text-[#4ADEA8] px-2 py-1 rounded",children:e.injectionSite}),e.isr&&"None"!==e.isr&&(0,i.jsxs)("span",{className:"text-xs px-2 py-1 rounded ".concat("Mild"===e.isr?"bg-yellow-500/20 text-yellow-400":"Moderate"===e.isr?"bg-orange-500/20 text-orange-400":"bg-red-500/20 text-red-400"),children:["ISR: ",e.isr]}),e.sideEffects&&e.sideEffects.length>0&&e.sideEffects.map(e=>(0,i.jsxs)("span",{className:"text-xs px-2 py-1 rounded ".concat(e.severity<=3?"bg-green-500/20 text-green-400":e.severity<=6?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"),children:[e.name," (",e.severity,")"]},e.name))]})}),e.notes&&(0,i.jsx)("div",{className:"mt-2 pt-2 border-t border-[#B19CD9]/10",children:(0,i.jsxs)("p",{className:"text-xs text-text-muted",children:[(0,i.jsx)("span",{className:"text-text-primary",children:"Notes:"})," ",e.notes]})}),(0,i.jsx)("div",{className:"flex justify-end mt-2",children:(0,i.jsx)("button",{onClick:()=>(e=>{D(e),ue(e.sideEffects||[]),ve(e.notes||""),je(null)})(e),className:"px-3 py-1 text-xs rounded-lg transition-all duration-300 transform hover:scale-[1.02] bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white shadow-[0_0_10px_rgba(177,156,217,0.4)]",children:"+ Side Effects / Notes"})})]},"".concat(e.date,"-").concat(e.medication,"-").concat(e.time||"")))})]})]}),(0,i.jsxs)("div",{className:h,children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,i.jsx)("h1",{className:v,style:{textShadow:"0 0 15px var(--accent-purple-light-shadow)"},children:"Weight Log"}),(0,i.jsx)("button",{onClick:()=>T(!U),className:"text-text-muted hover:text-white transition-colors",children:U?"\u25bc":"\u25b2"})]}),(0,i.jsx)("div",{className:"border-t border-[#B19CD9]/20 mb-3"}),U?(0,i.jsxs)("p",{className:"text-text-muted text-center py-2",children:[P.length," entries"]}):0===P.length?(0,i.jsx)("p",{className:"text-text-muted text-center py-8",children:"No weight entries yet."}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-3",children:["daily","weekly","monthly"].map(e=>(0,i.jsx)("button",{onClick:()=>z(e),className:"px-2 py-2 text-sm rounded-lg transition-all duration-300 ".concat(V===e?"bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white shadow-[0_0_15px_rgba(177,156,217,0.4)]":"bg-[#B19CD9]/10 text-[#B19CD9] border border-[#B19CD9]/30 hover:bg-[#B19CD9]/20 hover:shadow-[0_0_10px_rgba(177,156,217,0.3)]"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),null!==me.prevChange&&(0,i.jsx)("div",{className:"text-xs text-center mb-2 py-1 rounded ".concat(me.prevChange>0?"bg-green-500/20 text-green-400":me.prevChange<0?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"),children:me.prevChange>0?"".concat((0,c.Qo)(me.prevChange,u).toFixed(1)).concat(y," VS Last ").concat(V.charAt(0).toUpperCase()+V.slice(1)):me.prevChange<0?"".concat(Math.abs((0,c.Qo)(me.prevChange,u)).toFixed(1)).concat(y," VS Last ").concat(V.charAt(0).toUpperCase()+V.slice(1)):"No Change VS Last ".concat(V.charAt(0).toUpperCase()+V.slice(1))}),(0,i.jsx)("div",{className:"space-y-2",children:me.data.slice().reverse().map((e,t)=>(0,i.jsxs)("div",{className:"rounded-lg p-3 border ".concat(b?"bg-black/20 border-[#B19CD9]/20":"bg-gray-50 border-gray-200"),children:[(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-text-primary font-medium",children:"daily"===V?Ne(e.date):"weekly"===V?e.weekLabel:e.monthLabel}),null!==e.change&&(0,i.jsxs)("p",{className:"text-xs ".concat(e.change>0?"text-green-400":e.change<0?"text-red-400":"text-gray-400"),children:[e.change>0?"\u2193":e.change<0?"\u2191":"="," ",Math.abs((0,c.Qo)(e.change,u)).toFixed(1),y]})]}),(0,i.jsx)("div",{className:"text-right",children:(0,i.jsx)("p",{className:"text-[#4ADEA8] font-bold",children:"daily"===V?"".concat((0,c.Qo)(e.weight,u).toFixed(1)).concat(y):"".concat((0,c.Qo)(e.avgWeight,u).toFixed(1)).concat(y)})})]}),e.macros||e.notes||e.hasNotes?(0,i.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.macros&&(0,i.jsxs)(i.Fragment,{children:[e.macros.calories>0&&(0,i.jsxs)("span",{className:"text-xs bg-orange-500/20 text-orange-400 px-2 py-1 rounded",children:[e.macros.calories," cal"]}),e.macros.protein>0&&(0,i.jsxs)("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded",children:["P: ",e.macros.protein,"g"]}),e.macros.carbs>0&&(0,i.jsxs)("span",{className:"text-xs bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded",children:["C: ",e.macros.carbs,"g"]}),e.macros.fat>0&&(0,i.jsxs)("span",{className:"text-xs bg-pink-500/20 text-pink-400 px-2 py-1 rounded",children:["F: ",e.macros.fat,"g"]})]}),(e.notes||e.hasNotes)&&(0,i.jsx)("span",{className:"text-xs bg-[#B19CD9]/20 text-[#B19CD9] px-2 py-1 rounded",children:"\ud83d\udcdd"})]}):null,"daily"===V&&(0,i.jsx)("div",{className:"flex justify-end mt-2",children:(0,i.jsx)("button",{onClick:()=>(e=>{Q(e),R(e.notes||""),K(e.macros||{calories:0,protein:0,carbs:0,fat:0})})(e),className:"px-3 py-1 text-xs rounded-lg transition-all duration-300 transform hover:scale-[1.02] bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white shadow-[0_0_10px_rgba(177,156,217,0.4)]",children:"+ Macros / Notes"})})]},e.date+"-"+t))})]})]}),L?(0,i.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,i.jsx)("div",{className:"fixed inset-0 bg-black/60 ".concat(F?"backdrop-fade-out":"backdrop-fade-in"),style:{backdropFilter:"blur(8px)"},onClick:()=>D(null)}),(0,i.jsx)("div",{className:"relative rounded-2xl shadow-2xl border border-[#B19CD9]/30 w-full max-w-sm p-6 max-h-[90vh] overflow-y-auto pointer-events-auto ".concat(b?"bg-gradient-to-b from-[#1a1625]/70 to-[#0d0a15]/95":"bg-white/95"," ").concat(F?"modal-fade-out":"modal-content-fade-in"),children:w?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-2 ".concat(b?"text-white":"text-gray-900"),children:"Side Effects & Notes"}),(0,i.jsxs)("p",{className:"text-sm mb-4 ".concat(b?"text-text-muted":"text-gray-600"),children:[Ne(w.date)," - ",(0,i.jsx)("span",{style:{color:he(w.medication)},children:w.medication})]}),(0,i.jsx)("div",{className:"border-t my-4 ".concat(b?"border-[#B19CD9]/20":"border-gray-200")}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Side Effects"}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:p.filter(e=>!be.find(t=>t.name===e)).map(e=>(0,i.jsxs)("button",{type:"button",onClick:()=>{return je(t=e),void ue([...be,{name:t,severity:5}]);var t},className:"text-xs border px-2 py-1 rounded transition-all ".concat(b?"bg-black/20 border-[#B19CD9]/30 text-[#B19CD9] hover:bg-[#B19CD9]/20 hover:border-[#B19CD9]/50":"bg-white border-gray-300 text-[#9C7BD3] hover:bg-gray-100"),children:["+ ",e]},e))}),be.length>0&&(0,i.jsx)("div",{className:"space-y-3",children:be.map(e=>(0,i.jsxs)("div",{className:"rounded-lg p-3 border ".concat(b?"bg-black/20 border-[#B19CD9]/20":"bg-gray-50 border-gray-200"),children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,i.jsx)("span",{className:"text-sm text-text-primary font-medium",children:e.name}),(0,i.jsx)("button",{type:"button",onClick:()=>{return t=e.name,void ue(be.filter(e=>e.name!==t));var t},className:"text-xs text-red-400 hover:text-red-300",children:"Remove"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-xs text-gray-400",children:"Mild"}),(0,i.jsx)("input",{type:"range",min:"1",max:"10",value:e.severity,onChange:t=>{return a=e.name,r=parseInt(t.target.value),void ue(be.map(e=>e.name===a?(0,s.A)((0,s.A)({},e),{},{severity:r}):e));var a,r},className:"pain-slider flex-1 h-10 appearance-none cursor-pointer"}),(0,i.jsx)("span",{className:"text-xs text-gray-400",children:"Severe"})]}),(0,i.jsx)("div",{className:"text-center mt-1",children:(0,i.jsxs)("span",{className:"text-xs font-medium ".concat(e.severity<=3?"text-green-400":e.severity<=6?"text-yellow-400":"text-red-400"),children:[e.severity,"/10"]})})]},e.name))})]}),(0,i.jsx)("div",{className:"border-t my-4 ".concat(b?"border-[#B19CD9]/20":"border-gray-200")}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(b?"text-text-secondary":"text-gray-700"),children:"Notes"}),(0,i.jsx)("textarea",{value:ye,onChange:e=>ve(e.target.value),placeholder:"Additional notes...",className:"w-full px-3 py-2 border rounded-lg text-sm focus:outline-none resize-none ".concat(b?"bg-black/20 border-[#B19CD9]/30 text-text-primary placeholder-text-muted focus:border-[#B19CD9]/60":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-[#9C7BD3]"),rows:3})]})]}),(0,i.jsx)("div",{className:"border-t my-4 ".concat(b?"border-[#B19CD9]/20":"border-gray-200")}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>D(null),className:"flex-1 py-3 rounded-xl border transition-all font-medium ".concat(b?"border-[#B19CD9]/40 text-white/80 hover:text-white hover:bg-white/10":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:"Cancel"}),(0,i.jsx)("button",{onClick:()=>{if(!w)return;const e=f.map(e=>e.date===w.date?(0,s.A)((0,s.A)({},e),{},{sideEffects:be.length>0?be:void 0,notes:ye||void 0}):e);(0,l.j)(e),j(e.sort((e,t)=>t.date.localeCompare(e.date))),D(null)},className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-[#4ADEA8] to-[#4FD99C] text-white font-medium hover:shadow-[0_0_20px_rgba(74,222,168,0.5)] transition-all",children:"Save"})]})]}):null})]}):null,$&&O?(0,i.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,i.jsx)("div",{className:"fixed inset-0 bg-black/60 ".concat(G?"backdrop-fade-out":"backdrop-fade-in"),style:{backdropFilter:"blur(8px)"},onClick:()=>Q(null)}),(0,i.jsxs)("div",{className:"relative rounded-2xl shadow-2xl border border-[#B19CD9]/30 w-full max-w-sm p-6 max-h-[90vh] overflow-y-auto pointer-events-auto ".concat(G?"modal-fade-out":"modal-content-fade-in"," ").concat(b?"bg-gradient-to-b from-[#1a1625]/70 to-[#0d0a15]/95":"bg-white/95"),children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-2 ".concat(b?"text-white":"text-gray-900"),children:"Macros & Notes"}),(0,i.jsxs)("p",{className:"text-sm mb-4 ".concat(b?"text-text-muted":"text-gray-600"),children:[Ne(O.date)," - ",(0,c.Qo)(O.weight,u).toFixed(1),y]}),(0,i.jsx)("div",{className:"border-t my-4 ".concat(b?"border-[#B19CD9]/20":"border-gray-200")}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Macros"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-xs text-orange-400 mb-1",children:"Calories"}),x?(0,i.jsx)("button",{type:"button",onClick:()=>le(!0),className:"w-full px-3 py-2 border rounded-lg text-sm text-left ".concat(b?"border-[#B19CD9]/30 bg-black/20 text-text-primary":"border-gray-300 bg-white text-gray-900"),children:Y.calories||"Tap to select"}):(0,i.jsx)("input",{type:"number",min:"0",value:Y.calories||"",onChange:e=>K((0,s.A)((0,s.A)({},Y),{},{calories:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border rounded-lg text-sm focus:outline-none ".concat(b?"bg-black/20 border-[#B19CD9]/30 text-text-primary":"bg-white border-gray-300 text-gray-900"),placeholder:"0"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-xs text-blue-400 mb-1",children:"Protein (g)"}),x?(0,i.jsx)("button",{type:"button",onClick:()=>ne(!0),className:"w-full px-3 py-2 border rounded-lg text-sm text-left ".concat(b?"border-[#B19CD9]/30 bg-black/20 text-text-primary":"border-gray-300 bg-white text-gray-900"),children:Y.protein||"Tap to select"}):(0,i.jsx)("input",{type:"number",min:"0",value:Y.protein||"",onChange:e=>K((0,s.A)((0,s.A)({},Y),{},{protein:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border rounded-lg text-sm focus:outline-none ".concat(b?"bg-black/20 border-[#B19CD9]/30 text-text-primary":"bg-white border-gray-300 text-gray-900"),placeholder:"0"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-xs text-yellow-400 mb-1",children:"Carbs (g)"}),x?(0,i.jsx)("button",{type:"button",onClick:()=>de(!0),className:"w-full px-3 py-2 border rounded-lg text-sm text-left ".concat(b?"border-[#B19CD9]/30 bg-black/20 text-text-primary":"border-gray-300 bg-white text-gray-900"),children:Y.carbs||"Tap to select"}):(0,i.jsx)("input",{type:"number",min:"0",value:Y.carbs||"",onChange:e=>K((0,s.A)((0,s.A)({},Y),{},{carbs:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border rounded-lg text-sm focus:outline-none ".concat(b?"bg-black/20 border-[#B19CD9]/30 text-text-primary":"bg-white border-gray-300 text-gray-900"),placeholder:"0"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-xs text-pink-400 mb-1",children:"Fat (g)"}),x?(0,i.jsx)("button",{type:"button",onClick:()=>xe(!0),className:"w-full px-3 py-2 border rounded-lg text-sm text-left ".concat(b?"border-[#B19CD9]/30 bg-black/20 text-text-primary":"border-gray-300 bg-white text-gray-900"),children:Y.fat||"Tap to select"}):(0,i.jsx)("input",{type:"number",min:"0",value:Y.fat||"",onChange:e=>K((0,s.A)((0,s.A)({},Y),{},{fat:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border rounded-lg text-sm focus:outline-none ".concat(b?"bg-black/20 border-[#B19CD9]/30 text-text-primary":"bg-white border-gray-300 text-gray-900"),placeholder:"0"})]})]})]}),(0,i.jsx)("div",{className:"border-t my-4 ".concat(b?"border-[#B19CD9]/20":"border-gray-200")}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(b?"text-text-secondary":"text-gray-700"),children:"Notes"}),(0,i.jsx)("textarea",{value:H,onChange:e=>R(e.target.value),placeholder:"Additional notes...",className:"w-full px-3 py-2 border rounded-lg text-sm focus:outline-none resize-none ".concat(b?"bg-black/20 border-[#B19CD9]/30 text-text-primary placeholder-text-muted focus:border-[#B19CD9]/60":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-[#9C7BD3]"),rows:3})]})]}),(0,i.jsx)("div",{className:"border-t my-4 ".concat(b?"border-[#B19CD9]/20":"border-gray-200")}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>Q(null),className:"flex-1 py-3 rounded-xl border transition-all font-medium ".concat(b?"border-[#B19CD9]/40 text-white/80 hover:text-white hover:bg-white/10":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:"Cancel"}),(0,i.jsx)("button",{onClick:()=>{if(!O)return;const e=P.map(e=>e.date===O.date?(0,s.A)((0,s.A)({},e),{},{notes:H||void 0,macros:Y.calories>0||Y.protein>0||Y.carbs>0||Y.fat>0?Y:void 0}):e);(0,l.kL)(e),W(e),Q(null)},className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-[#4ADEA8] to-[#4FD99C] text-white font-medium hover:shadow-[0_0_20px_rgba(74,222,168,0.5)] transition-all",children:"Save"})]})]})]}):null,(0,i.jsxs)("div",{className:h,children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,i.jsx)("h1",{className:v,style:{textShadow:"0 0 15px var(--accent-purple-light-shadow)"},children:"Peptide Log"}),(0,i.jsx)("button",{onClick:()=>se(!ae),className:"text-text-muted hover:text-white transition-colors",children:ae?"\u25bc":"\u25b2"})]}),(0,i.jsx)("div",{className:"border-t border-[#B19CD9]/20 mb-3"}),ae?(0,i.jsxs)("p",{className:"text-text-muted text-center py-2",children:[X.length," entries"]}):0===X.length?(0,i.jsx)("p",{className:"text-text-muted text-center py-8",children:"No peptide logs yet."}):(0,i.jsx)("div",{className:"space-y-2",children:X.map(e=>{const t=ee.find(t=>t.id===e.peptideId);return(0,i.jsxs)("div",{className:"rounded-lg p-3 border ".concat(b?"bg-black/20 border-[#B19CD9]/20":"bg-gray-50 border-gray-200"),children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-text-primary font-medium",children:Ne(e.date)}),(0,i.jsx)("p",{className:"text-sm",style:{color:(null===t||void 0===t?void 0:t.color)||"#B19CD9"},children:(null===t||void 0===t?void 0:t.name)||"Unknown Peptide"})]}),(0,i.jsx)("div",{className:"text-right",children:(0,i.jsxs)("p",{className:"text-[#4ADEA8] font-bold",children:[e.dose,e.doseUnit]})})]}),(0,i.jsx)("div",{className:"border-t border-[#B19CD9]/10 pt-2 mt-2",children:(0,i.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[e.time&&(0,i.jsx)("span",{className:"text-xs bg-[#B19CD9]/20 text-[#B19CD9] px-2 py-1 rounded",children:e.time}),e.injectionSite&&(0,i.jsx)("span",{className:"text-xs bg-[#4ADEA8]/20 text-[#4ADEA8] px-2 py-1 rounded",children:e.injectionSite}),null!==e.painLevel&&e.painLevel>0&&(0,i.jsxs)("span",{className:"text-xs px-2 py-1 rounded ".concat(e.painLevel<=3?"bg-green-500/20 text-green-400":e.painLevel<=6?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"),children:["Pain: ",e.painLevel,"/10"]})]})}),e.notes&&(0,i.jsx)("div",{className:"mt-2 pt-2 border-t border-[#B19CD9]/10",children:(0,i.jsxs)("p",{className:"text-xs text-text-muted",children:[(0,i.jsx)("span",{className:"text-text-primary",children:"Notes:"})," ",e.notes]})})]},e.id)})})]}),(0,i.jsx)(d.A,{isOpen:re,onSave:e=>{K((0,s.A)((0,s.A)({},Y),{},{calories:parseInt(e)||0})),le(!1)},onClose:()=>le(!1),min:0,max:3e3,step:10,label:"Calories",decimals:0,defaultValue:String(Y.calories),presets:["500","1000","1500","2000"]}),(0,i.jsx)(d.A,{isOpen:oe,onSave:e=>{K((0,s.A)((0,s.A)({},Y),{},{protein:parseInt(e)||0})),ne(!1)},onClose:()=>ne(!1),min:0,max:500,label:"Protein (g)",decimals:0,defaultValue:String(Y.protein),presets:["20","40","80","150"]}),(0,i.jsx)(d.A,{isOpen:ce,onSave:e=>{K((0,s.A)((0,s.A)({},Y),{},{carbs:parseInt(e)||0})),de(!1)},onClose:()=>de(!1),min:0,max:1e3,label:"Carbs (g)",decimals:0,defaultValue:String(Y.carbs),presets:["20","40","80","150"]}),(0,i.jsx)(d.A,{isOpen:ie,onSave:e=>{K((0,s.A)((0,s.A)({},Y),{},{fat:parseInt(e)||0})),xe(!1)},onClose:()=>xe(!1),min:0,max:500,label:"Fat (g)",decimals:0,defaultValue:String(Y.fat),presets:["20","40","80","150"]})]})}},5644(e,t,a){a.d(t,{A:()=>c});var s=a(5043),r=a(7950),l=a(3450),o=a(8421),n=a(579);const c=e=>{let{isOpen:t,onSave:a,onClose:c,min:d=0,max:i=100,step:x=1,label:m="Select Dose",decimals:g=2,defaultValue:p,presets:h}=e;const{isDarkMode:b}=(0,o.DP)(),[u,y]=(0,s.useState)(p||"0.25"),[v,f]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t?(f(!0),N(!1),y(p||"0.25")):v&&!j&&(N(!0),setTimeout(()=>{f(!1),N(!1)},200))},[t,p]);const C=(0,s.useMemo)(()=>{const e=parseFloat(u)||0,t=Math.floor(e);return{whole:t,decimal:Math.round((e-t)*Math.pow(10,g))}},[u,g]),w=(0,s.useMemo)(()=>Array.from({length:Math.floor((i-d)/x)+1},(e,t)=>String(d+t*x)),[d,i,x]),D=(0,s.useMemo)(()=>{const e=[];for(let t=0;t<Math.pow(10,g);t+=1)e.push(String(t).padStart(g,"0"));return e},[g]),S=(e,t)=>{let a=C.whole,s=C.decimal;"whole"===e?a=parseInt(t):s=parseInt(t);const r="".concat(a,".").concat(String(s).padStart(g,"0"));y(r)};if(!v)return null;const k=(0,n.jsxs)("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/60 ".concat(j?"backdrop-fade-out":"backdrop-fade-in"),style:{backdropFilter:"blur(8px)"},onClick:c}),(0,n.jsx)("div",{className:"relative w-full max-w-sm",children:(0,n.jsxs)("div",{className:"relative isolate rounded-2xl border shadow-2xl p-6 max-h-[90vh] overflow-y-auto transition-all ".concat(b?"border-[#B19CD9]/30 bg-gradient-to-b from-[#1a1625]/95 to-[#0d0a15]/95":"border-gray-200 bg-white"," ").concat(j?"modal-fade-out":"modal-content-fade-in"),children:[(0,n.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,n.jsx)("h3",{className:"text-xl font-semibold ".concat(b?"text-white":"text-gray-900"),children:m})}),(0,n.jsx)("div",{className:"border-t mb-3 ".concat(b?"border-[#B19CD9]/20":"border-gray-200")}),h&&h.length>0&&(0,n.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:h.map(e=>{const t=u===e;return(0,n.jsx)("button",{type:"button",onClick:()=>y(e),className:"px-2 py-1.5 text-xs rounded-lg transition-all duration-300 ".concat(t?"bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white shadow-[0_0_15px_rgba(177,156,217,0.4)]":b?"bg-[#B19CD9]/10 text-[#B19CD9] border border-[#B19CD9]/30 hover:bg-[#B19CD9]/20":"bg-gray-100 text-gray-700 border border-gray-200 hover:bg-gray-200"),children:e},"preset-".concat(e))})}),(0,n.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4 px-2",children:[(0,n.jsx)(l.A,{value:String(C.whole),onChange:e=>S("whole",e),options:w}),(0,n.jsx)("span",{className:"text-2xl font-bold mt-6 ".concat(b?"text-white":"text-gray-900"),children:"."}),(0,n.jsx)(l.A,{value:String(C.decimal).padStart(g,"0"),onChange:e=>S("decimal",e),options:D})]}),(0,n.jsx)("div",{className:"border-t my-3 ".concat(b?"border-[#B19CD9]/20":"border-gray-200")}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)("button",{onClick:c,className:"flex-1 py-3 rounded-xl border transition-all font-medium ".concat(b?"border-[#B19CD9]/40 text-white/80 hover:text-white hover:bg-white/10":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:"Cancel"}),(0,n.jsx)("button",{onClick:()=>{a(u),c()},className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white font-medium hover:shadow-[0_0_20px_rgba(177,156,217,0.5)] transition-all",children:"Done"})]})]})})]});return r.createPortal(k,document.body)}}}]);
//# sourceMappingURL=411.ea5f4319.chunk.js.map