{"version":3,"file":"static/js/398.daf95615.chunk.js","mappings":"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","sources":["features/medication/components/MedicationProgressBar.tsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\r\nimport { MedicationStats } from '../hooks/useMedicationStats';\r\nimport { GLP1Protocol } from '../../../types';\r\n\r\ninterface MedicationProgressBarProps {\r\n  stats: MedicationStats;\r\n  doseLoggedToday: boolean;\r\n  currentTime: Date;\r\n  onLogDose: () => void;\r\n  isLogging: boolean;\r\n  medicationName: string;\r\n  medicationColor?: { stroke: string; fill: string };\r\n  activeProtocol?: GLP1Protocol;\r\n}\r\n\r\nconst MedicationProgressBar: React.FC<MedicationProgressBarProps> = ({\r\n  stats,\r\n  doseLoggedToday,\r\n  currentTime,\r\n  onLogDose,\r\n  isLogging,\r\n  medicationName,\r\n  medicationColor,\r\n  activeProtocol,\r\n}) => {\r\n  const { \r\n    lastDoseDateStr, \r\n    isScheduleStartDay, \r\n    isDueToday, \r\n    isOverdue,\r\n    nextDueDays, \r\n    nextDueHours,\r\n    nextDueDateStr,\r\n    daysSinceLastDose,\r\n    actualDaysSinceLastDose,\r\n    intervalDays,\r\n    semaglutideIsOverdue,\r\n    tirzepatideIsOverdue,\r\n    retatrutideIsOverdue,\r\n    cagrilintideIsOverdue,\r\n    semaglutideEntryToday,\r\n    tirzepatideEntryToday,\r\n    retatrutideEntryToday,\r\n    cagrilintideEntryToday,\r\n    semaglutideDaysSinceLastDose,\r\n    tirzepatideDaysSinceLastDose,\r\n    retatrutideDaysSinceLastDose,\r\n    cagrilintideDaysSinceLastDose,\r\n  } = stats;\r\n\r\n  const medicationIsOverdue = \r\n    medicationName.toLowerCase().includes('semaglutide') ? semaglutideIsOverdue :\r\n    medicationName.toLowerCase().includes('tirzepatide') ? tirzepatideIsOverdue :\r\n    medicationName.toLowerCase().includes('retatrutide') ? retatrutideIsOverdue :\r\n    medicationName.toLowerCase().includes('cagrilintide') ? cagrilintideIsOverdue :\r\n    isOverdue;\r\n\r\n  const medicationEntryToday = \r\n    medicationName.toLowerCase().includes('semaglutide') ? semaglutideEntryToday :\r\n    medicationName.toLowerCase().includes('tirzepatide') ? tirzepatideEntryToday :\r\n    medicationName.toLowerCase().includes('retatrutide') ? retatrutideEntryToday :\r\n    medicationName.toLowerCase().includes('cagrilintide') ? cagrilintideEntryToday :\r\n    doseLoggedToday;\r\n\r\n  const medicationDaysSinceLastDose = \r\n    medicationName.toLowerCase().includes('semaglutide') ? semaglutideDaysSinceLastDose :\r\n    medicationName.toLowerCase().includes('tirzepatide') ? tirzepatideDaysSinceLastDose :\r\n    medicationName.toLowerCase().includes('retatrutide') ? retatrutideDaysSinceLastDose :\r\n    medicationName.toLowerCase().includes('cagrilintide') ? cagrilintideDaysSinceLastDose :\r\n    actualDaysSinceLastDose;\r\n\r\n  const [disclaimerChecked, setDisclaimerChecked] = useState(false);\r\n\r\n  const shouldShowProgress = lastDoseDateStr !== 'N/A' || stats.isScheduleStartDay;\r\n\r\n  const getProgressBarContent = () => {\r\n    const rawProgress = lastDoseDateStr === 'N/A' && !isScheduleStartDay\r\n      ? 0 \r\n      : lastDoseDateStr === 'N/A' && isScheduleStartDay\r\n        ? 0\r\n        : Math.min(80, Math.max(0, (daysSinceLastDose / intervalDays) * 100));\r\n    const progressPercent = medicationEntryToday ? 100 : rawProgress;\r\n\r\n    return (\r\n      <>\r\n        {progressPercent > 0 && !isDueToday && !medicationEntryToday && (\r\n          <div \r\n            className=\"absolute top-0 h-full transition-all duration-300\"\r\n            style={{ \r\n              left: 0,\r\n              width: `${progressPercent}%`,\r\n              background: medicationIsOverdue\r\n                ? 'linear-gradient(90deg, #EF4444, #F87171, #EF4444)'\r\n                : 'linear-gradient(90deg, #9579be, #cdbcec, #9579be)',\r\n              boxShadow: medicationIsOverdue\r\n                ? '0 0 25px rgba(239,68,68,0.7), inset 0 0 20px rgba(255,255,255,0.2)'\r\n                : '0 0 25px rgba(177,156,217,0.6), inset 0 0 20px rgba(255,255,255,0.2)',\r\n            }}\r\n          />\r\n        )}\r\n        {isDueToday && !medicationEntryToday && (\r\n          <>\r\n            {progressPercent > 0 && (\r\n              <div \r\n                className=\"absolute top-0 h-full transition-all duration-300\"\r\n                style={{ \r\n                  left: 0,\r\n                  width: `${progressPercent}%`,\r\n                  background: 'linear-gradient(90deg, #9579be, #cdbcec, #9579be)',\r\n                  boxShadow: '0 0 25px rgba(177,156,217,0.6), inset 0 0 20px rgba(255,255,255,0.2)',\r\n                }}\r\n              />\r\n            )}\r\n            {(() => {\r\n              const hoursSinceMidnight = currentTime.getHours();\r\n              const greenPercentSmooth = (hoursSinceMidnight / 24) * (100 - progressPercent);\r\n              return (\r\n                <div \r\n                  className=\"absolute top-0 h-full transition-all duration-300\"\r\n                  style={{ \r\n                    left: `${progressPercent}%`,\r\n                    width: `${greenPercentSmooth}%`,\r\n                    background: 'linear-gradient(90deg, #4ADEA8, #6EE7B7, #4ADEA8)',\r\n                    boxShadow: '0 0 25px rgba(74,222,168,0.7), inset 0 0 20px rgba(255,255,255,0.2)',\r\n                  }}\r\n                />\r\n              );\r\n            })()}\r\n          </>\r\n        )}\r\n        {medicationEntryToday && (\r\n          <div \r\n            className=\"absolute top-0 h-full transition-all duration-300\"\r\n            style={{ \r\n              left: 0,\r\n              width: '100%',\r\n              background: 'linear-gradient(90deg, #4ADEA8, #6EE7B7, #4ADEA8)',\r\n              boxShadow: '0 0 25px rgba(74,222,168,0.7), inset 0 0 20px rgba(255,255,255,0.2)',\r\n            }}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  };\r\n\r\n  const getDisplayText = () => {\r\n    if (medicationEntryToday) {\r\n      return 'Dose Logged for Today';\r\n    }\r\n    if (medicationIsOverdue && medicationDaysSinceLastDose > 0) {\r\n      const daysOverdue = medicationDaysSinceLastDose - intervalDays;\r\n      return `Overdue by ${daysOverdue} Day${daysOverdue !== 1 ? 's' : ''}`;\r\n    }\r\n    if (isScheduleStartDay) {\r\n      return 'New Schedule - Log First Dose';\r\n    }\r\n    if (isDueToday) {\r\n      return 'Dose Due Today - Log Now';\r\n    }\r\n    if (nextDueDays > 0) {\r\n      return `${nextDueDays} Day${nextDueDays !== 1 ? 's' : ''} ${nextDueHours} Hour${nextDueHours !== 1 ? 's' : ''} Until Next Dose`;\r\n    }\r\n    if (nextDueDays < 0) {\r\n      return `Overdue by ${Math.abs(nextDueDays)} Day${Math.abs(nextDueDays) !== 1 ? 's' : ''}`;\r\n    }\r\n    if (nextDueDays === 0) {\r\n      return `${nextDueHours} Hour${nextDueHours !== 1 ? 's' : ''} Until Next Dose`;\r\n    }\r\n    return `DEBUG: ${nextDueDays}d ${nextDueHours}h isDueToday=${isDueToday}`;\r\n  };\r\n\r\n  const getButtonConfig = () => {\r\n    const isOverdueNotDueToday = medicationIsOverdue && !isDueToday;\r\n    const needsConsultation = isOverdueNotDueToday && !disclaimerChecked;\r\n    const buttonText = isLogging \r\n      ? 'Logging...' \r\n      : needsConsultation \r\n        ? 'Consult Your Healthcare Provider About The Missed Dose.'\r\n        : medicationIsOverdue \r\n          ? 'Log Overdue Dose' \r\n          : 'Log Dose Now';\r\n    \r\n    return { isDisabled: needsConsultation, buttonText, isOverdueNotDueToday };\r\n  };\r\n\r\n  if (!shouldShowProgress) return null;\r\n\r\n  const { isDisabled, buttonText, isOverdueNotDueToday } = getButtonConfig();\n\n  const borderColor = medicationEntryToday \n    ? 'border-[#4ADEA8]/60' \n    : 'border-[#B19CD9]/40';\n  const shadowColor = medicationEntryToday\n    ? 'shadow-[0_0_15px_rgba(74,222,168,0.3)]'\n    : 'shadow-[0_0_15px_rgba(177,156,217,0.2)]';\n\n  return (\n    <div className=\"mb-4\">\n      <div className={`relative overflow-hidden h-12 rounded-xl bg-gradient-to-r from-[#0d0d1a] via-[#1a1a2e] to-[#0d0d1a] border ${borderColor} ${shadowColor}`}>\n        <div className=\"absolute inset-0 opacity-30\"\r\n          style={{\r\n            backgroundImage: 'repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(177,156,217,0.1) 10px, rgba(177,156,217,0.1) 20px)',\r\n            animation: 'stripeMove 2s linear infinite'\r\n          }}\r\n        />\r\n        {getProgressBarContent()}\r\n        <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent\" />\r\n        <div className=\"absolute inset-0 flex items-center justify-center\">\r\n          <span className=\"text-sm font-bold text-white\" style={{ textShadow: '0 1px 2px rgba(0,0,0,0.5)' }}>\r\n            {getDisplayText()}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div className=\"flex justify-between mt-2 text-xs text-[#B19CD9]/70\">\r\n        <span className=\"flex items-center gap-1\">\r\n          <span className=\"w-2 h-2 rounded-full bg-[#4ADEA8]\"></span>\r\n          Last: {lastDoseDateStr}\r\n        </span>\r\n        <span className=\"font-medium\" style={{ color: medicationColor?.stroke || '#B19CD9' }}>{medicationName}</span>\r\n        <span className=\"flex items-center gap-1\">\r\n          Next: {nextDueDateStr}\r\n          <span className=\"w-2 h-2 rounded-full bg-[#B19CD9]\"></span>\r\n        </span>\r\n      </div>\r\n      {(isDueToday || nextDueDays < 0 || (stats.isScheduleStartDay) || medicationIsOverdue) && !medicationEntryToday && (\r\n        <>\r\n          <button\r\n            onClick={isDisabled ? undefined : onLogDose}\r\n            disabled={isDisabled}\r\n            className={`mt-2 w-full py-2 px-4 rounded-lg font-semibold text-sm transition-all duration-300 ${\r\n              isDisabled\r\n                ? 'bg-gray-600 text-gray-400 cursor-not-allowed'\r\n                : medicationIsOverdue\r\n                  ? 'bg-gradient-to-r from-[#EF4444] to-[#F87171] text-white hover:scale-[1.02] animate-pulse'\r\n                  : 'bg-gradient-to-r from-[#4ADEA8] to-[#4FD99C] text-white hover:scale-[1.02]'\r\n            }`}\r\n            style={{ \r\n              transition: 'opacity 0.3s ease-out, transform 0.3s ease-out',\r\n              boxShadow: isDisabled\r\n                ? 'none'\r\n                : medicationIsOverdue\r\n                  ? '0 0 20px rgba(239,68,68,0.8), 0 0 40px rgba(239,68,68,0.4)' \r\n                  : '0 0 10px rgba(74,222,168,0.5), 0 0 20px rgba(74,222,168,0.3)',\r\n            }}\r\n          >\r\n            {buttonText}\r\n          </button>\r\n          {isOverdueNotDueToday && (\r\n            <div className=\"mt-2 flex items-start gap-2 px-1\">\r\n              <input\r\n                type=\"checkbox\"\r\n                id={`disclaimer-${medicationName}`}\r\n                checked={disclaimerChecked}\r\n                onChange={(e) => setDisclaimerChecked(e.target.checked)}\r\n                className=\"mt-0.5 w-4 h-4 accent-[#4ADEA8]\"\r\n              />\r\n              <label htmlFor={`disclaimer-${medicationName}`} className=\"text-xs text-gray-300 leading-tight\">\r\n                By checking this box, you confirm that you have consulted your healthcare provider regarding the missed dose.\r\n              </label>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MedicationProgressBar;\r\n"],"names":["_ref","stats","doseLoggedToday","currentTime","onLogDose","isLogging","medicationName","medicationColor","activeProtocol","lastDoseDateStr","isScheduleStartDay","isDueToday","isOverdue","nextDueDays","nextDueHours","nextDueDateStr","daysSinceLastDose","actualDaysSinceLastDose","intervalDays","semaglutideIsOverdue","tirzepatideIsOverdue","retatrutideIsOverdue","cagrilintideIsOverdue","semaglutideEntryToday","tirzepatideEntryToday","retatrutideEntryToday","cagrilintideEntryToday","semaglutideDaysSinceLastDose","tirzepatideDaysSinceLastDose","retatrutideDaysSinceLastDose","cagrilintideDaysSinceLastDose","medicationIsOverdue","toLowerCase","includes","medicationEntryToday","medicationDaysSinceLastDose","disclaimerChecked","setDisclaimerChecked","useState","isDisabled","buttonText","isOverdueNotDueToday","getButtonConfig","needsConsultation","borderColor","shadowColor","_jsxs","className","children","concat","_jsx","style","backgroundImage","animation","getProgressBarContent","rawProgress","Math","min","max","progressPercent","_Fragment","left","width","background","boxShadow","greenPercentSmooth","getHours","textShadow","getDisplayText","daysOverdue","abs","color","stroke","onClick","undefined","disabled","transition","type","id","checked","onChange","e","target","htmlFor"],"sourceRoot":""}