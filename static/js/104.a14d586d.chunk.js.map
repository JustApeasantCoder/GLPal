{"version":3,"file":"static/js/104.a14d586d.chunk.js","mappings":"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","sources":["features/weight/WeightChart.tsx","features/dashboard/components/PerformanceOverview.tsx","features/dashboard/components/TDEEDisplay.tsx","features/weight/components/WeightInput.tsx","features/dashboard/components/BMIInfoTooltip.tsx","features/dashboard/Dashboard.tsx","features/medication/components/MedicationChart.tsx","shared/utils/medicationChartUtils.ts","shared/components/ChartEmptyState.tsx","shared/components/PeriodSelector.tsx","shared/utils/calculations.ts","shared/utils/common.ts"],"sourcesContent":["import React, { useMemo, useRef, useState } from 'react';\nimport ReactECharts from 'echarts-for-react';\nimport { WeightEntry, GLP1Entry } from '../../types';\nimport { formatWeight, convertWeightFromKg } from '../../shared/utils/unitConversion';\nimport { useWeightChartData } from '../../shared/hooks/useChartDataProcessor';\nimport { useWeightChartDateRange } from '../../shared/hooks/useChartDateRange';\nimport ChartEmptyState from '../../shared/components/ChartEmptyState';\nimport { ChartPeriod } from '../../shared/hooks';\nimport { getMedicationColor } from '../../shared/utils/chartUtils';\nimport { timeService } from '../../core/timeService';\nimport { isMobile } from '../../shared/utils/common';\n\nconst getToday = () => new Date(timeService.now());\n\r\nconst shortenMedicationName = (name: string): string => {\r\n  return name.replace(/\\s*\\(.*?\\)/g, '').trim();\r\n};\r\n\r\ninterface WeightChartProps {\r\n  data: WeightEntry[];\r\n  goalWeight: number;\r\n  unitSystem?: 'metric' | 'imperial';\r\n  period?: ChartPeriod;\r\n  medicationData?: GLP1Entry[];\r\n  visibleMedications?: string[];\r\n  onLegendChange?: (visibleMeds: string[]) => void;\r\n}\r\n\r\nconst WeightChart: React.FC<WeightChartProps> = ({\r\n  data,\r\n  goalWeight,\r\n  unitSystem = 'metric',\r\n  period = 'month',\r\n  medicationData = [],\r\n  visibleMedications: externalVisibleMedications,\r\n  onLegendChange,\r\n}) => {\r\n  const [localVisibleMedications, setLocalVisibleMedications] = useState<string[] | undefined>(undefined);\r\n  const visibleMedications = externalVisibleMedications !== undefined ? externalVisibleMedications : localVisibleMedications;\r\n  \r\n  const { sortedData, minWeight, maxWeight, weightPadding } =\r\n    useWeightChartData(data);\r\n  const chartRef = useRef<any>(null);\r\n\r\n  const firstDataDate = useMemo(\r\n    () => (sortedData.length > 0 ? sortedData[0].date : getToday()),\r\n    [sortedData]\r\n  );\r\n\r\n  const lastDataDate = useMemo(\r\n    () =>\r\n      sortedData.length > 0\r\n        ? sortedData[sortedData.length - 1].date\r\n        : getToday(),\r\n    [sortedData]\r\n  );\r\n\r\n  const { zoomStart, zoomEnd, visibleStartIndex, visibleEndIndex, totalPoints } =\n    useWeightChartDateRange(firstDataDate, lastDataDate, period, getToday(), 0.7);\n\n  const extendedLastDate = useMemo(() => {\n    const futureDays = 60;\n    return new Date(lastDataDate.getTime() + futureDays * 24 * 60 * 60 * 1000);\n  }, [lastDataDate]);\n\n  const xAxisDates = useMemo(() => {\n    const dates: string[] = [];\n    const iter = new Date(firstDataDate);\n    while (iter <= extendedLastDate) {\n      dates.push(iter.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));\n      iter.setDate(iter.getDate() + 1);\n    }\n    return dates;\n  }, [firstDataDate, extendedLastDate]);\n\n  const todayStr = getToday().toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n  const todayIndex = xAxisDates.indexOf(todayStr);\n\n  const lastEntry = useMemo(() => {\n    if (sortedData.length === 0) return null;\n    return sortedData[sortedData.length - 1];\n  }, [sortedData]);\n\n  const lastEntryIndex = useMemo(() => {\n    if (!lastEntry) return -1;\n    return xAxisDates.indexOf(lastEntry.displayDate);\n  }, [lastEntry, xAxisDates]);\n\n  const trendLineData = useMemo(() => {\n    if (sortedData.length < 7) return null;\n    \n    const windowSize = 7;\n    const trendPoints: [string, number][] = [];\n    \n    for (let i = 0; i < sortedData.length; i++) {\n      const start = Math.max(0, i - Math.floor(windowSize / 2));\n      const end = Math.min(sortedData.length, i + Math.ceil(windowSize / 2));\n      const window = sortedData.slice(start, end);\n      const avg = window.reduce((sum, d) => sum + d.weight, 0) / window.length;\n      trendPoints.push([sortedData[i].displayDate, avg]);\n    }\n    \n    return trendPoints;\n  }, [sortedData]);\n\n  const projectionData = useMemo(() => {\n    if (sortedData.length < 7 || !trendLineData) return null;\n    \n    const windowSize = 7;\n    const recentWeights: number[] = [];\n    for (let i = sortedData.length - windowSize; i < sortedData.length; i++) {\n      const start = Math.max(0, i - Math.floor(windowSize / 2));\n      const end = Math.min(sortedData.length, i + Math.ceil(windowSize / 2));\n      const window = sortedData.slice(start, end);\n      recentWeights.push(window.reduce((sum, d) => sum + d.weight, 0) / window.length);\n    }\n    \n    if (recentWeights.length < 2) return null;\n    \n    const avgChangePerDay = (recentWeights[recentWeights.length - 1] - recentWeights[0]) / recentWeights.length;\n    \n    const lastTrendValue = trendLineData[trendLineData.length - 1][1];\n    const lastIndex = xAxisDates.indexOf(sortedData[sortedData.length - 1].displayDate);\n    \n    const projectionDays = 60;\n    const projectionPoints: [string, number][] = [];\n    \n    for (let i = 1; i <= projectionDays; i++) {\n      const futureIndex = lastIndex + i;\n      if (futureIndex < xAxisDates.length) {\n        const futureWeight = lastTrendValue + avgChangePerDay * i;\n        projectionPoints.push([xAxisDates[futureIndex], futureWeight]);\n      }\n    }\n    \n    return projectionPoints;\n  }, [sortedData, xAxisDates, trendLineData]);\n\r\n  const doseChanges = useMemo(() => {\r\n    if (!medicationData || medicationData.length === 0) return [];\r\n    \r\n    const sortedMeds = [...medicationData].sort(\r\n      (a, b) => new Date(a.date).getTime() - new Date(b.date).getTime()\r\n    );\r\n    \r\n    const allMedications = Array.from(new Set(sortedMeds.map(e => e.medication)));\r\n    const medicationColors: Record<string, { stroke: string; fill: string }> = {};\r\n    allMedications.forEach((med, index) => {\r\n      medicationColors[med] = getMedicationColor(index);\r\n    });\r\n    \r\n    const changes: { date: string; dose: number; medication: string; color: string }[] = [];\r\n    const lastDosePerMed: Record<string, number> = {};\r\n    \r\n    for (const entry of sortedMeds) {\r\n      const prevDose = lastDosePerMed[entry.medication];\r\n      if (prevDose === undefined) {\r\n        lastDosePerMed[entry.medication] = entry.dose;\r\n        changes.push({ \r\n          date: entry.date, \r\n          dose: entry.dose, \r\n          medication: entry.medication,\r\n          color: medicationColors[entry.medication]?.stroke || '#4ADEA8',\r\n        });\r\n      } else if (entry.dose > prevDose) {\r\n        lastDosePerMed[entry.medication] = entry.dose;\r\n        changes.push({ \r\n          date: entry.date, \r\n          dose: entry.dose, \r\n          medication: entry.medication,\r\n          color: medicationColors[entry.medication]?.stroke || '#4ADEA8',\r\n        });\r\n      } else if (entry.dose < prevDose) {\r\n        lastDosePerMed[entry.medication] = entry.dose;\r\n      }\r\n    }\r\n    \r\n    return changes;\r\n  }, [medicationData]);\r\n\r\n  const chartOption = useMemo(() => {\r\n    if (data.length === 0) {\r\n      return {};\r\n    }\r\n\r\n    const getDotIndices = (dataLength: number): number[] => {\r\n      const visibleLength = visibleEndIndex - visibleStartIndex;\r\n      if (visibleLength <= 12) {\r\n        return Array.from({ length: visibleLength }, (_, i) => visibleStartIndex + i);\r\n      }\r\n      const indices: number[] = [];\r\n      indices.push(visibleStartIndex);\r\n      const step = (visibleLength - 1) / 11;\r\n      for (let i = 1; i <= 10; i++) {\r\n        indices.push(visibleStartIndex + Math.round(i * step));\r\n      }\r\n      indices.push(visibleEndIndex);\r\n      return Array.from(new Set(indices)).sort((a, b) => a - b);\r\n    };\r\n\r\n    const dotIndices = new Set(getDotIndices(sortedData.length));\r\n\r\n    const doseChangeMarkers = (() => {\r\n      if (doseChanges.length === 0) return [];\r\n      \r\n      const displayDates = sortedData.map(d => d.displayDate);\r\n      const shouldShowAll = visibleMedications === undefined;\r\n      \r\n      return doseChanges\r\n        .filter(change => shouldShowAll || (visibleMedications && visibleMedications.includes(shortenMedicationName(change.medication))))\r\n        .map(change => {\r\n          const changeDate = new Date(change.date);\r\n          const formattedDate = changeDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n          const index = displayDates.indexOf(formattedDate);\r\n          \r\n          if (index === -1) {\r\n            const closestIndex = displayDates.findIndex((_, i) => {\r\n              const dateD = new Date(firstDataDate.getTime() + i * 24 * 60 * 60 * 1000);\r\n              return dateD >= changeDate;\r\n            });\r\n            if (closestIndex === -1) return null;\r\n            \r\n            const closestDate = displayDates[closestIndex];\r\n            const weightAtDate = sortedData[closestIndex]?.weight;\r\n            if (!weightAtDate) return null;\r\n            \r\n            return {\r\n              value: [closestDate, weightAtDate],\r\n              dose: change.dose,\r\n              medication: change.medication,\r\n              color: change.color,\r\n            };\r\n          }\r\n          \r\n          const weightAtDate = sortedData[index]?.weight;\r\n          if (!weightAtDate) return null;\r\n          \r\n          return {\r\n            value: [formattedDate, weightAtDate],\r\n            dose: change.dose,\r\n            medication: change.medication,\r\n            color: change.color,\r\n          };\r\n        })\r\n        .filter(Boolean);\r\n    })();\r\n\r\n    const option = {\n      backgroundColor: 'transparent',\n      animation: !isMobile(),\n      tooltip: {\n        trigger: 'axis',\r\n        backgroundColor: 'rgba(20, 15, 35, 0.95)',\r\n        borderColor: 'rgba(177, 156, 217, 0.4)',\r\n        borderWidth: 1,\r\n        borderRadius: 12,\r\n        padding: [12, 16],\n        extraCssText:\n          'box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4); backdrop-filter: blur(10px);',\n        textStyle: { color: '#E2E8F0', fontSize: 13 },\n        formatter: (params: any) => {\n          if (!params || !params.length) return '';\n          const item = params[0];\n          const weight = item.value[1];\n          const formattedWeight = formatWeight(weight, unitSystem);\n          const dateIndex = sortedData.findIndex(d => d.displayDate === item.axisValue);\n          const actualDate = dateIndex >= 0 ? new Date(firstDataDate.getTime() + dateIndex * 24 * 60 * 60 * 1000) : new Date();\n          const dateWithYear = `${item.axisValue} ${actualDate.getFullYear()}`;\n          \n          let trendHtml = '';\n          if (trendLineData && dateIndex >= 0 && dateIndex < trendLineData.length) {\n            const trendWeight = trendLineData[dateIndex][1];\n            const formattedTrend = formatWeight(trendWeight, unitSystem);\n            trendHtml = `\n              <div style=\"display: flex; align-items: center; gap: 8px; margin-top: 4px;\">\n                <span style=\"width: 8px; height: 8px; border-radius: 50%; background: #4ADEA8; box-shadow: 0 0 6px #4ADEA880;\"></span>\n                <span style=\"color: #94a3b8;\">Trend:</span>\n                <span style=\"font-weight: 600; color: #4ADEA8;\">${formattedTrend}</span>\n              </div>`;\n          }\n          \n          return `<div style=\"font-weight: 600; margin-bottom: 4px;\">${dateWithYear}</div>\n            <div style=\"display: flex; align-items: center; gap: 8px;\">\n              <span style=\"width: 8px; height: 8px; border-radius: 50%; background: #9C7BD3; box-shadow: 0 0 6px #9C7BD380;\"></span>\n              <span style=\"color: #94a3b8;\">Weight:</span>\n              <span style=\"font-weight: 600; color: #fff;\">${formattedWeight}</span>\n            </div>${trendHtml}`;\n        },\n      },\n      legend: {\r\n        data: doseChanges.length > 0 ? Array.from(new Set(medicationData.map(e => shortenMedicationName(e.medication)))) : [],\r\n        bottom: 0,\r\n        icon: 'circle',\r\n        itemWidth: 12,\r\n        itemHeight: 12,\r\n        textStyle: { fontSize: 12, color: '#94a3b8' },\r\n        formatter: (value: string) => shortenMedicationName(value),\r\n        tooltip: {\r\n          trigger: 'item',\r\n        },\r\n      },\r\n      grid: {\r\n        top: 0,\r\n        left: 10,\r\n        right: 10,\r\n        bottom: 25,\r\n        containLabel: true,\r\n      },\r\n      xAxis: {\n        type: 'category',\n        data: xAxisDates,\n        boundaryGap: false,\n        axisLine: { lineStyle: { color: 'rgba(156, 123, 211, 0.2)' } },\r\n        axisTick: { lineStyle: { color: 'rgba(156, 123, 211, 0.2)' } },\r\n        axisLabel: { fontSize: 12, color: '#94a3b8', margin: 10 },\r\n        splitLine: { show: false },\r\n      },\r\n      yAxis: {\r\n        type: 'value',\r\n        position: 'right',\r\n        scale: true,\r\n        axisLine: { show: false },\r\n        axisTick: { show: false },\r\n        axisLabel: {\r\n          color: '#94a3b8',\r\n          fontSize: 11,\r\n          margin: 10,\r\n          formatter: (value: number) => formatWeight(value, unitSystem),\r\n        },\r\n        splitLine: {\r\n          lineStyle: { color: 'rgba(156, 123, 211, 0.1)', type: 'dashed' },\r\n        },\r\n      },\r\n      series: [\r\n        {\n          name: 'Weight',\n          type: 'line',\n          z: 10,\n          smooth: true,\n          showSymbol: false,\r\n          symbol: 'none',\r\n          lineStyle: { width: 2, color: '#9C7BD3' },\r\n          itemStyle: {\r\n            color: '#9C7BD3',\r\n            borderColor: '#2D1B4E',\r\n            borderWidth: 2,\r\n          },\r\n          areaStyle: {\r\n            color: {\r\n              type: 'linear',\r\n              x: 0,\r\n              y: 0,\r\n              x2: 0,\r\n              y2: 1,\r\n              colorStops: [\r\n                { offset: 0, color: 'rgba(156, 123, 211, 0.3)' },\r\n                { offset: 1, color: 'rgba(156, 123, 211, 0.02)' },\r\n              ],\r\n            },\r\n          },\r\n          data: sortedData.map((d) => [d.displayDate, d.weight]),\n          markLine: {\n            silent: true,\n            symbol: 'none',\n            lineStyle: {\n              color: 'rgba(74, 222, 168, 0.6)',\n              type: 'dashed',\n              width: 2,\n            },\n            data: [\n              { yAxis: goalWeight, label: { show: true, position: 'insideStartTop', formatter: 'Goal', color: '#4ADEA8', fontSize: 12, padding: [0, 0, 0, 20] } },\n              ...(todayIndex >= 0 ? [{ xAxis: todayStr, lineStyle: { type: 'dotted' as const, width: 2, color: '#94A3B8' }, label: { show: false } }] : []),\n            ],\n          },\n        },\n        ...(lastEntry && lastEntryIndex >= 0 ? [{\n          name: 'LastWeight',\n          type: 'scatter',\n          z: 20,\n          data: [{\n            value: [lastEntry.displayDate, lastEntry.weight],\n            symbolSize: 12,\n          }],\n          symbol: 'circle',\n          symbolSize: 14,\n          itemStyle: {\n            color: '#4ADEA8',\n            borderColor: '#1a3d2e',\n            borderWidth: 3,\n            shadowBlur: 12,\n            shadowColor: '#4ADEA899',\n          },\n          label: {\n            show: true,\n            position: 'top',\n            formatter: (params: any) =>\n              Math.round(convertWeightFromKg(params.value[1], unitSystem)) + (unitSystem === 'imperial' ? 'lbs' : 'kg'),\n            color: '#4ADEA8',\n            fontSize: 10,\n            fontWeight: 'bold',\n            distance: 8,\n            backgroundColor: 'rgba(0, 0, 0, 0.9)',\n            borderRadius: 4,\n            borderColor: '#4ADEA8',\n            borderWidth: 1,\n            padding: [4, 6],\n            textShadowColor: 'rgba(0,0,0,0.8)',\n            textShadowBlur: 4,\n            textShadowOffsetX: 1,\n            textShadowOffsetY: 1,\n          },\n        }] : []),\n        {\r\n          name: 'WeightDots',\r\n          type: 'scatter',\r\n          z: 10,\r\n          data: sortedData\r\n            .map((d, i) => ({ ...d, index: i }))\r\n            .filter((d) => dotIndices.has(d.index))\r\n            .map((d) => ({\r\n              value: [d.displayDate, d.weight],\r\n              itemStyle: {\r\n                color: '#9C7BD3',\r\n                borderColor: '#2D1B4E',\r\n                borderWidth: 2,\r\n                shadowBlur: 8,\r\n                shadowColor: '#9C7BD399',\r\n              },\r\n            })),\r\n          symbol: 'circle',\r\n          symbolSize: 10,\r\n          label: {\n            show: true,\n            position: 'top',\n            formatter: (params: any) =>\n              Math.round(convertWeightFromKg(params.value[1], unitSystem)) + (unitSystem === 'imperial' ? 'lbs' : 'kg'),\n            color: '#E2E8F0',\n            fontSize: 10,\r\n            distance: 8,\r\n            backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n            borderRadius: 4,\r\n            borderColor: 'rgba(0,0,0,0.4)',\r\n            borderWidth: 1,\r\n            padding: [2, 2],\r\n            textShadowColor: 'rgba(0,0,0,0.8)',\r\n            textShadowBlur: 4,\r\n            textShadowOffsetX: 1,\r\n            textShadowOffsetY: 1,\r\n          },\r\n        },\r\n        ...(doseChangeMarkers.length > 0 ? [{\r\n          name: 'DoseChanges',\r\n          type: 'scatter',\r\n          z: 20,\r\n          data: doseChangeMarkers.map((m: any) => ({\r\n            value: [m.value[0], m.value[1], m.dose],\r\n            itemStyle: {\r\n              color: m.color,\r\n              borderColor: '#1a3d2e',\r\n              borderWidth: 2,\r\n              shadowBlur: 8,\r\n              shadowColor: m.color + '99',\r\n            },\r\n          })),\r\n          symbol: 'pin',\r\n          symbolSize: 12,\r\n          symbolOffset: [0, -40],\r\n          \r\n          label: {\r\n            show: true,\r\n            position: 'right',\r\n            formatter: (params: any) => params.value[2] + 'mg',\r\n            color: '#fff',\r\n            fontSize: 10,\r\n            distance: 2,\r\n            backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n            borderRadius: 4,\r\n            borderColor: 'rgba(0,0,0,0.4)',\r\n            borderWidth: 1,\r\n            padding: [2, 2],\r\n            textShadowColor: 'rgba(0,0,0,0.8)',\r\n            textShadowBlur: 4,\r\n            textShadowOffsetX: 1,\r\n            textShadowOffsetY: 1,\r\n          },\r\n        }] : []),\r\n        ...(() => {\r\n          const allMeds = Array.from(new Set(medicationData.map(e => shortenMedicationName(e.medication))));\r\n          return allMeds.map(med => {\r\n            const originalMed = medicationData.find(e => shortenMedicationName(e.medication) === med);\r\n            const allMedications = Array.from(new Set(medicationData.map(e => shortenMedicationName(e.medication))));\r\n            const medicationColors: Record<string, { stroke: string; fill: string }> = {};\r\n            allMedications.forEach((m, index) => {\r\n              medicationColors[m] = getMedicationColor(index);\r\n            });\r\n            return {\r\n              name: med,\r\n              type: 'scatter',\r\n              data: [],\r\n              itemStyle: { color: medicationColors[med]?.stroke || '#4ADEA8' },\r\n              symbol: 'circle',\r\n              symbolSize: 8,\r\n            };\r\n          });\r\n        })(),\n        ...(trendLineData && trendLineData.length > 0 ? [{\n          name: 'Trend',\n          type: 'line',\n          z: 3,\n          smooth: 0.4,\n          data: trendLineData,\n          symbol: 'none',\n          lineStyle: {\n            width: 2,\n            color: '#4ADEA8',\n            type: 'solid',\n            shadowBlur: 8,\n            shadowColor: '#4ADEA8',\n          },\n          areaStyle: {\n            color: {\n              type: 'linear',\n              x: 0,\n              y: 0,\n              x2: 0,\n              y2: 1,\n              colorStops: [\n                { offset: 0, color: 'rgba(74, 222, 168, 0.12)' },\n                { offset: 1, color: 'rgba(74, 222, 168, 0.01)' },\n              ],\n            },\n          },\n        }] : []),\n        ...(projectionData && projectionData.length > 0 ? [{\n          name: 'Projection',\n          type: 'line',\n          z: 2,\n          smooth: 0.4,\n          data: projectionData,\n          symbol: 'none',\n          lineStyle: {\n            width: 2,\n            type: 'dashed',\n            color: {\n              type: 'linear',\n              x: 0,\n              y: 0,\n              x2: 1,\n              y2: 0,\n              colorStops: [\n                { offset: 0, color: 'rgba(74, 222, 168, 0.6)' },\n                { offset: 1, color: 'rgba(74, 222, 168, 0.05)' },\n              ],\n            },\n          },\n        }] : []),\n      ],\n      dataZoom: [\n        {\n          type: 'inside',\n          start: zoomStart,\n          end: zoomEnd,\n          zoomOnMouseWheel: true,\n          moveOnMouseWheel: true,\n        },\n      ],\n    };\r\n\r\n    return option;\r\n  }, [\n    data,\n    sortedData,\n    minWeight,\n    maxWeight,\n    weightPadding,\n    goalWeight,\n    unitSystem,\n    zoomStart,\n    zoomEnd,\n    medicationData,\n    doseChanges,\n    visibleMedications,\n    todayIndex,\n    todayStr,\n    xAxisDates,\n    extendedLastDate,\n    lastEntryIndex,\n    projectionData,\n    trendLineData,\n  ]);\n\r\n  if (data.length === 0) {\r\n    return (\r\n      <ChartEmptyState\r\n        title=\"No weight data yet\"\r\n        description=\"Log your first weight to see the chart\"\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full h-full relative\">\r\n      <ReactECharts\r\n        ref={chartRef}\r\n        option={chartOption}\r\n        style={{ height: '100%', width: '100%', opacity: 1 }}\r\n        opts={{ renderer: 'svg' }}\r\n        onEvents={{\r\n          'legendselectchanged': (params: any) => {\r\n            const { selected } = params;\r\n            const allMeds = Array.from(new Set(medicationData.map(e => shortenMedicationName(e.medication))));\r\n            const visibleMeds = allMeds.filter(med => selected[med] !== false);\r\n            \r\n            if (onLegendChange) {\r\n              onLegendChange(visibleMeds);\r\n            }\r\n            setLocalVisibleMedications(visibleMeds);\r\n          },\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WeightChart;\r\n","import React from 'react';\nimport { WeightAnalytics } from '../../../services';\nimport { WeightEntry, UserProfile } from '../../../types';\nimport { useThemeStyles } from '../../../contexts/ThemeContext';\nimport { formatWeight } from '../../../shared/utils/unitConversion';\nimport { timeService } from '../../../core/timeService';\n\r\ninterface PerformanceOverviewProps {\r\n  weights: WeightEntry[];\r\n  totalLoss: number;\r\n  startWeight: number;\r\n  goalWeight: number;\r\n  profile?: UserProfile;\r\n}\r\n\r\nconst PerformanceOverview: React.FC<PerformanceOverviewProps> = ({\r\n  weights,\r\n  totalLoss,\r\n  startWeight,\r\n  goalWeight,\r\n  profile,\r\n}) => {\r\n  const { bigCard, bigCardText, smallCard, text } = useThemeStyles();\n  const unitSystem = profile?.unitSystem || 'metric';\n  \n  const getTimeActive = () => {\n    if (weights.length === 0) return 'No data';\n    const firstDate = new Date(weights[0].date);\n    const today = timeService.nowDate();\n    const days = Math.floor((today.getTime() - firstDate.getTime()) / (1000 * 60 * 60 * 24));\n    if (days === 0) return 'Today';\n    if (days === 1) return '1 Day';\n    return `${days} Days`;\n  };\n  \n  return (\n    <div className={bigCard}>\n      <h1 className={bigCardText.title} style={{ textShadow: '0 0 15px var(--accent-purple-light-shadow)' }}>Performance Overview</h1>\n      <div className=\"border-t border-[#B19CD9]/20 mb-3\"></div>\n      \n      {/* Performance Overview Row */}\n      <div className=\"space-y-3 mb-3\">\r\n        <div className=\"grid grid-cols-3 gap-3\">\r\n          <div className={smallCard}>\r\n            <p className={text.label}>Progress Rate</p>\r\n            <div className=\"text-left\">\r\n              <p className={text.value}>\r\n                {((totalLoss / (startWeight - goalWeight)) * 100).toFixed(1)}%\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div className={smallCard}>\r\n            <p className={text.label}>Best Week</p>\r\n<div className=\"text-left\">\r\n            <p className={text.value}>\r\n              -{formatWeight(WeightAnalytics.calculateBestWeek(weights), unitSystem)}\r\n            </p>\r\n          </div>\r\n          </div>\r\n          <div className={smallCard}>\n            <p className={text.label}>Time Active</p>\n            <div className=\"text-left\">\n              <p className={text.value}>\n                {getTimeActive()}\n              </p>\n            </div>\n          </div>\n        </div>\r\n\r\n        {/* Additional Metrics */}\r\n        <div className=\"grid grid-cols-3 gap-2 sm:gap-3\">\r\n          <div className={smallCard}>\r\n            <p className={text.label}>Start Weight</p>\r\n            <div className=\"text-left\">\r\n              <p className={text.value}>{formatWeight(startWeight, unitSystem)}</p>\r\n            </div>\r\n          </div>\r\n          <div className={smallCard}>\r\n            <p className={text.label}>Best Month</p>\r\n            <div className=\"text-left\">\r\n              <p className={text.value}>\r\n                -{formatWeight(WeightAnalytics.calculateBestMonth(weights), unitSystem)}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div className={smallCard}>\r\n            <p className={text.label}>Total Loss</p>\r\n            <div className=\"text-left\">\r\n              <p className={text.value}>{formatWeight(totalLoss, unitSystem)}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PerformanceOverview;","import React from 'react';\nimport { calculateBMR, calculateTDEE } from '../../../shared/utils/calculations';\nimport { UserProfile } from '../../../types';\nimport { useThemeStyles } from '../../../contexts/ThemeContext';\nimport { formatWeight } from '../../../shared/utils/unitConversion';\n\r\ninterface TDEEDisplayProps {\r\n  profile: UserProfile;\r\n  currentWeight: number;\r\n}\r\n\r\nconst TDEEDisplay: React.FC<TDEEDisplayProps> = ({ profile, currentWeight }) => {\r\n  const bmr = calculateBMR(profile, currentWeight);\r\n  const tdee = calculateTDEE(bmr, profile.activityLevel);\r\n  const unitSystem = profile.unitSystem || 'metric';\r\n  \r\n  // Calculate weekly weight loss scenarios\r\n  const weightLoss05 = unitSystem === 'imperial' ? 1.1 : 0.5; // 1.1 lbs or 0.5 kg\r\n  const weightLoss1 = unitSystem === 'imperial' ? 2.2 : 1.0; // 2.2 lbs or 1.0 kg\r\n  \r\n  const deficit05Kg = Math.round(7700 * 0.5 / 7); // ~550 cal deficit for 0.5kg/week\r\n  const deficit1Kg = Math.round(7700 * 1.0 / 7); // ~1100 cal deficit for 1kg/week\r\n  const loss05KgPerWeek = Math.round(tdee - deficit05Kg);\r\n  const loss1KgPerWeek = Math.round(tdee - deficit1Kg);\r\n  \r\n  const { bigCardText, tdeeCard, tdeeText } = useThemeStyles();\r\n  \r\n  return (\r\n    <div className=\"space-y-4\">\r\n    <div>\r\n      <h1 className={bigCardText.title} style={{ textShadow: '0 0 15px var(--accent-purple-light-shadow)' }}>\r\n        Weight Loss Calorie Targets\r\n      </h1>\r\n      <div className=\"border-t border-[#B19CD9]/20 mt-3\"></div>\r\n\r\n      <div className=\"space-y-2 my-3\">\r\n      {/* 0.5kg/week */}\r\n      <div className={tdeeCard}>\r\n        <div>\r\n          <p className={tdeeText.label}>Loss {weightLoss05} {unitSystem === 'imperial' ? 'lbs' : 'kg'}/week</p>\r\n          <p className={tdeeText.subtitle}>Gradual Pace</p>\r\n        </div>\r\n        <div className=\"text-right\">\r\n          <p className={tdeeText.value}>{loss05KgPerWeek.toLocaleString()} kcal/day</p>\r\n          <p className={tdeeText.subtitle}>{deficit05Kg.toLocaleString()} kcal deficit</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 1kg/week */}\r\n      <div className={tdeeCard}>\r\n        <div>\r\n          <p className={tdeeText.label}>Loss {weightLoss1} {unitSystem === 'imperial' ? 'lbs' : 'kg'}/week</p>\r\n          <p className={tdeeText.subtitle}>Moderate Pace</p>\r\n        </div>\r\n        <div className=\"text-right\">\r\n          <p className={tdeeText.value}>{loss1KgPerWeek.toLocaleString()} kcal/day</p>\r\n          <p className={tdeeText.subtitle}>{deficit1Kg.toLocaleString()} kcal deficit</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Maintenance */}\r\n      <div className={tdeeCard}>\r\n        <div>\r\n          <p className={tdeeText.label}>Maintenance</p>\r\n          <p className={tdeeText.subtitle}>Current maintenance</p>\r\n        </div>\r\n        <div className=\"text-right\">\r\n          <p className={tdeeText.value}>{tdee.toLocaleString()} cal/day</p>\r\n          <p className={tdeeText.subtitle}>No deficit</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n    {/* Info Section */}\r\n    <div className=\"border-t border-card-border pt-4\">\r\n      <h4\r\n        className={bigCardText.title}\r\n        style={{ textShadow: '0 0 15px var(--accent-purple-light-shadow)' }}\r\n      >\r\n        Based on Current Weight: {formatWeight(currentWeight, unitSystem)}\r\n      </h4>\r\n      <p className=\"text-xs text-text-muted\">\r\n        These calculations use the Mifflin-St Jeor equation, considered the most accurate BMR formula.\r\n        Individual results may vary based on body composition and genetics.\r\n      </p>\r\n    </div>\r\n  </div>\r\n);\r\n};\r\n\r\nexport default TDEEDisplay;","import React, { useState } from 'react';\nimport { UnitSystem } from '../../../types';\nimport { convertWeightToKg } from '../../../shared/utils/unitConversion';\nimport Button from '../../../shared/components/Button';\nimport WeightWheelPickerModal from './WeightWheelPickerModal';\nimport { useTheme } from '../../../contexts/ThemeContext';\n\ninterface WeightInputProps {\n  onAddWeight: (weight: number) => void;\n  unitSystem?: UnitSystem;\n  lastWeight?: number | null;\n  useWheelForNumbers?: boolean;\n}\n\nconst WeightInput: React.FC<WeightInputProps> = ({ onAddWeight, unitSystem = 'metric', lastWeight, useWheelForNumbers = false }) => {\n  const { isDarkMode } = useTheme();\n  const defaultWeight = lastWeight \n    ? String(Math.round(lastWeight * 10) / 10)\n    : (unitSystem === 'imperial' ? '180' : '80');\n  const [showPicker, setShowPicker] = useState(false);\n  const [inputValue, setInputValue] = useState('');\n\n  const maxWeight = unitSystem === 'imperial' ? 1100 : 500;\n\n  const handleSave = (value: string) => {\n    const weightValue = parseFloat(value);\n    if (weightValue && weightValue > 0 && weightValue < maxWeight) {\n      const weightInKg = convertWeightToKg(weightValue, unitSystem);\n      onAddWeight(weightInKg);\n    }\n  };\n\n  const handleKeyboardSubmit = () => {\n    const weightValue = parseFloat(inputValue);\n    if (weightValue && weightValue > 0 && weightValue < maxWeight) {\n      const weightInKg = convertWeightToKg(weightValue, unitSystem);\n      onAddWeight(weightInKg);\n      setInputValue('');\n    }\n  };\n\n  return (\n    <div>\n      {useWheelForNumbers ? (\n        <button\n          type=\"button\"\n          onClick={() => setShowPicker(true)}\n          className={`w-full px-3 py-2 border rounded-lg text-sm text-left transition-all ${\n            isDarkMode\n              ? 'border-[#B19CD9]/50 bg-black/40 text-[#B19CD9]'\n              : 'border-gray-300 bg-white text-gray-900'\n          }`}\n        >\n          + Log Weight\n        </button>\n      ) : (\n        <div className=\"flex gap-2\">\n          <input\n            type=\"number\"\n            value={inputValue}\n            onChange={(e) => setInputValue(e.target.value)}\n            onKeyDown={(e) => e.key === 'Enter' && handleKeyboardSubmit()}\n            className={`flex-1 px-3 py-2 border rounded-lg text-sm transition-all ${\n              isDarkMode\n                ? 'border-[#B19CD9]/50 bg-black/40 text-[#B19CD9] placeholder-[#B19CD9]/50'\n                : 'border-gray-300 bg-white text-gray-900 placeholder-gray-400'\n            }`}\n            placeholder={`Enter weight (${unitSystem === 'imperial' ? 'lbs' : 'kg'})`}\n          />\n          <button\n            type=\"button\"\n            onClick={handleKeyboardSubmit}\n            className=\"px-4 py-2 bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white rounded-lg text-sm font-medium\"\n          >\n            Add\n          </button>\n        </div>\n      )}\n\n      <WeightWheelPickerModal\n        isOpen={showPicker}\n        onSave={handleSave}\n        onClose={() => setShowPicker(false)}\n        min={1}\n        max={maxWeight}\n        label=\"Select Weight\"\n        decimals={1}\n        defaultValue={defaultWeight}\n      />\n    </div>\n  );\n};\n\nexport default WeightInput;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\n\ninterface BMIInfoTooltipProps {\n  className?: string;\n}\n\nconst BMIInfoTooltip: React.FC<BMIInfoTooltipProps> = ({ className = '' }) => {\n  const [isVisible, setIsVisible] = useState(false);\n  const [position, setPosition] = useState({ top: 0, left: 0 });\n  const buttonRef = useRef<HTMLButtonElement>(null);\n\n  const bmiCategories = [\n    { abbreviation: 'UW', description: 'Underweight', range: 'BMI < 18.5' },\n    { abbreviation: 'NW', description: 'Normal Weight', range: 'BMI 18.5-24.9' },\n    { abbreviation: 'OW', description: 'Overweight', range: 'BMI 25-29.9' },\n    { abbreviation: 'OB I', description: 'Obesity Class I', range: 'BMI 30-34.9' },\n    { abbreviation: 'OB II', description: 'Obesity Class II', range: 'BMI 35-39.9' },\n    { abbreviation: 'OB III', description: 'Obesity Class III', range: 'BMI  40' },\n  ];\n\n  useEffect(() => {\n    if (isVisible && buttonRef.current) {\n      const rect = buttonRef.current.getBoundingClientRect();\n      setPosition({\n        top: rect.top + rect.height + 8,\n        left: rect.left + rect.width / 2,\n      });\n    }\n  }, [isVisible]);\n\n  const tooltip = isVisible ? (\n    <div \n      className=\"fixed z-[9999] w-32 p-2 bg-black/90 backdrop-blur-lg rounded-lg shadow-xl border border-[#9C7BD3]/20\"\n      style={{ \n        top: position.top, \n        left: position.left,\n        transform: 'translateX(-50%)'\n      }}\n    >\n      <div className=\"text-white text-xs space-y-1\">\n        {bmiCategories.map((category) => (\n          <div key={category.abbreviation} className=\"flex justify-between items-center text-[10px]\">\n            <span className=\"font-medium\">{category.abbreviation}:</span>\n            <div className=\"text-right\">\n              <div className=\"text-gray-300\">{category.description}</div>\n              <div className=\"text-gray-400\">{category.range}</div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  ) : null;\n\n  return (\n    <>\n      <div className={`relative inline-block ${className}`}>\n        <button\n          ref={buttonRef}\n          className=\"text-[#9C7BD3] hover:text-[#B19CD9] transition-colors duration-200 cursor-help\"\n          onMouseEnter={() => setIsVisible(true)}\n          onMouseLeave={() => setIsVisible(false)}\n          onClick={() => setIsVisible(!isVisible)}\n          aria-label=\"BMI category information\"\n        >\n          <svg\n            width=\"16\"\n            height=\"16\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n          >\n            <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n            <line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"></line>\n            <line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"></line>\n          </svg>\n        </button>\n      </div>\n      {createPortal(tooltip, document.body)}\n    </>\n  );\n};\n\nexport default BMIInfoTooltip;\n","import React, { useMemo } from 'react';\r\nimport WeightChart from '../weight/WeightChart';\r\nimport MedicationChart from '../medication/components/MedicationChart';\r\nimport PerformanceOverview from './components/PerformanceOverview';\r\nimport TDEEDisplay from './components/TDEEDisplay';\r\nimport WeightInput from '../weight/components/WeightInput';\r\nimport BMIInfoTooltip from './components/BMIInfoTooltip';\r\nimport PeriodSelector from '../../shared/components/PeriodSelector';\r\nimport { useWeightMetrics, type ChartPeriod } from '../../shared/hooks';\r\nimport { WeightEntry, GLP1Entry, UserProfile } from '../../types';\r\nimport { useThemeStyles } from '../../contexts/ThemeContext';\r\nimport { formatWeight, convertWeightFromKg } from '../../shared/utils/unitConversion';\r\n\r\ninterface DashboardProps {\n  weights: WeightEntry[];\n  dosesEntries: GLP1Entry[];\n  profile: UserProfile;\n  goalWeight?: number;\n  onAddWeight: (weight: number) => void;\n  chartPeriod: ChartPeriod;\n  onChartPeriodChange: (period: ChartPeriod) => void;\n  useWheelForNumbers?: boolean;\n}\n\r\nconst Dashboard: React.FC<DashboardProps> = ({\n  weights,\n  dosesEntries,\n  profile,\n  goalWeight,\n  onAddWeight,\n  chartPeriod,\n  onChartPeriodChange,\n  useWheelForNumbers = true,\n}) => {\n  const { bigCard, bigCardText, smallCard, text } = useThemeStyles();\r\n\r\n  // Use custom hooks for data processing\r\n  const actualGoalWeight = goalWeight || profile.goalWeight || 80;\r\n  const weightMetrics = useWeightMetrics(weights, profile, actualGoalWeight);\r\n  const unitSystem = profile.unitSystem || 'metric';\r\n\r\n  const lastWeight = weights.length > 0 ? weights[weights.length - 1].weight : null;\n  const lastWeightDisplay = lastWeight ? convertWeightFromKg(lastWeight, unitSystem) : null;\n\n  const generatedEntries = useMemo(\n    () => dosesEntries.filter(e => !e.isManual),\n    [dosesEntries]\n  );\n\r\n  return (\r\n    <>\r\n      {/* Unified Dashboard Card */}\r\n      <div className={bigCard}>\r\n        <h1 className={bigCardText.title} style={{ textShadow: '0 0 15px var(--accent-purple-light-shadow)' }}>Dashboard</h1>\r\n        <div className=\"border-t border-[#B19CD9]/20 mb-3\"></div>\r\n        \r\n        {/* Metrics Section */}\r\n        <div className=\"space-y-3 mb-3\">\r\n{/* Row 1: Current, BMI, Total Loss */}\r\n          <div className=\"grid grid-cols-3 gap-2 sm:gap-3 overflow-visible\">\r\n            <div className={smallCard}>\r\n              <p className={text.label}>Current</p>\r\n              <p className={text.value}>{formatWeight(weightMetrics.currentWeight, unitSystem)}</p>\r\n            </div>\r\n            <div className={smallCard}>\r\n              <div className=\"flex justify-between items-center mb-1\">\r\n                <p className={text.label}>BMI</p>\r\n                <BMIInfoTooltip />\r\n              </div>\r\n              <p className={text.totalLossValue} style={{display: 'flex', justifyContent: 'space-between', alignItems: 'flex-end'}}>\r\n                <span style={{display: 'inline-block', whiteSpace: 'nowrap'}}>\r\n                  {weightMetrics.bmi.toFixed(1)}\r\n                </span>\r\n                <span className={`${text.bmiCategory} ${weightMetrics.bmiCategory.color}`}>\r\n                  ({weightMetrics.bmiCategory.category})\r\n                </span>\r\n              </p>\r\n            </div>\r\n            <div className={smallCard}>\r\n              <p className={text.label}>Total Loss</p>\r\n              <p className={text.totalLossValue} style={{display: 'flex', justifyContent: 'space-between', alignItems: 'flex-end'}}>\r\n                <span style={{display: 'inline-block', whiteSpace: 'nowrap'}}>\r\n                  {formatWeight(weightMetrics.totalLoss, unitSystem)}\r\n                </span>\r\n                <span className={text.percentage}>\r\n                  ({weightMetrics.totalLossPercentage.toFixed(1)}%)\r\n                </span>\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Row 2: Weekly Avg, Monthly Avg, To Lose */}\r\n          <div className=\"grid grid-cols-3 gap-2 sm:gap-3\">\r\n            <div className={smallCard}>\r\n              <p className={text.label}>Weekly Avg</p>\r\n              <p className={text.value}>\r\n                {weightMetrics.weeklyAverageLoss > 0 ? '-' : ''}{formatWeight(Math.abs(weightMetrics.weeklyAverageLoss), unitSystem)}\r\n              </p>\r\n            </div>\r\n            <div className={smallCard}>\r\n              <p className={text.label}>Monthly Avg</p>\r\n              <p className={text.value}>\r\n                {weightMetrics.monthlyAverageLoss > 0 ? '-' : ''}{formatWeight(Math.abs(weightMetrics.monthlyAverageLoss), unitSystem)}\r\n              </p>\r\n            </div>\r\n            <div className={smallCard}>\r\n              <p className={text.label}>To Lose</p>\r\n              <p className={text.value}>\r\n                {formatWeight(weightMetrics.currentWeight - actualGoalWeight, unitSystem)}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"border-t border-[#B19CD9]/20 my-3\"></div>\r\n\r\n        {/* Charts Section */}\r\n        <div className=\"space-y-6\">\r\n{/* Weight Trends */}\r\n          <div>\r\n            <PeriodSelector value={chartPeriod} onChange={onChartPeriodChange} />\r\n            <div className=\"h-64 sm:h-72\">\r\n              <WeightChart data={weights} goalWeight={actualGoalWeight} unitSystem={unitSystem} period={chartPeriod} medicationData={dosesEntries} />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Medication Status */}\r\n          <div>\r\n            <div className=\"h-64 sm:h-72\">\r\n              <MedicationChart data={generatedEntries} period={chartPeriod} />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"border-t border-[#B19CD9]/20 my-3\"></div>\r\n\r\n{/* Weight Input Section */}\r\n          <div className=\"mb-6\">\r\n            <WeightInput onAddWeight={onAddWeight} unitSystem={unitSystem} lastWeight={lastWeightDisplay} useWheelForNumbers={useWheelForNumbers} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Performance Overview */}\r\n      <PerformanceOverview \r\n        weights={weights}\r\n        totalLoss={weightMetrics.totalLoss}\r\n        startWeight={weightMetrics.startWeight}\r\n        goalWeight={actualGoalWeight}\r\n        profile={profile}\r\n      />\r\n\r\n      {/* Metabolic Profile */}\r\n      <div className={bigCard}>\r\n        <TDEEDisplay profile={profile} currentWeight={weightMetrics.currentWeight} />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Dashboard;","import React, { useMemo, useCallback, useState, useRef } from 'react';\nimport ReactECharts from 'echarts-for-react';\nimport { GLP1Entry } from '../../../types';\nimport { useMedicationChartData } from '../../../shared/hooks/useChartDataProcessor';\nimport { useChartDateRange } from '../../../shared/hooks/useChartDateRange';\nimport { generateMedicationSeries } from '../../../shared/utils/medicationChartUtils';\nimport { CHART_COLORS } from '../../../shared/utils/chartUtils';\nimport ChartEmptyState from '../../../shared/components/ChartEmptyState';\nimport { useTime } from '../../../shared/hooks';\nimport { isMobile } from '../../../shared/utils/common';\n\nimport { ChartPeriod } from '../../../shared/hooks';\n\r\nconst shortenMedicationName = (name: string): string => {\r\n  return name.replace(/\\s*\\(.*?\\)/g, '').trim();\r\n};\r\n\r\ninterface MedicationChartProps {\r\n  data: GLP1Entry[];\r\n  period: ChartPeriod;\r\n  onLegendChange?: (visibleMeds: string[]) => void;\r\n}\r\n\r\nconst MedicationChart: React.FC<MedicationChartProps> = ({ data, period, onLegendChange }) => {\n  const chartRef = useRef<any>(null);\n  const { medications, medicationColors, dosesByMed, halfLifeByMed } =\n    useMedicationChartData(data);\n\n  // Use time service for simulated time\n  const now = useTime(1000);\n  const simulatedNow = new Date(now);\n\n  const firstDataDate = useMemo(\n    () =>\r\n      data.length > 0\r\n        ? new Date(Math.min(...data.map((d) => new Date(d.date).getTime())))\r\n        : new Date(),\r\n    [data]\r\n  );\r\n\r\n  const lastDataDate = useMemo(\r\n    () =>\r\n      data.length > 0\r\n        ? new Date(Math.max(...data.map((d) => new Date(d.date).getTime())))\r\n        : new Date(),\r\n    [data]\r\n  );\r\n\r\n  const extendedLastDate = useMemo(() => {\r\n    const futureDays = 60;\r\n    return new Date(lastDataDate.getTime() + futureDays * 24 * 60 * 60 * 1000);\r\n  }, [lastDataDate]);\r\n\r\n  const {\r\n    xAxisDates,\r\n    todayIndex,\r\n    zoomStart,\r\n    zoomEnd,\r\n    visibleStartIndex,\r\n    visibleEndIndex,\r\n  } = useChartDateRange(firstDataDate, extendedLastDate, period, 14, simulatedNow);\n\n  const chartOption = useMemo(() => {\n    if (data.length === 0) {\r\n      return {};\r\n    }\r\n\r\n    const series = generateMedicationSeries({\r\n      medications,\r\n      medicationColors,\r\n      dosesByMed,\r\n      halfLifeByMed,\r\n      firstDate: firstDataDate,\r\n      lastDate: extendedLastDate,\r\n      xAxisDates,\r\n      todayIndex,\r\n      visibleStartIndex,\r\n      visibleEndIndex,\r\n    });\r\n\r\n    const option = {\n      backgroundColor: 'transparent',\n      animation: !isMobile(),\n      tooltip: {\n        trigger: 'axis',\r\n        backgroundColor: 'rgba(20, 15, 35, 0.95)',\r\n        borderColor: 'rgba(177, 156, 217, 0.4)',\r\n        borderWidth: 1,\r\n        borderRadius: 12,\r\n        padding: [12, 16],\r\n        extraCssText:\r\n          'box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4); backdrop-filter: blur(10px);',\r\n        textStyle: { color: '#E2E8F0', fontSize: 13 },\r\n        formatter: (params: any) => {\r\n          if (!params || !params.length) return '';\r\n          const filteredParams = params.filter(\r\n            (p: any) => p.seriesType !== 'scatter'\r\n          );\r\n          const processedParams = filteredParams.map((p: any) => ({\r\n            ...p,\r\n            seriesName: p.seriesName?.replace('_future', '') || p.seriesName,\r\n          }));\r\n          const dedupedParams: any[] = [];\r\n          const seen = new Set<string>();\r\n          for (const p of processedParams) {\r\n            if (!seen.has(p.seriesName)) {\r\n              seen.add(p.seriesName);\r\n              dedupedParams.push(p);\r\n            }\r\n          }\r\n          const nonZeroParams = dedupedParams.filter(\r\n            (p: any) => (p.value?.[1] ?? 0) > 0\r\n          );\r\n          const dateStr = params[0].axisValue;\r\n          const dateIndex = xAxisDates.indexOf(dateStr);\r\n          const actualDate = dateIndex >= 0 ? new Date(firstDataDate.getTime() + dateIndex * 24 * 60 * 60 * 1000) : new Date();\r\n          const dateWithYear = `${dateStr} ${actualDate.getFullYear()}`;\r\n          if (nonZeroParams.length === 0)\r\n            return `${dateWithYear}<div style=\"color: #94a3b8; font-size: 11px;\">No active dose</div>`;\r\n          let html = `<div style=\"font-weight: 600; margin-bottom: 8px; padding-bottom: 6px; border-bottom: 1px solid rgba(156, 123, 211, 0.2);\">${dateWithYear}</div>`;\r\n          nonZeroParams.forEach((item: any) => {\r\n            const color = item.color || '#9C7BD3';\r\n            const value = item.value?.[1] ?? 0;\r\n            const formattedValue = value < 1 ? value.toFixed(2) : value.toFixed(1);\r\n            const shortName = shortenMedicationName(item.seriesName);\r\n            html += `<div style=\"display: flex; align-items: center; gap: 10px; margin: 4px 0;\">\r\n              <span style=\"width: 10px; height: 10px; border-radius: 50%; background: ${color}; box-shadow: 0 0 6px ${color}80;\"></span>\r\n              <span style=\"color: #94a3b8;\">${shortName}:</span>\r\n              <span style=\"font-weight: 600; color: #fff;\">${formattedValue} mg</span>\r\n            </div>`;\r\n          });\r\n          return html;\r\n        },\r\n      },\r\n      legend: {\r\n        data: medications.length > 1 ? ['Combined', ...medications] : medications,\r\n        bottom: 0,\r\n        icon: 'circle',\r\n        itemWidth: 12,\r\n        itemHeight: 12,\r\n        textStyle: { fontSize: 12, color: '#94a3b8' },\r\n        formatter: (value: string) => shortenMedicationName(value),\r\n        tooltip: {\r\n          trigger: 'item',\r\n        },\r\n      },\r\n      dataZoom: [\n        {\n          type: 'inside',\n          start: zoomStart,\n          end: zoomEnd,\n          zoomOnMouseWheel: true,\n          moveOnMouseWheel: true,\n        },\n      ],\n      grid: {\r\n        top: 0,\r\n        left: 10,\r\n        right: 10,\r\n        bottom: 25,\r\n        containLabel: true,\r\n      },\r\n      xAxis: {\r\n        type: 'category',\r\n        data: xAxisDates,\r\n        boundaryGap: false,\r\n        axisLine: { lineStyle: { color: 'rgba(156, 123, 211, 0.2)' } },\r\n        axisTick: { lineStyle: { color: 'rgba(156, 123, 211, 0.2)' } },\r\n        axisLabel: { fontSize: 12, color: '#94a3b8' },\r\n        splitLine: { show: false },\r\n      },\r\n      yAxis: {\r\n        type: 'value',\r\n        position: 'right',\r\n        min: 0,\r\n        axisLine: { show: false },\r\n        axisTick: { show: false },\r\n        axisLabel: {\r\n          color: '#94a3b8',\r\n          fontSize: 11,\r\n          margin: 10,\r\n          formatter: (value: number) => value.toFixed(1) + 'mg',\r\n        },\r\n        splitLine: {\r\n          lineStyle: { color: 'rgba(156, 123, 211, 0.1)', type: 'dashed' },\r\n        },\r\n      },\r\n      series,\r\n    };\r\n\r\n    return option;\r\n  }, [\r\n    data,\r\n    medications,\r\n    medicationColors,\r\n    dosesByMed,\r\n    halfLifeByMed,\r\n    firstDataDate,\r\n    lastDataDate,\r\n    xAxisDates,\r\n    todayIndex,\r\n    zoomStart,\r\n    zoomEnd,\r\n    visibleStartIndex,\r\n    visibleEndIndex,\r\n  ]);\r\n\r\n  if (data.length === 0) {\r\n    return (\r\n      <ChartEmptyState\r\n        title=\"No dose data yet\"\r\n        description=\"Log your first dose to see the chart\"\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full h-full relative\">\r\n      <ReactECharts\r\n        ref={chartRef}\r\n        option={chartOption}\r\n        style={{ height: '100%', width: '100%', opacity: 1 }}\r\n        opts={{ renderer: 'svg' }}\r\n        onEvents={{\r\n          'legendselectchanged': (params: any) => {\r\n            const { selected, name } = params;\r\n            const chart = chartRef.current?.getEchartsInstance();\r\n            if (!chart) return;\r\n            \r\n            const isSelected = selected[name];\r\n            \r\n            if (name === 'Combined') {\r\n              chart.dispatchAction({\r\n                type: isSelected ? 'legendSelect' : 'legendUnSelect',\r\n                name: 'Combined_future',\r\n              });\r\n            }\r\n            \r\n            medications.forEach((med) => {\r\n              if (name === med) {\r\n                chart.dispatchAction({\r\n                  type: isSelected ? 'legendSelect' : 'legendUnSelect',\r\n                  name: med + '_future',\r\n                });\r\n              }\r\n            });\r\n          },\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MedicationChart;\r\n","import { GLP1Entry } from '../../types';\r\nimport { calculateMedicationConcentration } from './calculations';\r\nimport { CHART_COLORS } from './chartUtils';\r\n\r\ninterface MedicationSeriesParams {\r\n  medications: string[];\r\n  medicationColors: Record<string, { stroke: string; fill: string }>;\r\n  dosesByMed: Record<string, { date: Date; dose: number }[]>;\r\n  halfLifeByMed: Record<string, number>;\r\n  firstDate: Date;\r\n  lastDate: Date;\r\n  xAxisDates: string[];\r\n  todayIndex: number;\r\n  visibleStartIndex: number;\r\n  visibleEndIndex: number;\r\n}\r\n\r\nexport const generateMedicationSeries = ({\r\n  medications,\r\n  medicationColors,\r\n  dosesByMed,\r\n  halfLifeByMed,\r\n  firstDate,\r\n  lastDate,\r\n  xAxisDates,\r\n  todayIndex,\r\n  visibleStartIndex,\r\n  visibleEndIndex,\r\n}: MedicationSeriesParams) => {\r\n  const doseDatesByMed: Record<string, Set<string>> = {};\r\n  const doseAmountByMed: Record<string, Record<string, number>> = {};\r\n  const combinedDoseDates = new Set<string>();\r\n  const combinedDoseAmounts: Record<string, number> = {};\r\n\r\n  medications.forEach((med) => {\r\n    doseDatesByMed[med] = new Set();\r\n    doseAmountByMed[med] = {};\r\n    dosesByMed[med].forEach((d) => {\r\n      const peakDate = new Date(d.date.getTime() + 24 * 60 * 60 * 1000);\r\n      const dateKey = peakDate.toLocaleDateString('en-US', {\r\n        month: 'short',\r\n        day: 'numeric',\r\n      });\r\n      doseDatesByMed[med].add(dateKey);\r\n      doseAmountByMed[med][dateKey] = d.dose;\r\n      combinedDoseDates.add(dateKey);\r\n      combinedDoseAmounts[dateKey] = (combinedDoseAmounts[dateKey] || 0) + d.dose;\r\n    });\r\n  });\r\n\r\n  const combinedColor = CHART_COLORS.combined;\r\n  const combinedSeries: any[] = [];\r\n  const combinedLineDataBefore: any[] = [];\r\n  const combinedLineDataAfter: any[] = [];\r\n  const combinedDoseData: any[] = [];\r\n\r\n  const combinedDoseDatesArray = Array.from(combinedDoseDates);\r\n  \r\n  const iterateDate = new Date(firstDate);\r\n  while (iterateDate <= lastDate) {\r\n    let totalConcentration = 0;\r\n    medications.forEach((med) => {\r\n      totalConcentration += calculateMedicationConcentration(\r\n        dosesByMed[med],\r\n        halfLifeByMed[med],\r\n        new Date(iterateDate)\r\n      );\r\n    });\r\n\r\n    const dateStr = iterateDate.toLocaleDateString('en-US', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n    });\r\n    const hasDose = combinedDoseDates.has(dateStr);\r\n    const dose = hasDose ? combinedDoseAmounts[dateStr] : undefined;\r\n    const value = isNaN(totalConcentration) ? null : totalConcentration;\r\n\r\n    const dateIndex = xAxisDates.indexOf(dateStr);\r\n    if (dateIndex <= todayIndex) {\r\n      combinedLineDataBefore.push([dateStr, value]);\r\n    }\r\n    if (dateIndex >= todayIndex) {\r\n      combinedLineDataAfter.push([dateStr, value]);\r\n    }\r\n\r\n    if (dose) {\r\n      combinedDoseData.push({\r\n        name: dateStr,\r\n        value: [dateStr, value],\r\n        symbol: 'circle',\r\n        symbolSize: 10,\r\n        itemStyle: {\r\n          color: combinedColor.stroke,\r\n          borderColor: '#2D1B4E',\r\n          borderWidth: 2,\r\n          shadowBlur: 8,\r\n          shadowColor: combinedColor.stroke + '99',\r\n        },\r\n      });\r\n    }\r\n\r\n    iterateDate.setDate(iterateDate.getDate() + 1);\r\n  }\r\n\r\n  if (medications.length > 0) {\r\n    combinedSeries.push(\r\n      {\r\n        name: 'Combined',\r\n        type: 'line',\r\n        smooth: true,\r\n        showSymbol: false,\r\n        symbol: 'none',\r\n        itemStyle: { color: combinedColor.stroke },\r\n        lineStyle: { width: 2, color: combinedColor.stroke },\r\n        areaStyle: {\r\n          color: {\r\n            type: 'linear',\r\n            x: 0,\r\n            y: 0,\r\n            x2: 0,\r\n            y2: 1,\r\n            colorStops: [\r\n              { offset: 0, color: combinedColor.fill },\r\n              { offset: 1, color: combinedColor.fill.replace('0.3', '0.02') },\r\n            ],\r\n          },\r\n        },\r\n        emphasis: {\r\n          lineStyle: { width: 3 },\r\n          itemStyle: { opacity: 0 },\r\n        },\r\n        triggerLineEvent: false,\r\n        data: combinedLineDataBefore,\r\n      },\r\n      {\r\n        name: 'Combined_future',\r\n        type: 'line',\r\n        smooth: true,\r\n        showSymbol: false,\r\n        symbol: 'none',\r\n        showInLegend: false,\r\n        lineStyle: { width: 2, color: combinedColor.stroke, type: 'dotted' },\r\n        emphasis: {\r\n          disabled: true,\r\n        },\r\n        triggerLineEvent: false,\r\n        data: combinedLineDataAfter,\r\n      },\r\n      {\r\n        name: 'Combined',\r\n        type: 'scatter',\r\n        z: 10,\r\n        showInLegend: false,\r\n        emphasis: {\r\n          scale: 1.2,\r\n        },\r\n        data: combinedDoseData,\r\n      }\r\n    );\r\n  }\r\n\r\n  combinedSeries.forEach((s: any) => {\r\n    if (s.type === 'scatter' && s.data && s.data.length > 0) {\r\n      let lastShownValue: number | null = null;\r\n      s.data = s.data.map((dot: any) => {\r\n        const doseValue = dot.value[1];\r\n        let shouldShow = true;\r\n        if (lastShownValue !== null && lastShownValue > 0) {\r\n          const diff = Math.abs(doseValue - lastShownValue) / lastShownValue;\r\n          if (diff <= 0.25) {\r\n            shouldShow = false;\r\n          }\r\n        }\r\n        if (shouldShow) {\r\n          lastShownValue = doseValue;\r\n          const formattedDoseValue = doseValue < 1 ? doseValue.toFixed(2) : doseValue.toFixed(1);\r\n          return {\r\n            ...dot,\r\n            label: {\r\n              show: true,\r\n              position: 'top',\r\n              formatter: formattedDoseValue + 'mg',\r\n              color: '#E2E8F0',\r\n              fontSize: 10,\r\n              distance: 8,\r\n              backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n              borderRadius: 4,\r\n              borderColor: 'rgba(0,0,0,0.4)',\r\n              borderWidth: 1,\r\n              padding: [2, 2],\r\n              textShadowColor: 'rgba(0,0,0,0.8)',\r\n              textShadowBlur: 4,\r\n              textShadowOffsetX: 1,\r\n              textShadowOffsetY: 1,\r\n            },\r\n          };\r\n        }\r\n        return { ...dot, label: { show: false } };\r\n      });\r\n    }\r\n  });\r\n\r\n  combinedSeries.forEach((s: any) => {\r\n    if (s.type === 'scatter' && s.data && s.data.length > 0) {\r\n      const visibleDots = s.data.filter((dot: any) => {\r\n        const dotIndex = xAxisDates.indexOf(dot.value[0]);\r\n        return dotIndex >= visibleStartIndex && dotIndex <= visibleEndIndex;\r\n      });\r\n      if (visibleDots.length > 6) {\r\n        const step = Math.floor(visibleDots.length / 6);\r\n        s.data = visibleDots\r\n          .filter((_: any, i: number) => i % step === 0)\r\n          .slice(0, 6);\r\n      }\r\n    }\r\n  });\r\n\r\n  const series: any[] = medications.map((med) => {\r\n    const lineDataBefore: any[] = [];\r\n    const lineDataAfter: any[] = [];\r\n    const doseData: any[] = [];\r\n    const color = medicationColors[med];\r\n\r\n    const iterateDate = new Date(firstDate);\r\n    while (iterateDate <= lastDate) {\r\n      const concentration = calculateMedicationConcentration(\r\n        dosesByMed[med],\r\n        halfLifeByMed[med],\r\n        new Date(iterateDate)\r\n      );\r\n\r\n      const dateStr = iterateDate.toLocaleDateString('en-US', {\r\n        month: 'short',\r\n        day: 'numeric',\r\n      });\r\n      const hasDose = doseDatesByMed[med].has(dateStr);\r\n      const dose = hasDose ? doseAmountByMed[med][dateStr] : undefined;\r\n      const value = isNaN(concentration)\r\n        ? null\r\n        : concentration;\r\n\r\n      const dateIndex = xAxisDates.indexOf(dateStr);\r\n      if (dateIndex <= todayIndex) {\r\n        lineDataBefore.push([dateStr, value]);\r\n      }\r\n      if (dateIndex >= todayIndex) {\r\n        lineDataAfter.push([dateStr, value]);\r\n      }\r\n\r\n      if (dose) {\r\n        doseData.push({\r\n          name: dateStr,\r\n          value: [dateStr, value],\r\n          symbol: 'circle',\r\n          symbolSize: 10,\r\n          itemStyle: {\r\n            color: color.stroke,\r\n            borderColor: '#2D1B4E',\r\n            borderWidth: 2,\r\n            shadowBlur: 8,\r\n            shadowColor: color.stroke + '99',\r\n          },\r\n        });\r\n      }\r\n\r\n      iterateDate.setDate(iterateDate.getDate() + 1);\r\n    }\r\n\r\n    return [\r\n      {\r\n        name: med,\r\n        type: 'line',\r\n        smooth: true,\r\n        showSymbol: false,\r\n        symbol: 'none',\r\n        itemStyle: { color: color.stroke },\r\n        lineStyle: { width: 2, color: color.stroke },\r\n        areaStyle: {\r\n          color: {\r\n            type: 'linear',\r\n            x: 0,\r\n            y: 0,\r\n            x2: 0,\r\n            y2: 1,\r\n            colorStops: [\r\n              { offset: 0, color: color.fill },\r\n              { offset: 1, color: color.fill.replace('0.3', '0.02') },\r\n            ],\r\n          },\r\n        },\r\n        emphasis: {\r\n          lineStyle: { width: 3 },\r\n          itemStyle: { opacity: 0 },\r\n        },\r\n        triggerLineEvent: false,\r\n        data: lineDataBefore,\r\n      },\r\n      {\r\n        name: med + '_future',\r\n        type: 'line',\r\n        smooth: true,\r\n        showSymbol: false,\r\n        symbol: 'none',\r\n        showInLegend: false,\r\n        lineStyle: { width: 2, color: color.stroke, type: 'dotted' },\r\n        emphasis: {\r\n          disabled: true,\r\n        },\r\n        triggerLineEvent: false,\r\n        data: lineDataAfter,\r\n      },\r\n      {\r\n        name: med,\r\n        type: 'scatter',\r\n        z: 10,\r\n        showInLegend: false,\r\n        emphasis: {\r\n          scale: 1.2,\r\n        },\r\n        data: doseData,\r\n      },\r\n    ];\r\n  }).flat();\r\n\r\n  series.forEach((s: any) => {\r\n    if (s.type === 'scatter' && s.data && s.data.length > 0) {\r\n      let lastShownValue: number | null = null;\r\n\r\n      s.data = s.data.map((dot: any) => {\r\n        const doseValue = dot.value[1];\r\n\r\n        let shouldShow = true;\r\n        if (lastShownValue !== null && lastShownValue > 0) {\r\n          const diff = Math.abs(doseValue - lastShownValue) / lastShownValue;\r\n          if (diff <= 0.25) {\r\n            shouldShow = false;\r\n          }\r\n        }\r\n\r\n        if (shouldShow) {\r\n          lastShownValue = doseValue;\r\n          const formattedDoseValue = doseValue < 1 ? doseValue.toFixed(2) : doseValue.toFixed(1);\r\n          return {\r\n            ...dot,\r\n            label: {\r\n              show: true,\r\n              position: 'top',\r\n              formatter: formattedDoseValue + 'mg',\r\n              color: '#E2E8F0',\r\n              fontSize: 10,\r\n              distance: 8,\r\n              backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n              borderRadius: 4,\r\n              borderColor: 'rgba(0,0,0,0.4)',\r\n              borderWidth: 1,\r\n              padding: [2, 2],\r\n              textShadowColor: 'rgba(0,0,0,0.8)',\r\n              textShadowBlur: 4,\r\n              textShadowOffsetX: 1,\r\n              textShadowOffsetY: 1,\r\n            },\r\n          };\r\n        }\r\n\r\n        return { ...dot, label: { show: false } };\r\n      });\r\n    }\r\n  });\r\n\r\n  series.forEach((s: any) => {\r\n    if (s.type === 'scatter' && s.data && s.data.length > 0) {\r\n      const visibleDots = s.data.filter((dot: any) => {\r\n        const dotIndex = xAxisDates.indexOf(dot.value[0]);\r\n        return dotIndex >= visibleStartIndex && dotIndex <= visibleEndIndex;\r\n      });\r\n\r\n      if (visibleDots.length > 6) {\r\n        const step = Math.floor(visibleDots.length / 6);\r\n        s.data = visibleDots\r\n          .filter((_: any, i: number) => i % step === 0)\r\n          .slice(0, 6);\r\n      }\r\n    }\r\n  });\r\n\r\n  if (todayIndex >= 0) {\r\n    const todayDateStr = xAxisDates[todayIndex];\r\n    const markLineConfig = {\r\n      silent: true,\r\n      symbol: 'none',\r\n      z: 100,\r\n      label: { show: false },\r\n      lineStyle: { type: 'dotted', width: 2, color: '#94A3B8' },\r\n      data: [{ xAxis: todayDateStr }],\r\n    };\r\n\r\n    const todayLineSeries = {\r\n      name: 'Today',\r\n      type: 'line',\r\n      markLine: markLineConfig,\r\n      data: [],\r\n      silent: true,\r\n      animation: false,\r\n      lineStyle: { opacity: 0 },\r\n      areaStyle: { opacity: 0 },\r\n    };\r\n\r\n    if (combinedSeries.length > 0) {\r\n      (combinedSeries[2] as any).markLine = markLineConfig;\r\n    }\r\n    if (series.length > 0) {\r\n      (series[2] as any).markLine = markLineConfig;\r\n    }\r\n\r\n    return [...(medications.length > 1 ? combinedSeries : []), ...series, todayLineSeries];\r\n  }\r\n\r\n  return [...(medications.length > 1 ? combinedSeries : []), ...series];\r\n};\r\n","import React from 'react';\n\ninterface ChartEmptyStateProps {\n  title: string;\n  description: string;\n}\n\nconst ChartEmptyState: React.FC<ChartEmptyStateProps> = ({\n  title,\n  description,\n}) => {\n  return (\n    <div className=\"w-full h-full flex flex-col items-center justify-center\">\n      <div className=\"text-center text-text-muted\">\n        <p className=\"text-sm\">{title}</p>\n        <p className=\"text-xs mt-1\">{description}</p>\n      </div>\n    </div>\n  );\n};\n\nexport default ChartEmptyState;\n","import React from 'react';\r\nimport { ChartPeriod } from '../hooks';\r\nimport { useThemeStyles } from '../../contexts/ThemeContext';\r\n\r\ninterface PeriodSelectorProps {\r\n  value: ChartPeriod;\r\n  onChange: (period: ChartPeriod) => void;\r\n}\r\n\r\nconst PeriodSelector: React.FC<PeriodSelectorProps> = ({ value, onChange }) => {\r\n  const { button } = useThemeStyles();\r\n\r\n  const periods: { value: ChartPeriod; label: string }[] = [\r\n    { value: 'week', label: 'Week' },\r\n    { value: 'month', label: 'Month' },\r\n    { value: '90days', label: '90 Days' },\r\n    { value: 'all', label: 'All Time' },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"flex justify-center mb-3\">\r\n      <div className=\"grid grid-cols-4 gap-2 w-full\">\r\n        {periods.map((period) => (\r\n          <button\r\n            key={period.value}\r\n            onClick={() => onChange(period.value)}\r\n            className={`flex-1 px-2 py-2 text-sm rounded-lg transition-all duration-300 ${\r\n              value === period.value\r\n                ? 'bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white shadow-[0_0_15px_rgba(177,156,217,0.4)]'\r\n                : 'bg-[#B19CD9]/10 text-[#B19CD9] border border-[#B19CD9]/30 hover:bg-[#B19CD9]/20 hover:shadow-[0_0_10px_rgba(177,156,217,0.3)]'\r\n            }`}\r\n          >\r\n            {period.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PeriodSelector;\r\n","import { UserProfile } from '../../types';\r\n\r\nexport const calculateBMR = (profile: UserProfile, currentWeight: number): number => {\r\n  const { age, gender, height } = profile;\r\n  const weight = currentWeight;\r\n  \r\n  if (gender === 'male') {\r\n    return (10 * weight) + (6.25 * height) - (5 * age) + 5;\r\n  } else {\r\n    return (10 * weight) + (6.25 * height) - (5 * age) - 161;\r\n  }\r\n};\r\n\r\nexport const calculateTDEE = (bmr: number, activityLevel: number): number => {\r\n  return Math.round(bmr * activityLevel);\r\n};\r\n\r\nexport const calculateWeightLossCalories = (weeklyWeightLossKg: number): number => {\r\n  // 1kg of fat = ~7700 calories\r\n  // Daily calorie deficit needed = (7700 * kg) / 7 days\r\n  return Math.round((7700 * weeklyWeightLossKg) / 7);\r\n};\r\n\r\nexport const calculateWeeklyWeightLoss = (dailyCalorieDeficit: number): number => {\r\n  // Reverse calculation: kg per week from daily deficit\r\n  return (dailyCalorieDeficit * 7) / 7700;\r\n};\r\n\r\nexport const calculateMonthlyWeightLoss = (dailyCalorieDeficit: number): number => {\r\n  // 30 days = ~4.29 weeks\r\n  return ((dailyCalorieDeficit * 30) / 7700);\r\n};\r\n\r\n\r\nexport const calculateMedicationConcentration = (\r\n  doses: Array<{ date: Date; dose: number }>,\r\n  halfLifeHours: number,\r\n  currentDate: Date\r\n): number => {\r\n  const ABSORPTION_HOURS = 24;\r\n  \r\n  return doses.reduce((total, dose) => {\r\n    const hoursElapsed = (currentDate.getTime() - dose.date.getTime()) / (1000 * 60 * 60);\r\n    \r\n    if (hoursElapsed < 0) {\r\n      return total;\r\n    }\r\n    \r\n    let effectFactor: number;\r\n    \r\n    if (hoursElapsed < ABSORPTION_HOURS) {\r\n      const absorptionProgress = hoursElapsed / ABSORPTION_HOURS;\r\n      effectFactor = dose.dose * absorptionProgress;\r\n    } else {\r\n      const decayHours = hoursElapsed - ABSORPTION_HOURS;\r\n      const decayFactor = Math.exp(-0.693 * decayHours / halfLifeHours);\r\n      effectFactor = dose.dose * decayFactor;\r\n    }\r\n    \r\n    return total + effectFactor;\r\n  }, 0);\r\n};\r\n\r\nexport const calculateGLP1Concentration = calculateMedicationConcentration;","/**\n * Utility functions for common operations\n */\n\n/**\n * Debounce function to delay function execution\n * @param func Function to debounce\n * @param delay Delay in milliseconds\n * @returns Debounced function\n */\nexport const debounce = <T extends (...args: any[]) => any>(\n  func: T,\n  delay: number\n): ((...args: Parameters<T>) => void) => {\n  let timeoutId: NodeJS.Timeout;\n  return (...args: Parameters<T>) => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => func(...args), delay);\n  };\n};\n\n/**\n * Check if the device is a mobile device\n * @returns true if mobile device\n */\nexport const isMobile = (): boolean => {\n  if (typeof window === 'undefined') return false;\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth < 768;\n};\n\n/**\n * Get animation duration based on device\n * @returns animation duration in milliseconds\n */\nexport const getAnimationDuration = (): number => {\n  return isMobile() ? 0 : 300;\n};"],"names":["getToday","Date","timeService","now","shortenMedicationName","name","replace","trim","_ref","data","goalWeight","unitSystem","period","medicationData","visibleMedications","externalVisibleMedications","onLegendChange","localVisibleMedications","setLocalVisibleMedications","useState","undefined","sortedData","minWeight","maxWeight","weightPadding","useWeightChartData","chartRef","useRef","firstDataDate","useMemo","length","date","lastDataDate","zoomStart","zoomEnd","visibleStartIndex","visibleEndIndex","totalPoints","useWeightChartDateRange","extendedLastDate","getTime","futureDays","xAxisDates","dates","iter","push","toLocaleDateString","month","day","setDate","getDate","todayStr","todayIndex","indexOf","lastEntry","lastEntryIndex","displayDate","trendLineData","trendPoints","i","start","Math","max","floor","windowSize","end","min","ceil","window","slice","avg","reduce","sum","d","weight","projectionData","recentWeights","avgChangePerDay","lastTrendValue","lastIndex","projectionPoints","futureIndex","futureWeight","doseChanges","sortedMeds","sort","a","b","allMedications","Array","from","Set","map","e","medication","medicationColors","forEach","med","index","getMedicationColor","changes","lastDosePerMed","entry","prevDose","_medicationColors$ent","dose","color","stroke","_medicationColors$ent2","chartOption","dotIndices","dataLength","visibleLength","_","indices","step","round","getDotIndices","doseChangeMarkers","displayDates","shouldShowAll","filter","change","includes","_sortedData$index","changeDate","formattedDate","_sortedData$closestIn","closestIndex","findIndex","closestDate","weightAtDate","value","Boolean","backgroundColor","animation","isMobile","tooltip","trigger","borderColor","borderWidth","borderRadius","padding","extraCssText","textStyle","fontSize","formatter","params","item","formattedWeight","formatWeight","dateIndex","axisValue","actualDate","dateWithYear","concat","getFullYear","trendHtml","trendWeight","formattedTrend","legend","bottom","icon","itemWidth","itemHeight","grid","top","left","right","containLabel","xAxis","type","boundaryGap","axisLine","lineStyle","axisTick","axisLabel","margin","splitLine","show","yAxis","position","scale","series","z","smooth","showSymbol","symbol","width","itemStyle","areaStyle","x","y","x2","y2","colorStops","offset","markLine","silent","label","symbolSize","shadowBlur","shadowColor","convertWeightFromKg","fontWeight","distance","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","_objectSpread","has","m","symbolOffset","_medicationColors$med","find","dataZoom","zoomOnMouseWheel","moveOnMouseWheel","_jsx","ChartEmptyState","title","description","className","children","ReactECharts","ref","option","style","height","opacity","opts","renderer","onEvents","selected","visibleMeds","weights","totalLoss","startWeight","profile","bigCard","bigCardText","smallCard","text","useThemeStyles","_jsxs","textShadow","toFixed","WeightAnalytics","calculateBestWeek","getTimeActive","firstDate","today","nowDate","days","calculateBestMonth","currentWeight","bmr","calculateBMR","tdee","calculateTDEE","activityLevel","weightLoss05","weightLoss1","deficit05Kg","deficit1Kg","loss05KgPerWeek","loss1KgPerWeek","tdeeCard","tdeeText","subtitle","toLocaleString","onAddWeight","lastWeight","useWheelForNumbers","isDarkMode","useTheme","defaultWeight","String","showPicker","setShowPicker","inputValue","setInputValue","handleKeyboardSubmit","weightValue","parseFloat","weightInKg","convertWeightToKg","onClick","onChange","target","onKeyDown","key","placeholder","WeightWheelPickerModal","isOpen","onSave","onClose","decimals","defaultValue","isVisible","setIsVisible","setPosition","buttonRef","useEffect","current","rect","getBoundingClientRect","transform","abbreviation","range","category","_Fragment","onMouseEnter","onMouseLeave","viewBox","fill","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","x1","y1","createPortal","document","body","dosesEntries","chartPeriod","onChartPeriodChange","actualGoalWeight","weightMetrics","useWeightMetrics","lastWeightDisplay","generatedEntries","isManual","BMIInfoTooltip","totalLossValue","display","justifyContent","alignItems","whiteSpace","bmi","bmiCategory","percentage","totalLossPercentage","weeklyAverageLoss","abs","monthlyAverageLoss","PeriodSelector","WeightChart","MedicationChart","WeightInput","PerformanceOverview","TDEEDisplay","medications","dosesByMed","halfLifeByMed","useMedicationChartData","useTime","simulatedNow","useChartDateRange","lastDate","doseDatesByMed","doseAmountByMed","combinedDoseDates","combinedDoseAmounts","dateKey","add","combinedColor","CHART_COLORS","combined","combinedSeries","combinedLineDataBefore","combinedLineDataAfter","combinedDoseData","iterateDate","totalConcentration","calculateMedicationConcentration","dateStr","isNaN","emphasis","triggerLineEvent","showInLegend","disabled","s","lastShownValue","dot","doseValue","shouldShow","formattedDoseValue","visibleDots","dotIndex","lineDataBefore","lineDataAfter","doseData","concentration","flat","markLineConfig","todayLineSeries","generateMedicationSeries","processedParams","p","seriesType","_p$seriesName","seriesName","dedupedParams","seen","nonZeroParams","_p$value$","_p$value","html","_item$value$","_item$value","formattedValue","shortName","_chartRef$current","chart","getEchartsInstance","isSelected","dispatchAction","button","age","gender","doses","halfLifeHours","currentDate","total","hoursElapsed","effectFactor","absorptionProgress","decayHours","decayFactor","exp","test","navigator","userAgent","innerWidth"],"sourceRoot":""}