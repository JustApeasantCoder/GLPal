{"version":3,"file":"static/js/688.7727da63.chunk.js","mappings":"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","sources":["constants/medications.ts","types.ts","features/peptides/components/PeptideModal.tsx","features/peptides/components/LogPeptideModal.tsx","features/peptides/components/PeptideProgressBar.tsx","features/peptides/components/PeptideCard.tsx","features/peptides/components/PeptideChart.tsx","features/peptides/PeptidesTab.tsx","shared/components/DatePicker.tsx","shared/components/CalendarPickerModal.tsx","shared/components/DateWheelPickerModal.tsx","shared/utils/common.ts"],"sourcesContent":["export interface Medication {\n  id: string;\n  name: string;\n  defaultDose: number;\n  halfLifeHours: number;\n  titrationDoses?: number[];\n}\n\nexport const SEMAGLUTIDE_TITRATION = [0.25, 0.5, 1, 1.7, 2.4];\nexport const TIRZEPATIDE_TITRATION = [2.5, 5, 7.5, 10, 12.5, 15];\nexport const RETATRUTIDE_TITRATION = [1, 2, 4, 6, 8, 9, 12];\nexport const CAGRILINTIDE_TITRATION = [0.25, 0.5, 1, 1.5, 2.4];\n\nexport const MEDICATIONS: Medication[] = [\n  { id: 'semaglutide', name: 'Semaglutide (Ozempic/Wegovy)', defaultDose: 0.25, halfLifeHours: 168, titrationDoses: SEMAGLUTIDE_TITRATION },\n  { id: 'tirzepatide', name: 'Tirzepatide (Mounjaro/Zepbound)', defaultDose: 2.5, halfLifeHours: 127, titrationDoses: TIRZEPATIDE_TITRATION },\n  { id: 'retatrutide', name: 'Retatrutide', defaultDose: 1, halfLifeHours: 120, titrationDoses: RETATRUTIDE_TITRATION },\n  { id: 'cagrilintide', name: 'Cagrilintide (Amycretin)', defaultDose: 0.25, halfLifeHours: 168, titrationDoses: CAGRILINTIDE_TITRATION },\n  { id: 'liraglutide', name: 'Liraglutide (Victoza/Saxenda)', defaultDose: 3, halfLifeHours: 13 },\n  { id: 'dulaglutide', name: 'Dulaglutide (Trulicity)', defaultDose: 4.5, halfLifeHours: 108 },\n  { id: 'other', name: 'Custom', defaultDose: 1, halfLifeHours: 120 },\n];\n\nexport const getMedicationById = (id: string): Medication | undefined => {\n  return MEDICATIONS.find(m => m.id === id);\n};\n\nexport const generateId = (): string => {\n  return Math.random().toString(36).substr(2, 9);\n};\n\nexport const formatDate = (dateStr: string): string => {\n  const date = new Date(dateStr);\n  return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\n};\n\nexport const formatDateShort = (dateStr: string): string => {\n  const date = new Date(dateStr);\n  return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n};\n\nexport const formatFrequency = (frequencyPerWeek: number): string => {\n  const scheduleMap: Record<number, string> = {\n    7: 'Everyday',\n    3.5: 'Every 2 days',\n    2.333: 'Every 3 days',\n    2: 'Every 3.5 days',\n    1.75: 'Every 4 days',\n    1.4: 'Every 5 days',\n    1.167: 'Every 6 days',\n    1: 'Weekly',\n    0.5: 'Every 2 weeks',\n    0.333: 'Every 3 weeks',\n    0.233: 'Monthly',\n  };\n  return scheduleMap[frequencyPerWeek] || `${frequencyPerWeek}x/week`;\n};\n","import React from 'react';\n\nexport interface WeightMacros {\n  calories: number;\n  protein: number;\n  carbs: number;\n  fat: number;\n}\n\nexport interface WeightEntry {\n  date: string;\n  weight: number;\n  notes?: string;\n  macros?: WeightMacros;\n}\n\nexport interface SideEffect {\n  name: string;\n  severity: number; // 1-10\n}\n\nexport interface MedicationEntry {\n  date: string;\n  medication: string;\n  dose: number;\n  halfLifeHours: number;\n  isManual?: boolean;\n  time?: string;\n  painLevel?: number;\n  injectionSite?: string;\n  isr?: string;\n  notes?: string;\n  sideEffects?: SideEffect[];\n}\n\nexport interface MedicationProtocol {\n  id: string;\n  medication: string;\n  dose: number;\n  frequencyPerWeek: number;\n  startDate: string;\n  stopDate: string | null;\n  halfLifeHours: number;\n  isArchived?: boolean;\n  phase?: 'titrate' | 'maintenance';\n}\n\nexport type GLP1Entry = MedicationEntry;\nexport type GLP1Protocol = MedicationProtocol;\n\nexport type UnitSystem = 'metric' | 'imperial';\n\nexport interface UserProfile {\n  age: number;\n  gender: 'male' | 'female';\n  height: number; // cm (stored as metric internally)\n  activityLevel: number; // multiplier\n  goalWeight?: number; // kg (stored as metric internally)\n  unitSystem?: UnitSystem; // preferred display units\n  useWheelForNumbers?: boolean;\n  useWheelForDate?: boolean;\n}\n\n// ============================================\n// PEPTIDE TYPES\n// ============================================\n\nexport type PeptideCategory = \n  | 'healing'\n  | 'growth_hormone'\n  | 'fat_loss'\n  | 'muscle'\n  | 'longevity'\n  | 'immune'\n  | 'skin'\n  | 'cognitive'\n  | 'other';\n\nexport type PeptideFrequency = \n  | 'daily'\n  | 'every_other_day'\n  | 'every_3_days'\n  | 'every_35_days'\n  | 'every_4_days'\n  | 'every_5_days'\n  | 'every_6_days'\n  | 'weekly'\n  | 'twice_week'\n  | 'biweekly'\n  | 'triweekly'\n  | 'monthly'\n  | 'as_needed';\n\nexport type InjectionRoute = \n  | 'subcutaneous'\n  | 'intramuscular'\n  | 'intravenous'\n  | 'oral'\n  | 'topical'\n  | 'intranasal'\n  | 'sublingual';\n\nexport type DoseUnit = 'mg' | 'mcg' | 'iu' | 'ml';\n\nexport interface PeptideCycle {\n  id: string;\n  name: string;\n  startDate: string;\n  endDate: string | null;\n  isActive: boolean;\n}\n\nexport interface Peptide {\n  id: string;\n  name: string;\n  category: PeptideCategory;\n  dose: number;\n  doseUnit: DoseUnit;\n  frequency: PeptideFrequency;\n  preferredTime: string; // HH:mm format, e.g., \"08:00\"\n  route: InjectionRoute;\n  startDate: string;\n  endDate: string | null;\n  halfLifeHours: number;\n  notes: string;\n  color: string;\n  isActive: boolean;\n  isArchived: boolean;\n  createdAt: string;\n  updatedAt: string;\n  cycles: PeptideCycle[];\n}\n\nexport interface PeptideLogEntry {\n  id: string;\n  peptideId: string;\n  date: string;\n  time: string;\n  dose: number;\n  doseUnit: DoseUnit;\n  route: InjectionRoute;\n  injectionSite: string;\n  painLevel: number | null;\n  notes: string;\n  createdAt: string;\n}\n\n// Common peptide presets for quick selection\nexport interface PeptidePreset {\n  name: string;\n  category: PeptideCategory;\n  defaultDose: number;\n  defaultDoseUnit: DoseUnit;\n  defaultFrequency: PeptideFrequency;\n  defaultPreferredTime?: string; // HH:mm format\n  defaultRoute: InjectionRoute;\n  halfLifeHours: number;\n  description: string;\n}\n\nexport const PEPTIDE_PRESETS: PeptidePreset[] = [\n  // Healing peptides\n  { name: 'BPC-157', category: 'healing', defaultDose: 0.5, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 4, description: 'Body Protection Compound - promotes healing' },\n  { name: 'TB-500', category: 'healing', defaultDose: 2, defaultDoseUnit: 'mg', defaultFrequency: 'twice_week', defaultRoute: 'subcutaneous', halfLifeHours: 24, description: 'Thymosin Beta-4 - tissue repair' },\n  { name: 'TB-500 / BPC-157 Stack', category: 'healing', defaultDose: 2, defaultDoseUnit: 'mg', defaultFrequency: 'twice_week', defaultRoute: 'subcutaneous', halfLifeHours: 24, description: 'Combined healing protocol' },\n  { name: 'KPV', category: 'healing', defaultDose: 0.3, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 2, description: 'Tripeptide - anti-inflammatory' },\n  { name: 'PEG-MGF', category: 'healing', defaultDose: 0.2, defaultDoseUnit: 'mg', defaultFrequency: 'every_other_day', defaultRoute: 'subcutaneous', halfLifeHours: 6, description: ' mechano Growth Factor - muscle repair' },\n  \n  // Growth Hormone peptides\n  { name: 'CJC-1295', category: 'growth_hormone', defaultDose: 0.1, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 168, description: 'GHRH analog - increases GH' },\n  { name: 'CJC-1295 + Ipamorelin', category: 'growth_hormone', defaultDose: 0.1, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 168, description: 'GHRH + GHRP stack' },\n  { name: 'Ipamorelin', category: 'growth_hormone', defaultDose: 0.2, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 2, description: 'GHRP - growth hormone secretagogue' },\n  { name: 'Tesamorelin', category: 'growth_hormone', defaultDose: 2, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 2, description: 'GHRH analog - increases GH and IGF-1' },\n  { name: ' Sermorelin', category: 'growth_hormone', defaultDose: 0.3, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 12, description: 'GHRH analog' },\n  { name: 'GHRP-2', category: 'growth_hormone', defaultDose: 0.1, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 0.5, description: 'GHRP - appetite boost' },\n  { name: 'GHRP-6', category: 'growth_hormone', defaultDose: 0.1, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 1.5, description: 'GHRP - strong appetite boost' },\n  \n  // Fat loss peptides\n  { name: 'AOD-9604', category: 'fat_loss', defaultDose: 0.3, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 3, description: 'HGH fragment - fat oxidation' },\n  { name: 'Melanotan II', category: 'fat_loss', defaultDose: 1, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 12, description: 'Melanocortin analog - tan + appetite suppression' },\n  { name: 'PT-141', category: 'fat_loss', defaultDose: 2, defaultDoseUnit: 'mg', defaultFrequency: 'as_needed', defaultRoute: 'subcutaneous', halfLifeHours: 8, description: 'Melanocortin - appetite suppression' },\n  { name: '5-Amino-1MQ', category: 'fat_loss', defaultDose: 50, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 6, description: 'NNMT inhibitor - fat loss' },\n  \n  // Muscle building peptides\n  { name: 'S-23', category: 'muscle', defaultDose: 10, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'oral', halfLifeHours: 12, description: 'SARM - muscle building' },\n  { name: 'LGD-4033', category: 'muscle', defaultDose: 10, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'oral', halfLifeHours: 24, description: 'SARM - muscle building' },\n  { name: 'RAD-140', category: 'muscle', defaultDose: 10, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'oral', halfLifeHours: 16, description: 'SARM - muscle building' },\n  { name: 'MK-677', category: 'muscle', defaultDose: 25, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'oral', halfLifeHours: 24, description: 'Ibutamoren - GH secretagogue' },\n  \n  // Longevity peptides\n  { name: 'Epithalon', category: 'longevity', defaultDose: 10, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 1, description: 'Telomerase activator' },\n  { name: 'FOXO3-DT', category: 'longevity', defaultDose: 10, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 6, description: 'FOXO3 gene activator' },\n  { name: 'NAD+', category: 'longevity', defaultDose: 500, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 4, description: 'Nicotinamide riboside - cellular energy' },\n  { name: 'NMN', category: 'longevity', defaultDose: 500, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'sublingual', halfLifeHours: 3, description: 'NAD+ precursor' },\n  \n  // Immune peptides\n  { name: 'Thymosin Beta-4', category: 'immune', defaultDose: 2, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 24, description: 'Immune modulation' },\n  { name: 'LL-37', category: 'immune', defaultDose: 1, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 2, description: 'Cathelicidin - antimicrobial' },\n  \n  // Skin peptides\n  { name: 'GHK-Cu', category: 'skin', defaultDose: 2, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'topical', halfLifeHours: 1, description: 'Copper peptide - skin healing' },\n  { name: 'Matrixyl', category: 'skin', defaultDose: 10, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'topical', halfLifeHours: 1, description: 'Collagen stimulator' },\n  \n  // Cognitive peptides\n  { name: 'Selank', category: 'cognitive', defaultDose: 0.3, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'intranasal', halfLifeHours: 2, description: 'Nootropic - anxiety reduction' },\n  { name: 'Noopept', category: 'cognitive', defaultDose: 10, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'sublingual', halfLifeHours: 12, description: 'Nootropic - cognitive enhancement' },\n  { name: 'Dihexa', category: 'cognitive', defaultDose: 15, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'oral', halfLifeHours: 12, description: 'Cognitive enhancer - neuroprotective' },\n  { name: 'Semax', category: 'cognitive', defaultDose: 0.9, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'intranasal', halfLifeHours: 1, description: 'ACTH analog - cognitive & immune boost' },\n  \n  // Additional Growth Hormone peptides\n  { name: 'GLOW', category: 'growth_hormone', defaultDose: 0.3, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 2, description: 'GHRP-2 + GHRP-6 hybrid - strong GH release' },\n  { name: 'KLOW', category: 'growth_hormone', defaultDose: 1, defaultDoseUnit: 'mg', defaultFrequency: 'weekly', defaultRoute: 'subcutaneous', halfLifeHours: 168, description: 'CJC-1295 DAC - sustained GH release' },\n  { name: 'Hexarelin', category: 'growth_hormone', defaultDose: 0.2, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 3, description: 'GHRP - strongest GH release' },\n  { name: 'GHRP-3', category: 'growth_hormone', defaultDose: 0.1, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 0.5, description: 'GHRP - moderate GH release' },\n  \n  // Additional healing peptides\n  { name: 'Heparin', category: 'healing', defaultDose: 50, defaultDoseUnit: 'iu', defaultFrequency: 'daily', defaultRoute: 'subcutaneous', halfLifeHours: 1, description: 'Wound healing enhancement' },\n  \n  // Additional fat loss peptides\n  { name: 'Tesofensine', category: 'fat_loss', defaultDose: 0.5, defaultDoseUnit: 'mg', defaultFrequency: 'daily', defaultRoute: 'oral', halfLifeHours: 200, description: 'Triple monoamine reuptake inhibitor' },\n];","import React, { useState, useEffect } from 'react';\nimport { Peptide, PEPTIDE_PRESETS, PeptideCategory, PeptideFrequency, InjectionRoute, PeptideCycle } from '../../../types';\nimport { generateId } from '../../../constants/medications';\nimport DateWheelPickerModal from '../../../shared/components/DateWheelPickerModal';\nimport CalendarPickerModal from '../../../shared/components/CalendarPickerModal';\nimport BottomSheetModal from '../../../shared/components/BottomSheetModal';\nimport { timeService } from '../../../core/timeService';\nimport { useTheme } from '../../../contexts/ThemeContext';\n\ninterface PeptideModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (peptide: Peptide) => void;\n  editPeptide?: Peptide | null;\n  useWheelForDate?: boolean;\n}\n\nconst CATEGORY_COLORS: Record<PeptideCategory, string> = {\n  healing: '#EF4444',\n  growth_hormone: '#F59E0B',\n  fat_loss: '#10B981',\n  muscle: '#3B82F6',\n  longevity: '#8B5CF6',\n  immune: '#EC4899',\n  skin: '#F472B6',\n  cognitive: '#06B6D4',\n  other: '#6B7280',\n};\n\nconst CATEGORY_LABELS: Record<PeptideCategory, string> = {\n  healing: 'Healing',\n  growth_hormone: 'GH',\n  fat_loss: 'Fat Loss',\n  muscle: 'Muscle',\n  longevity: 'Longevity',\n  immune: 'Immune',\n  skin: 'Skin',\n  cognitive: 'Cognitive',\n  other: 'Other',\n};\n\nconst FREQUENCY_LABELS: Record<PeptideFrequency, string> = {\n  daily: 'Everyday',\n  every_other_day: 'Every 2 Days',\n  every_3_days: 'Every 3 Days',\n  every_35_days: 'Every 3.5 Days',\n  every_4_days: 'Every 4 Days',\n  every_5_days: 'Every 5 Days',\n  every_6_days: 'Every 6 Days',\n  weekly: 'Every Week',\n  twice_week: '2x / Week',\n  biweekly: 'Every 2 Weeks',\n  triweekly: 'Every 3 Weeks',\n  monthly: 'Every Month',\n  as_needed: 'As Needed',\n};\n\nconst ROUTE_LABELS: Record<InjectionRoute, string> = {\n  subcutaneous: 'Subcutaneous (SQ)',\n  intramuscular: 'Intramuscular (IM)',\n  intravenous: 'IV',\n  oral: 'Oral',\n  topical: 'Topical',\n  intranasal: 'Intranasal',\n  sublingual: 'Sublingual',\n};\n\nconst getTodayString = () => timeService.todayString();\n\nconst PeptideModal: React.FC<PeptideModalProps> = ({ isOpen, onClose, onSave, editPeptide, useWheelForDate = true }) => {\n  const { isDarkMode } = useTheme();\n  const [name, setName] = useState('');\n  const [category, setCategory] = useState<PeptideCategory>('other');\n  const [dose, setDose] = useState('');\n  const [frequency, setFrequency] = useState<PeptideFrequency>('daily');\n  const [preferredTime, setPreferredTime] = useState('08:00');\n  const [route, setRoute] = useState<InjectionRoute>('subcutaneous');\n  const [startDate, setStartDate] = useState(getTodayString());\n  const [endDate, setEndDate] = useState<string | null>(null);\n  const [notes, setNotes] = useState('');\n  const [color, setColor] = useState(CATEGORY_COLORS.other);\n  const [showDatePicker, setShowDatePicker] = useState(false);\n  const [datePickerType, setDatePickerType] = useState<'start' | 'end'>('start');\n  const [showPresets, setShowPresets] = useState(true);\n  const [isVisible, setIsVisible] = useState(false);\n  const [isClosing, setIsClosing] = useState(false);\n  const [showFrequencyPicker, setShowFrequencyPicker] = useState(false);\n  const [showRoutePicker, setShowRoutePicker] = useState(false);\n  const [contentKey, setContentKey] = useState(0);\n\n  useEffect(() => {\n    if (isOpen) {\n      if (editPeptide) {\n        setName(editPeptide.name);\n        setCategory(editPeptide.category);\n        setDose(editPeptide.dose.toString());\n        setFrequency(editPeptide.frequency);\n        setPreferredTime(editPeptide.preferredTime || '08:00');\n        setRoute(editPeptide.route);\n        setStartDate(editPeptide.startDate);\n        setEndDate(editPeptide.endDate);\n        setNotes(editPeptide.notes);\n        setColor(editPeptide.color);\n        setShowPresets(false);\n      } else {\n        setName('');\n        setCategory('other');\n        setDose('');\n        setFrequency('daily');\n        setPreferredTime('08:00');\n        setRoute('subcutaneous');\n        setStartDate(getTodayString());\n        setEndDate(null);\n        setNotes('');\n        setColor(CATEGORY_COLORS.other);\n        setShowPresets(true);\n      }\n    }\n  }, [isOpen, editPeptide]);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsVisible(true);\n      setIsClosing(false);\n    }\n  }, [isOpen]);\n\n  const handleClose = () => {\n    if (isClosing) return;\n    setIsClosing(true);\n    document.body.classList.remove('modal-open');\n    const timer = setTimeout(() => {\n      setIsVisible(false);\n      setIsClosing(false);\n      onClose();\n    }, 200);\n    return () => clearTimeout(timer);\n  };\n\n  if (!isVisible) return null;\n\n  const handlePresetSelect = (preset: typeof PEPTIDE_PRESETS[0]) => {\n    setName(preset.name);\n    setCategory(preset.category);\n    setDose(preset.defaultDose.toString());\n    setFrequency(preset.defaultFrequency);\n    setPreferredTime(preset.defaultPreferredTime || '08:00');\n    setRoute(preset.defaultRoute);\n    setColor(CATEGORY_COLORS[preset.category]);\n    setShowPresets(false);\n    setContentKey(prev => prev + 1);\n  };\n\n  const handleCategoryChange = (cat: PeptideCategory) => {\n    setCategory(cat);\n    setColor(CATEGORY_COLORS[cat]);\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    const doseValue = parseFloat(dose);\n\n    if (!name.trim()) return;\n\n    const peptide: Peptide = {\n      id: editPeptide?.id || generateId(),\n      name: name.trim(),\n      category,\n      dose: doseValue,\n      doseUnit: 'mg',\n      frequency,\n      preferredTime,\n      route,\n      startDate,\n      endDate,\n      halfLifeHours: 0,\n      notes,\n      color,\n      isActive: true,\n      isArchived: editPeptide?.isArchived || false,\n      createdAt: editPeptide?.createdAt || new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n      cycles: editPeptide?.cycles || [],\n    };\n\n    onSave(peptide);\n    handleClose();\n  };\n\n  const openDatePicker = (type: 'start' | 'end') => {\n    setDatePickerType(type);\n    setShowDatePicker(true);\n  };\n\n  return (\n    <>\n      <div className=\"fixed inset-0 z-[9999] flex items-center justify-center p-2 sm:p-4\">\n        <div \n          className={`fixed inset-0 bg-black/60 ${\n            isClosing ? 'backdrop-fade-out' : 'backdrop-fade-in'\n          }`}\n          style={{ backdropFilter: 'blur(8px)' }}\n          onClick={handleClose} \n        />\n        <div \n          className={`relative w-full max-w-sm max-h-[90vh] rounded-2xl shadow-2xl border overflow-hidden flex flex-col ${\n            isDarkMode \n              ? 'border-[#B19CD9]/30 bg-gradient-to-b from-[#1a1625]/95 to-[#0d0a15]/95'\n              : 'border-gray-200 bg-white'\n          } ${\n            isClosing ? 'modal-fade-out' : 'modal-content-fade-in'\n          }`}\n          style={isDarkMode ? { boxShadow: '0 0 30px rgba(177, 156, 217, 0.3)' } : {}}\n        >\n          {/* Header */}\n          <div className={`flex items-center justify-between p-3 sm:p-4 border-b ${\n            isDarkMode ? 'border-[#B19CD9]/20' : 'border-gray-200'\n          }`}>\n            <h2 className={`text-base sm:text-lg font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n              {editPeptide ? 'Edit Peptide' : 'Add Peptide'}\n            </h2>\n            <button\n              onClick={handleClose}\n              className={`p-1.5 rounded-lg transition-colors ${\n                isDarkMode ? 'text-gray-400 hover:text-white hover:bg-white/10' : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'\n              }`}\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M18 6M6 18M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n\n          {/* Content */}\n          {/* Use a reliable fade-in animation when content switches (presets -> form) */}\n          <div key={contentKey} className=\"flex-1 overflow-y-auto p-4 space-y-4 tab-fade-in\">\n            {showPresets && !editPeptide ? (\n              <div className=\"space-y-3\">\n                <p className={`text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Quick select a peptide preset:</p>\n                <div className=\"grid grid-cols-1 gap-2 max-h-64 overflow-y-auto\">\n                  {PEPTIDE_PRESETS.map((preset) => (\n                    <button\n                      key={preset.name}\n                      onClick={() => handlePresetSelect(preset)}\n                      className={`flex items-center gap-3 p-3 rounded-xl border transition-all text-left ${\n                        isDarkMode\n                          ? 'bg-white/5 hover:bg-white/10 border-[#B19CD9]/20 hover:border-[#B19CD9]/40'\n                          : 'bg-gray-50 hover:bg-gray-100 border-gray-200 hover:border-gray-300'\n                      }`}\n                    >\n                      <div \n                        className=\"w-3 h-3 rounded-full flex-shrink-0\"\n                        style={{ backgroundColor: CATEGORY_COLORS[preset.category] }}\n                      />\n                      <div className=\"flex-1 min-w-0\">\n                        <p className={`text-sm font-medium truncate ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>{preset.name}</p>\n                        <p className={`text-xs truncate ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>{preset.description}</p>\n                      </div>\n                      <span className={`text-xs ${isDarkMode ? 'text-gray-500' : 'text-gray-400'}`}>{preset.defaultDose}{preset.defaultDoseUnit}</span>\n                    </button>\n                  ))}\n                </div>\n                <button\n                  onClick={handleClose}\n                  className={`w-full py-2 text-sm transition-colors ${\n                    isDarkMode ? 'text-gray-500 hover:text-white' : 'text-gray-400 hover:text-gray-900'\n                  }`}\n                >\n                  Cancel\n                </button>\n              </div>\n            ) : (\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                {/* Name */}\n                <div>\n                  <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Peptide Name</label>\n                  <input\n                    type=\"text\"\n                    value={name}\n                    onChange={(e) => setName(e.target.value)}\n                    placeholder=\"e.g., BPC-157\"\n                    className={`w-full px-3 py-2 rounded-lg border text-sm focus:outline-none focus:border-[#B19CD9]/50 ${\n                      isDarkMode\n                        ? 'bg-black/20 border-[#B19CD9]/30 text-[#B19CD9] placeholder-gray-500'\n                        : 'bg-white border-gray-300 text-gray-900 placeholder-gray-400'\n                    }`}\n                    required\n                  />\n                </div>\n\n                {/* Category */}\n                <div>\n                  <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Category</label>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {(Object.keys(CATEGORY_COLORS) as PeptideCategory[]).map((cat) => (\n                      <button\n                        key={cat}\n                        type=\"button\"\n                        onClick={() => handleCategoryChange(cat)}\n                        className={`flex-1 min-w-[70px] px-2 py-2 rounded-lg text-xs font-medium transition-all ${\n                        category === cat \n                            ? 'text-white shadow-[0_0_10px_rgba(177,156,217,0.4)]' \n                            : isDarkMode\n                              ? 'bg-black/20 border border-[#B19CD9]/30 text-gray-400 hover:bg-[#B19CD9]/20 hover:border-[#B19CD9]/50'\n                              : 'bg-white border border-gray-300 text-gray-600 hover:bg-gray-100'\n                        }`}\n                        style={{ \n                          borderColor: category === cat ? CATEGORY_COLORS[cat] : 'transparent',\n                          borderWidth: '2px',\n                          background: category === cat \n                            ? `linear-gradient(to right, ${CATEGORY_COLORS[cat]}, ${CATEGORY_COLORS[cat]}80)`\n                            : undefined\n                        }}\n                      >\n                        {CATEGORY_LABELS[cat]}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Dose & Frequency */}\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <div>\n                    <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Dose (mg)</label>\n                    <input\n                      type=\"number\"\n                      value={dose}\n                      onChange={(e) => setDose(e.target.value)}\n                      placeholder=\"0.5\"\n                      step=\"0.1\"\n                      className={`w-full px-3 py-2 rounded-lg border text-sm focus:outline-none focus:border-[#B19CD9]/50 ${\n                        isDarkMode\n                          ? 'bg-black/20 border-[#B19CD9]/30 text-[#B19CD9] placeholder-gray-500'\n                          : 'bg-white border-gray-300 text-gray-900 placeholder-gray-400'\n                      }`}\n                      required\n                    />\n                  </div>\n                  <div>\n                    <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Dosing Schedule</label>\n                    <button\n                      type=\"button\"\n                      onClick={(e) => { e.preventDefault(); setShowFrequencyPicker(true); }}\n                      className={`w-full px-3 py-2 rounded-lg border text-left flex items-center justify-between text-sm ${\n                        isDarkMode\n                          ? 'bg-black/20 border-[#B19CD9]/30 text-[#B19CD9]'\n                          : 'bg-white border-gray-300 text-gray-900'\n                      }`}\n                    >\n                      <span>{FREQUENCY_LABELS[frequency]}</span>\n                      <svg className=\"w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n\n                {/* Preferred Time */}\n                <div>\n                  <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Preferred Time</label>\n                  <input\n                    type=\"time\"\n                    value={preferredTime}\n                    onChange={(e) => setPreferredTime(e.target.value)}\n                    className={`w-full px-3 py-2 rounded-lg border text-sm focus:outline-none focus:border-[#B19CD9]/50 ${\n                      isDarkMode\n                        ? 'bg-black/20 border-[#B19CD9]/30 text-[#B19CD9]'\n                        : 'bg-white border-gray-300 text-gray-900'\n                    }`}\n                  />\n                  <p className={`text-xs mt-1 ${isDarkMode ? 'text-gray-500' : 'text-gray-400'}`}>\n                    You'll be reminded around this time\n                  </p>\n                </div>\n\n                {/* Route */}\n                <div>\n                  <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Injection Route</label>\n                  <button\n                    type=\"button\"\n                    onClick={(e) => { e.preventDefault(); setShowRoutePicker(true); }}\n                    className={`w-full px-3 py-2 rounded-lg border text-left flex items-center justify-between text-sm ${\n                      isDarkMode\n                        ? 'bg-black/20 border-[#B19CD9]/30 text-[#B19CD9]'\n                        : 'bg-white border-gray-300 text-gray-900'\n                    }`}\n                  >\n                    <span>{ROUTE_LABELS[route]}</span>\n                    <svg className=\"w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </button>\n                </div>\n\n                {/* Dates */}\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <div>\n                    <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Start Date</label>\n                    <button\n                      type=\"button\"\n                      onClick={() => openDatePicker('start')}\n                      className={`w-full px-3 py-2 rounded-lg border text-left text-sm ${\n                        isDarkMode\n                          ? 'bg-black/20 border-[#B19CD9]/30 text-[#B19CD9]'\n                          : 'bg-white border-gray-300 text-gray-900'\n                      }`}\n                    >\n                      {startDate}\n                    </button>\n                  </div>\n                  <div>\n                    <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>End Date (optional)</label>\n                    <button\n                      type=\"button\"\n                      onClick={() => openDatePicker('end')}\n                      className={`w-full px-3 py-2 rounded-lg border text-left text-sm ${\n                        isDarkMode\n                          ? 'bg-black/20 border-[#B19CD9]/30 text-[#B19CD9]'\n                          : 'bg-white border-gray-300 text-gray-900'\n                      }`}\n                    >\n                      {endDate || 'Ongoing'}\n                    </button>\n                  </div>\n                </div>\n\n                {/* Notes */}\n                <div>\n                  <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Notes</label>\n                  <textarea\n                    value={notes}\n                    onChange={(e) => setNotes(e.target.value)}\n                    placeholder=\"Any additional notes...\"\n                    rows={2}\n                    className={`w-full px-3 py-2 rounded-lg border text-sm focus:outline-none focus:border-[#B19CD9]/50 resize-none ${\n                      isDarkMode\n                        ? 'bg-black/20 border-[#B19CD9]/30 text-[#B19CD9] placeholder-gray-500'\n                        : 'bg-white border-gray-300 text-gray-900 placeholder-gray-400'\n                    }`}\n                  />\n                </div>\n\n                {/* Color */}\n                <div>\n                  <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Color</label>\n                  <div className=\"flex gap-2\">\n                    {Object.values(CATEGORY_COLORS).map((c) => (\n                      <button\n                        key={c}\n                        type=\"button\"\n                        onClick={() => setColor(c)}\n                        className={`w-8 h-8 rounded-full transition-transform ${color === c ? 'scale-110 ring-2 ring-white' : 'hover:scale-105'}`}\n                        style={{ backgroundColor: c }}\n                      />\n                    ))}\n                  </div>\n                </div>\n              </form>\n            )}\n          </div>\n\n          {/* Footer */}\n          {!showPresets && (\n            <div className={`p-3 sm:p-4 border-t flex gap-2 ${\n              isDarkMode ? 'border-[#B19CD9]/20' : 'border-gray-200'\n            }`}>\n              <button\n                onClick={handleClose}\n                className={`flex-1 py-2.5 sm:py-3 rounded-xl border font-medium transition-all ${\n                  isDarkMode\n                    ? 'border-[#B19CD9]/40 text-white/80 hover:text-white hover:bg-white/10'\n                    : 'border-gray-300 text-gray-700 hover:bg-gray-100'\n                }`}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSubmit}\n                className=\"flex-1 py-2.5 sm:py-3 rounded-xl bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white font-semibold hover:shadow-[0_0_20px_rgba(177,156,217,0.5)] transition-all\"\n              >\n                {editPeptide ? 'Update' : 'Add Peptide'}\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {showDatePicker && (\n        useWheelForDate ? (\n          <DateWheelPickerModal\n            isOpen={showDatePicker}\n            value={datePickerType === 'start' ? startDate : (endDate || getTodayString())}\n            onChange={(date) => {\n              if (datePickerType === 'start') {\n                setStartDate(date);\n              } else {\n                setEndDate(date);\n              }\n              setShowDatePicker(false);\n            }}\n            onClose={() => setShowDatePicker(false)}\n          />\n        ) : (\n          <CalendarPickerModal\n            isOpen={showDatePicker}\n            value={datePickerType === 'start' ? startDate : (endDate || getTodayString())}\n            onChange={(date) => {\n              if (datePickerType === 'start') {\n                setStartDate(date);\n              } else {\n                setEndDate(date);\n              }\n              setShowDatePicker(false);\n            }}\n            onClose={() => setShowDatePicker(false)}\n          />\n        )\n      )}\n\n      {showFrequencyPicker && (\n        <BottomSheetModal\n          isOpen={showFrequencyPicker}\n          title=\"Select Dosing Schedule\"\n          options={Object.entries(FREQUENCY_LABELS).map(([value, label]) => ({ value, label }))}\n          value={frequency}\n          onSelect={(val) => {\n            setFrequency(val as PeptideFrequency);\n            setShowFrequencyPicker(false);\n          }}\n          onClose={() => setShowFrequencyPicker(false)}\n        />\n      )}\n\n      {showRoutePicker && (\n        <BottomSheetModal\n          isOpen={showRoutePicker}\n          title=\"Select Route\"\n          options={Object.entries(ROUTE_LABELS).map(([value, label]) => ({ value, label }))}\n          value={route}\n          onSelect={(val) => {\n            setRoute(val as InjectionRoute);\n            setShowRoutePicker(false);\n          }}\n          onClose={() => setShowRoutePicker(false)}\n        />\n      )}\n    </>\n  );\n};\n\nexport default PeptideModal;\n","import React, { useState, useEffect } from 'react';\nimport { Peptide, PeptideLogEntry, InjectionRoute } from '../../../types';\nimport { generateId } from '../../../constants/medications';\nimport DateWheelPickerModal from '../../../shared/components/DateWheelPickerModal';\nimport CalendarPickerModal from '../../../shared/components/CalendarPickerModal';\nimport BottomSheetModal from '../../../shared/components/BottomSheetModal';\nimport { timeService } from '../../../core/timeService';\nimport { useTheme } from '../../../contexts/ThemeContext';\n\ninterface LogPeptideModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave: (log: PeptideLogEntry) => void;\n  peptide: Peptide | null;\n  useWheelForDate?: boolean;\n}\n\nconst INJECTION_SITES = [\n  'Left Arm',\n  'Right Arm', \n  'Left Thigh',\n  'Right Thigh',\n  'Left Stomach',\n  'Right Stomach',\n  'Left Hip',\n  'Right Hip',\n  'Buttock',\n];\n\nconst ROUTE_LABELS: Record<InjectionRoute, string> = {\n  subcutaneous: 'Subcutaneous (SQ)',\n  intramuscular: 'Intramuscular (IM)',\n  intravenous: 'IV',\n  oral: 'Oral',\n  topical: 'Topical',\n  intranasal: 'Intranasal',\n  sublingual: 'Sublingual',\n};\n\nconst getTodayString = () => timeService.todayString();\n\nconst LogPeptideModal: React.FC<LogPeptideModalProps> = ({ isOpen, onClose, onSave, peptide, useWheelForDate = true }) => {\n  const { isDarkMode } = useTheme();\n  const [date, setDate] = useState(getTodayString());\n  const [time, setTime] = useState(() => {\n    const now = timeService.nowDate();\n    return `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;\n  });\n  const [dose, setDose] = useState('');\n  const [route, setRoute] = useState<InjectionRoute>('subcutaneous');\n  const [injectionSite, setInjectionSite] = useState('Left Stomach');\n  const [painLevel, setPainLevel] = useState<number | null>(null);\n  const [notes, setNotes] = useState('');\n  const [showDatePicker, setShowDatePicker] = useState(false);\n  const [isVisible, setIsVisible] = useState(false);\n  const [isClosing, setIsClosing] = useState(false);\n  const [showRoutePicker, setShowRoutePicker] = useState(false);\n\n  useEffect(() => {\n    if (isOpen && peptide) {\n      setDose(peptide.dose.toString());\n      setRoute(peptide.route);\n      setDate(getTodayString());\n      const now = timeService.nowDate();\n      setTime(`${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`);\n      setPainLevel(null);\n      setNotes('');\n    }\n  }, [isOpen, peptide]);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsVisible(true);\n      setIsClosing(false);\n    }\n  }, [isOpen]);\n\n  const handleClose = () => {\n    if (isClosing) return;\n    setIsClosing(true);\n    document.body.classList.remove('modal-open');\n    const timer = setTimeout(() => {\n      setIsVisible(false);\n      setIsClosing(false);\n      onClose();\n    }, 200);\n    return () => clearTimeout(timer);\n  };\n\n  if (!isVisible || !peptide) return null;\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    const doseValue = parseFloat(dose);\n    if (!doseValue || doseValue <= 0) return;\n\n    const log: PeptideLogEntry = {\n      id: generateId(),\n      peptideId: peptide.id,\n      date,\n      time,\n      dose: doseValue,\n      doseUnit: 'mg',\n      route,\n      injectionSite,\n      painLevel,\n      notes,\n      createdAt: new Date().toISOString(),\n    };\n\n    onSave(log);\n    handleClose();\n  };\n\n  return (\n    <>\n      <div className=\"fixed inset-0 z-[9999] flex items-center justify-center p-2 sm:p-4\">\n        <div \n          className={`fixed inset-0 bg-black/60 ${\n            isClosing ? 'backdrop-fade-out' : 'backdrop-fade-in'\n          }`}\n          style={{ backdropFilter: 'blur(8px)' }}\n          onClick={handleClose} \n        />\n        <div \n          className={`relative w-full max-w-sm max-h-[98vh] sm:max-h-[95vh] rounded-2xl shadow-2xl border overflow-hidden flex flex-col ${\n            isDarkMode \n              ? 'border-[#4ADEA8]/30 bg-gradient-to-b from-[#1a1625]/95 to-[#0d0a15]/95'\n              : 'border-gray-200 bg-white'\n          } ${\n            isClosing ? 'modal-fade-out' : 'modal-content-fade-in'\n          }`}\n          style={isDarkMode ? { boxShadow: '0 0 30px rgba(74, 222, 168, 0.3)' } : {}}\n        >\n          {/* Header */}\n          <div className={`flex items-center justify-between p-3 sm:p-4 border-b ${\n            isDarkMode ? 'border-[#4ADEA8]/20' : 'border-gray-200'\n          }`}>\n            <div className=\"flex items-center gap-2 sm:gap-3\">\n              <div \n                className=\"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full\"\n                style={{ backgroundColor: peptide.color }}\n              />\n              <h2 className={`text-base sm:text-lg font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                Log {peptide.name}\n              </h2>\n            </div>\n            <button\n              onClick={handleClose}\n              className={`p-1.5 rounded-lg transition-colors ${\n                isDarkMode ? 'text-gray-400 hover:text-white hover:bg-white/10' : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'\n              }`}\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M18 6M6 18M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n\n          {/* Content */}\n          <form onSubmit={handleSubmit} className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n            {/* Date & Time */}\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div>\n                <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Date</label>\n                <button\n                  type=\"button\"\n                  onClick={() => setShowDatePicker(true)}\n                  className={`w-full px-3 py-2 rounded-lg border text-left ${\n                    isDarkMode\n                      ? 'bg-white/10 border-[#4ADEA8]/20 text-white'\n                      : 'bg-white border-gray-300 text-gray-900'\n                  }`}\n                >\n                  {date}\n                </button>\n              </div>\n              <div>\n                <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Time</label>\n                <input\n                  type=\"time\"\n                  value={time}\n                  onChange={(e) => setTime(e.target.value)}\n                  className={`w-full px-3 py-2 rounded-lg border focus:outline-none focus:border-[#4ADEA8]/50 ${\n                    isDarkMode\n                      ? 'bg-white/10 border-[#4ADEA8]/20 text-white'\n                      : 'bg-white border-gray-300 text-gray-900'\n                  }`}\n                />\n              </div>\n            </div>\n\n            {/* Dose */}\n            <div>\n              <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Dose (mg)</label>\n              <input\n                type=\"number\"\n                value={dose}\n                onChange={(e) => setDose(e.target.value)}\n                placeholder={peptide.dose.toString()}\n                step=\"0.1\"\n                className={`w-full px-3 py-2 rounded-lg border focus:outline-none focus:border-[#4ADEA8]/50 ${\n                  isDarkMode\n                    ? 'bg-white/10 border-[#4ADEA8]/20 text-white placeholder-gray-500'\n                    : 'bg-white border-gray-300 text-gray-900 placeholder-gray-400'\n                }`}\n                required\n              />\n            </div>\n\n            {/* Route */}\n            <div>\n              <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Route</label>\n              <button\n                type=\"button\"\n                onClick={(e) => { e.preventDefault(); setShowRoutePicker(true); }}\n                className={`w-full px-3 py-2 rounded-lg border text-left flex items-center justify-between ${\n                  isDarkMode\n                    ? 'bg-white/10 border-[#4ADEA8]/20 text-white'\n                    : 'bg-white border-gray-300 text-gray-900'\n                }`}\n              >\n                <span>{ROUTE_LABELS[route]}</span>\n                <svg className=\"w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                </svg>\n              </button>\n            </div>\n\n            {/* Injection Site */}\n            {['subcutaneous', 'intramuscular'].includes(route) && (\n              <div>\n                <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Injection Site</label>\n                <div className=\"grid grid-cols-3 gap-2\">\n                  {INJECTION_SITES.map((site) => (\n                    <button\n                      key={site}\n                      type=\"button\"\n                      onClick={() => setInjectionSite(site)}\n                      className={`px-2 py-2 rounded-lg text-xs font-medium transition-all ${\n                        injectionSite === site \n                          ? 'bg-[#4ADEA8]/20 text-[#4ADEA8] border border-[#4ADEA8]/50' \n                          : isDarkMode\n                            ? 'bg-white/5 text-gray-400 border border-transparent hover:bg-white/10'\n                            : 'bg-gray-100 text-gray-600 border border-transparent hover:bg-gray-200'\n                      }`}\n                    >\n                      {site}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Pain Level */}\n            {['subcutaneous', 'intramuscular'].includes(route) && (\n              <div>\n                <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Pain Level (optional)</label>\n                <div className=\"flex gap-1\">\n                  {[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((level) => (\n                    <button\n                      key={level}\n                      type=\"button\"\n                      onClick={() => setPainLevel(painLevel === level ? null : level)}\n                      className={`flex-1 py-2 rounded-lg text-xs font-medium transition-all ${\n                        painLevel === level \n                          ? level <= 3 \n                            ? 'bg-green-500/20 text-green-400 border border-green-500/50'\n                            : level <= 6\n                              ? 'bg-yellow-500/20 text-yellow-400 border border-yellow-500/50'\n                              : 'bg-red-500/20 text-red-400 border border-red-500/50'\n                          : isDarkMode\n                            ? 'bg-white/5 text-gray-500 border border-transparent hover:bg-white/10'\n                            : 'bg-gray-100 text-gray-600 border border-transparent hover:bg-gray-200'\n                      }`}\n                    >\n                      {level}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Notes */}\n            <div>\n              <label className={`block text-xs mb-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Notes (optional)</label>\n              <textarea\n                value={notes}\n                onChange={(e) => setNotes(e.target.value)}\n                placeholder=\"Any observations...\"\n                rows={2}\n                className={`w-full px-3 py-2 rounded-lg border focus:outline-none focus:border-[#4ADEA8]/50 resize-none ${\n                  isDarkMode\n                    ? 'bg-white/10 border-[#4ADEA8]/20 text-white placeholder-gray-500'\n                    : 'bg-white border-gray-300 text-gray-900 placeholder-gray-400'\n                }`}\n              />\n            </div>\n          </form>\n\n          {/* Footer */}\n          <div className={`p-3 sm:p-4 border-t flex gap-2 ${\n            isDarkMode ? 'border-[#4ADEA8]/20' : 'border-gray-200'\n          }`}>\n            <button\n              onClick={handleClose}\n              className={`flex-1 py-2.5 sm:py-3 rounded-xl border font-medium transition-all ${\n                isDarkMode\n                  ? 'border-[#4ADEA8]/40 text-white/80 hover:text-white hover:bg-white/10'\n                  : 'border-gray-300 text-gray-700 hover:bg-gray-100'\n              }`}\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleSubmit}\n              className=\"flex-1 py-2.5 sm:py-3 rounded-xl bg-gradient-to-r from-[#4ADEA8] to-[#6EE7B7] text-white font-semibold hover:shadow-[0_0_20px_rgba(74,222,168,0.5)] transition-all\"\n            >\n              Log Injection\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {showDatePicker && (\n        useWheelForDate ? (\n          <DateWheelPickerModal\n            isOpen={showDatePicker}\n            value={date}\n            onChange={(newDate) => {\n              setDate(newDate);\n              setShowDatePicker(false);\n            }}\n            onClose={() => setShowDatePicker(false)}\n          />\n        ) : (\n          <CalendarPickerModal\n            isOpen={showDatePicker}\n            value={date}\n            onChange={(newDate) => {\n              setDate(newDate);\n              setShowDatePicker(false);\n            }}\n            onClose={() => setShowDatePicker(false)}\n          />\n        )\n      )}\n\n      {showRoutePicker && (\n        <BottomSheetModal\n          isOpen={showRoutePicker}\n          title=\"Select Route\"\n          options={Object.entries(ROUTE_LABELS).map(([value, label]) => ({ value, label }))}\n          value={route}\n          onSelect={(val) => {\n            setRoute(val as InjectionRoute);\n            setShowRoutePicker(false);\n          }}\n          onClose={() => setShowRoutePicker(false)}\n        />\n      )}\n    </>\n  );\n};\n\nexport default LogPeptideModal;\n","import React, { useMemo } from 'react';\nimport { Peptide, PeptideLogEntry, PeptideFrequency } from '../../../types';\nimport { timeService } from '../../../core/timeService';\n\ninterface PeptideProgressBarProps {\n  peptide: Peptide;\n  latestLog: PeptideLogEntry | null;\n  currentTime: Date;\n  color: string;\n}\n\n// Parse date and time as local time (avoids UTC issues)\nconst parseLocalDateTime = (dateStr: string, timeStr: string): Date => {\n  const [year, month, day] = dateStr.split('-').map(Number);\n  const [hours, minutes] = timeStr.split(':').map(Number);\n  return new Date(year, month - 1, day, hours, minutes);\n};\n\nconst getFrequencyDays = (frequency: PeptideFrequency): number => {\n  switch (frequency) {\n    case 'daily': return 1;\n    case 'every_other_day': return 2;\n    case 'every_3_days': return 3;\n    case 'every_35_days': return 3.5;\n    case 'every_4_days': return 4;\n    case 'every_5_days': return 5;\n    case 'every_6_days': return 6;\n    case 'weekly': return 7;\n    case 'twice_week': return 3.5;\n    case 'biweekly': return 14;\n    case 'triweekly': return 21;\n    case 'monthly': return 30;\n    case 'as_needed': return 7;\n    default: return 7;\n  }\n};\n\n// Get due window in hours (8 from preferred time)\nconst getDueWindowHours = (): number => 8;\n\nconst getFrequencyLabel = (frequency: PeptideFrequency): string => {\n  switch (frequency) {\n    case 'daily': return 'Everyday';\n    case 'every_other_day': return 'Every 2 Days';\n    case 'every_3_days': return 'Every 3 Days';\n    case 'every_35_days': return 'Every 3.5 Days';\n    case 'every_4_days': return 'Every 4 Days';\n    case 'every_5_days': return 'Every 5 Days';\n    case 'every_6_days': return 'Every 6 Days';\n    case 'weekly': return 'Every Week';\n    case 'twice_week': return '2x / Week';\n    case 'biweekly': return 'Every 2 Weeks';\n    case 'triweekly': return 'Every 3 Weeks';\n    case 'monthly': return 'Every Month';\n    case 'as_needed': return 'As Needed';\n    default: return 'Every Week';\n  }\n};\n\nconst PeptideProgressBar: React.FC<PeptideProgressBarProps> = ({\n  peptide,\n  latestLog,\n  currentTime,\n  color,\n}) => {\n  const result = useMemo(() => {\n    const intervalDays = getFrequencyDays(peptide.frequency);\n    const intervalMs = intervalDays * 24 * 60 * 60 * 1000;\n    const dueWindowMs = getDueWindowHours() * 60 * 60 * 1000;\n    const isDaily = peptide.frequency === 'daily';\n    \n    // Parse preferred time (only used for daily)\n    const preferredParts = (peptide.preferredTime || '08:00').split(':');\n    const preferredHours = parseInt(preferredParts[0], 10);\n    const preferredMinutes = parseInt(preferredParts[1], 10);\n    \n    if (!latestLog) {\n      return {\n        progress: 100,\n        timeRemaining: { days: 0, hours: 0, label: 'Never logged' },\n        isDue: true,\n        isOverdue: false,\n        isLoggedToday: false,\n        isDaily,\n        daysSinceLastDose: 0,\n      };\n    }\n\n    const lastLogDate = parseLocalDateTime(latestLog.date, latestLog.time);\n    const timeSinceLastLog = currentTime.getTime() - lastLogDate.getTime();\n    const daysSinceLastLog = timeSinceLastLog / (1000 * 60 * 60 * 24);\n    \n    // Progress calculation\n    let progressPercent: number;\n    let timeUntilNext: number;\n    \n    if (isDaily) {\n      // Daily: progress reaches 100% at preferred time\n      const currentHours = currentTime.getHours();\n      const currentMinutes = currentTime.getMinutes();\n      const currentTimeInMinutes = currentHours * 60 + currentMinutes;\n      const preferredTimeInMinutes = preferredHours * 60 + preferredMinutes;\n      \n      let preferredTarget = new Date(currentTime);\n      preferredTarget.setHours(preferredHours, preferredMinutes, 0, 0);\n      \n      if (currentTimeInMinutes < preferredTimeInMinutes) {\n        // Before preferred time today\n      } else {\n        preferredTarget.setDate(preferredTarget.getDate() + 1);\n      }\n      \n      const timeFromLastLogToTarget = preferredTarget.getTime() - lastLogDate.getTime();\n      if (timeFromLastLogToTarget > 0) {\n        progressPercent = Math.min(100, (timeSinceLastLog / timeFromLastLogToTarget) * 100);\n      } else {\n        progressPercent = 100;\n      }\n      timeUntilNext = preferredTarget.getTime() - currentTime.getTime();\n    } else {\n      // Non-daily: countdown starts at next midnight after log\n      const lastLogMidnight = new Date(lastLogDate);\n      lastLogMidnight.setDate(lastLogMidnight.getDate() + 1);\n      lastLogMidnight.setHours(0, 0, 0, 0);\n      \n      const timeSinceMidnight = currentTime.getTime() - lastLogMidnight.getTime();\n      \n      if (timeSinceMidnight <= 0) {\n        // Before midnight - full countdown\n        progressPercent = 0;\n        timeUntilNext = -timeSinceMidnight;\n      } else {\n        // After midnight - progress based on interval from midnight\n        progressPercent = Math.min(100, (timeSinceMidnight / intervalMs) * 100);\n        timeUntilNext = Math.max(0, intervalMs - timeSinceMidnight);\n      }\n    }\n    \n    // Due window (only for daily)\n    const currentHours = currentTime.getHours();\n    const currentMinutes = currentTime.getMinutes();\n    const currentTimeInMinutes = currentHours * 60 + currentMinutes;\n    const preferredTimeInMinutes = preferredHours * 60 + preferredMinutes;\n    const dueWindowStartMinutes = preferredTimeInMinutes - dueWindowMs / (60 * 1000);\n    const dueWindowEndMinutes = preferredTimeInMinutes + dueWindowMs / (60 * 1000);\n    const isWithinDueWindow = currentTimeInMinutes >= dueWindowStartMinutes && currentTimeInMinutes <= dueWindowEndMinutes;\n    \n    // Check if logged today\n    const todayStr = timeService.toLocalDateString(currentTime);\n    const isLoggedToday = latestLog && latestLog.date === todayStr;\n    \n    // Overdue and Due flags\n    let isOverdueFlag: boolean;\n    let isDueFlag: boolean;\n    \n    if (isDaily) {\n      // Daily: based on preferred time\n      isOverdueFlag = currentTimeInMinutes > preferredTimeInMinutes && !isLoggedToday;\n      isDueFlag = isWithinDueWindow;\n    } else {\n      // Non-daily: based on midnight after last log\n      const lastLogMidnight = new Date(lastLogDate);\n      lastLogMidnight.setDate(lastLogMidnight.getDate() + 1);\n      lastLogMidnight.setHours(0, 0, 0, 0);\n      \n      const timeSinceMidnight = currentTime.getTime() - lastLogMidnight.getTime();\n      const daysSinceMidnight = timeSinceMidnight / (1000 * 60 * 60 * 24);\n      \n      isOverdueFlag = daysSinceMidnight >= intervalDays;\n      \n      // For non-daily: isDue when it's exactly at the due date\n      // isDue shows when today is the scheduled dose day\n      const todayMidnight = new Date(currentTime);\n      todayMidnight.setHours(0, 0, 0, 0);\n      const lastLogMidnight2 = new Date(lastLogDate);\n      lastLogMidnight2.setHours(0, 0, 0, 0);\n      const nextDueMidnight = new Date(lastLogMidnight2);\n      nextDueMidnight.setDate(nextDueMidnight.getDate() + intervalDays);\n      const isDueDay = todayMidnight.getTime() === nextDueMidnight.getTime();\n      isDueFlag = isDueDay;\n    }\n    \n    // Calculate overdue display for daily\n    let overdueHours = 0;\n    let overdueMinutes = 0;\n    if (isOverdueFlag && isDaily) {\n      let todaysPreferred = new Date(currentTime);\n      todaysPreferred.setHours(preferredHours, preferredMinutes, 0, 0);\n      const overdueMs = currentTime.getTime() - todaysPreferred.getTime();\n      overdueHours = Math.floor(overdueMs / (1000 * 60 * 60));\n      overdueMinutes = Math.floor((overdueMs % (1000 * 60 * 60)) / (1000 * 60));\n    }\n\n    const remainingMs = Math.max(0, timeUntilNext);\n    const remainingDays = Math.floor(remainingMs / (1000 * 60 * 60 * 24));\n    const remainingHours = Math.floor((remainingMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n    const remainingMinutes = Math.floor((remainingMs % (1000 * 60 * 60)) / (1000 * 60));\n    \n    let label: string;\n    // Show \"Dose Logged For Today\" if logged today\n    if (isLoggedToday) {\n      label = 'Dose Logged For Today';\n    } else if (isOverdueFlag) {\n      if (isDaily) {\n        // Show overdue in hours/minutes for daily\n        label = overdueHours > 0 \n          ? `Overdue by ${overdueHours}h ${overdueMinutes}m`\n          : `Overdue by ${overdueMinutes}m`;\n      } else {\n        const overdueDays = Math.abs(remainingDays);\n        const overdueHoursAbs = Math.abs(remainingHours);\n        label = overdueDays > 0 \n          ? `Overdue by ${overdueDays}d ${overdueHoursAbs}h`\n          : `Overdue by ${overdueHoursAbs}h`;\n      }\n    } else if (isDaily) {\n      // For daily, always show countdown to preferred time (not \"Due now\")\n      if (remainingDays > 0) {\n        label = `${remainingDays}d ${remainingHours}h until next`;\n      } else if (remainingHours > 0) {\n        label = `${remainingHours}h ${remainingMinutes}m until next`;\n      } else {\n        label = `${remainingMinutes}m until next`;\n      }\n    } else if (remainingDays > 0) {\n      label = `${remainingDays}d ${remainingHours}h until next`;\n    } else if (remainingHours > 0) {\n      label = `${remainingHours}h ${remainingMinutes}m until next`;\n    } else {\n      label = 'Due now';\n    }\n\n    return {\n      progress: progressPercent,\n      timeRemaining: { \n        days: remainingDays, \n        hours: remainingHours, \n        label \n      },\n      isDue: isDueFlag,\n      isOverdue: isOverdueFlag,\n      isLoggedToday,\n      isDaily,\n      daysSinceLastDose: daysSinceLastLog,\n      // Debug info\n      debug: {\n        currentTimeInMinutes,\n        preferredTimeInMinutes,\n        dueWindowStartMinutes,\n        dueWindowEndMinutes,\n        isWithinDueWindow,\n        timeUntilNext,\n        intervalMs,\n      },\n    };\n  }, [peptide.frequency, peptide.preferredTime, latestLog, currentTime]);\n\n  const { progress, timeRemaining, isDue, isOverdue, isLoggedToday, isDaily, daysSinceLastDose, debug = {} as any } = result;\n\n  const peptidePurple = '#B19CD9';\n  // For daily overdue, keep purple color\n  const progressColor = isOverdue && !isDaily\n    ? 'linear-gradient(90deg, #EF4444, #F87171, #EF4444)' \n    : `linear-gradient(90deg, ${peptidePurple}, ${peptidePurple}dd, ${peptidePurple})`;\n\n  const glowColor = isOverdue && !isDaily\n    ? 'rgba(239,68,68,0.7)' \n    : 'rgba(177,156,217,0.6)';\n\n  // For daily, override overdue to show \"Dose Due Today\" and keep bar full\n  const isOverdueDaily = isOverdue && isDaily;\n  const displayProgress = isOverdueDaily ? 100 : progress;\n  const displayLabel = isOverdueDaily \n    ? 'Dose Due Today - Log Now' \n    : isOverdue \n      ? `Overdue - ${getFrequencyLabel(peptide.frequency)}` \n      : isDaily || !isDue \n        ? timeRemaining.label\n        : 'Due Now - Log Dose';\n\n  return (\n    <div className=\"mb-4\">\n      {/* Progress Bar */}\n      <div className=\"relative overflow-hidden h-12 rounded-xl bg-gradient-to-r from-[#0d0d1a] via-[#1a1a2e] to-[#0d0d1a] border border-[#B19CD9]/40 shadow-[0_0_15px_rgba(177,156,217,0.2)]\">\n        {/* Animated background */}\n        <div \n          className=\"absolute inset-0 opacity-30\"\n          style={{\n            backgroundImage: 'repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(177,156,217,0.1) 10px, rgba(177,156,217,0.1) 20px)',\n            animation: 'stripeMove 2s linear infinite'\n          }}\n        />\n        \n        {/* Progress Fill */}\n        <div \n          className=\"absolute top-0 h-full transition-all duration-300\"\n          style={{ \n            width: `${Math.min(100, displayProgress)}%`,\n            background: progressColor,\n            boxShadow: `0 0 25px ${glowColor}, inset 0 0 20px rgba(255,255,255,0.2)`,\n          }}\n        />\n        \n        {/* Shine Effect */}\n        <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent\" />\n        \n        {/* Center Text */}\n        <div className=\"absolute inset-0 flex items-center justify-center\">\n          <span className=\"text-sm font-bold text-white\" style={{ textShadow: '0 1px 2px rgba(0,0,0,0.5)' }}>\n            {displayLabel}\n          </span>\n        </div>\n      </div>\n\n      {/* Info Row */}\n      <div className=\"flex justify-between mt-2 text-xs text-[#B19CD9]/70\">\n        <span className=\"flex items-center gap-1\">\n          <span className=\"w-2 h-2 rounded-full bg-[#4ADEA8]\"></span>\n          Last: {latestLog \n            ? `${latestLog.date} ${latestLog.time}` \n            : 'Never'}\n        </span>\n        <span className=\"font-medium text-[#B19CD9]\">{peptide.name}</span>\n        <span className=\"flex items-center gap-1\">\n          {getFrequencyLabel(peptide.frequency)}\n          <span className=\"w-2 h-2 rounded-full bg-[#B19CD9]\"></span>\n        </span>\n      </div>\n\n      {/* Debug Panel */}\n      {process.env.NODE_ENV === 'development' && (\n      <div className=\"mt-2 p-2 bg-black/50 rounded text-xs font-mono text-gray-400\">\n        <div className=\"grid grid-cols-2 gap-1\">\n          <div>currentTimeInMinutes: {debug.currentTimeInMinutes}</div>\n          <div>preferredTimeInMinutes: {debug.preferredTimeInMinutes}</div>\n          <div>dueWindowStart: {debug.dueWindowStartMinutes}</div>\n          <div>dueWindowEnd: {debug.dueWindowEndMinutes}</div>\n          <div>isWithinDueWindow: <span className={debug.isWithinDueWindow ? 'text-green-400' : 'text-red-400'}>{String(debug.isWithinDueWindow)}</span></div>\n          <div>timeUntilNext: {Math.round(debug.timeUntilNext / 60000)}min</div>\n          <div>intervalMs: {Math.round(debug.intervalMs / 3600000)}h</div>\n          <div>isDue: <span className={isDue ? 'text-green-400' : 'text-red-400'}>{String(isDue)}</span></div>\n          <div>isOverdue: <span className={isOverdue ? 'text-green-400' : 'text-red-400'}>{String(isOverdue)}</span></div>\n          <div>isDaily: {String(isDaily)}</div>\n          <div>isLoggedToday: {String(isLoggedToday)}</div>\n        </div>\n      </div>\n      )}\n    </div>\n  );\n};\n\nexport default PeptideProgressBar;\n","import React from 'react';\nimport { Peptide, PeptideLogEntry, PeptideCategory } from '../../../types';\nimport PeptideProgressBar from './PeptideProgressBar';\nimport { useTheme } from '../../../contexts/ThemeContext';\nimport { timeService } from '../../../core/timeService';\n\ninterface PeptideCardProps {\n  peptide: Peptide;\n  latestLog: PeptideLogEntry | null;\n  currentTime: Date;\n  onLog: () => void;\n  onEdit: () => void;\n  onDelete: () => void;\n  onToggleActive: () => void;\n}\n\n// Parse date and time as local time (avoids UTC issues)\nconst parseLocalDateTime = (dateStr: string, timeStr: string): Date => {\n  const [year, month, day] = dateStr.split('-').map(Number);\n  const [hours, minutes] = timeStr.split(':').map(Number);\n  return new Date(year, month - 1, day, hours, minutes);\n};\n\nconst CATEGORY_LABELS: Record<PeptideCategory, string> = {\n  healing: 'Healing',\n  growth_hormone: 'GH',\n  fat_loss: 'Fat Loss',\n  muscle: 'Muscle',\n  longevity: 'Longevity',\n  immune: 'Immune',\n  skin: 'Skin',\n  cognitive: 'Cognitive',\n  other: 'Other',\n};\n\nconst ROUTE_ICONS: Record<string, string> = {\n  subcutaneous: 'SQ',\n  intramuscular: 'IM',\n  intravenous: 'IV',\n  oral: 'Oral',\n  topical: 'Topical',\n  intranasal: 'IN',\n  sublingual: 'Sub',\n};\n\nconst PeptideCard: React.FC<PeptideCardProps> = ({\n  peptide,\n  latestLog,\n  currentTime,\n  onLog,\n  onEdit,\n  onDelete,\n  onToggleActive,\n}) => {\n  const { isDarkMode } = useTheme();\n  \n  if (!peptide.isActive && peptide.isArchived) {\n    return null;\n  }\n\n  // Get due window in hours (8 from preferred time)\n  const getDueWindowHours = (): number => 8;\n\n  // Determine if the Log button should be shown based on due/overdue state.\n  const frequencyDays = (() => {\n    switch (peptide.frequency) {\n      case 'daily': return 1;\n      case 'every_other_day': return 2;\n      case 'every_3_days': return 3;\n      case 'every_35_days': return 3.5;\n      case 'every_4_days': return 4;\n      case 'every_5_days': return 5;\n      case 'every_6_days': return 6;\n      case 'weekly': return 7;\n      case 'twice_week': return 3.5;\n      case 'biweekly': return 14;\n      case 'triweekly': return 21;\n      case 'monthly': return 30;\n      case 'as_needed': return 7;\n      default: return 7;\n    }\n  })();\n  const intervalMs = frequencyDays * 24 * 60 * 60 * 1000;\n  \n  const isDaily = peptide.frequency === 'daily';\n  const todayStr = timeService.toLocalDateString(currentTime);\n  const isLoggedToday = latestLog && latestLog.date === todayStr;\n  \n  let isDue = false;\n  let isOverdue = false;\n  \n  if (!latestLog) {\n    isDue = true;\n  } else if (isDaily) {\n    // Daily: based on preferred time\n    const lastLogDate = parseLocalDateTime(latestLog.date, latestLog.time);\n    const timeSinceLast = currentTime.getTime() - lastLogDate.getTime();\n    const dueWindowMs = getDueWindowHours() * 60 * 60 * 1000;\n    \n    const preferredParts = (peptide.preferredTime || '08:00').split(':');\n    const preferredHours = parseInt(preferredParts[0], 10);\n    const preferredMinutes = parseInt(preferredParts[1], 10);\n    \n    const currentHours = currentTime.getHours();\n    const currentMinutes = currentTime.getMinutes();\n    const currentTimeInMinutes = currentHours * 60 + currentMinutes;\n    const preferredTimeInMinutes = preferredHours * 60 + preferredMinutes;\n    \n    const dueWindowStartMinutes = preferredTimeInMinutes - dueWindowMs / (60 * 1000);\n    const dueWindowEndMinutes = preferredTimeInMinutes + dueWindowMs / (60 * 1000);\n    \n    const isWithinDueWindow = currentTimeInMinutes >= dueWindowStartMinutes && currentTimeInMinutes <= dueWindowEndMinutes;\n    \n    isOverdue = currentTimeInMinutes > preferredTimeInMinutes && !isLoggedToday;\n    isDue = isWithinDueWindow;\n  } else {\n    // Non-daily: countdown starts at next midnight after log\n    const lastLogDate = parseLocalDateTime(latestLog.date, latestLog.time);\n    const lastLogMidnight2 = new Date(lastLogDate);\n    lastLogMidnight2.setDate(lastLogMidnight2.getDate() + 1);\n    lastLogMidnight2.setHours(0, 0, 0, 0);\n    \n    const timeSinceMidnight = currentTime.getTime() - lastLogMidnight2.getTime();\n    const daysSinceMidnight = timeSinceMidnight / (1000 * 60 * 60 * 24);\n    \n    isOverdue = daysSinceMidnight >= frequencyDays;\n    // For non-daily: isDue when today is the scheduled dose day\n    const todayMidnight = new Date(currentTime);\n    todayMidnight.setHours(0, 0, 0, 0);\n    const lastLogMidnight = new Date(lastLogDate);\n    lastLogMidnight.setHours(0, 0, 0, 0);\n    const nextDueMidnight = new Date(lastLogMidnight);\n    nextDueMidnight.setDate(nextDueMidnight.getDate() + frequencyDays);\n    const isDueDay = todayMidnight.getTime() === nextDueMidnight.getTime();\n    isDue = isDueDay;\n  }\n  // For daily, always show button; otherwise only show when due or overdue\n  const showLogButton = peptide.isActive && (isDaily || isDue || isOverdue);\n  // Show \"Dose Logged For Today\" if logged today\n  const logButtonText = isLoggedToday \n    ? 'Dose Logged For Today' \n    : (isOverdue && !isDaily)\n      ? 'Log Overdue Dose' \n      : 'Log Dose Now';\n\n  return (\n    <div \n      className={`rounded-2xl p-4 border transition-all duration-300 ${\n        peptide.isActive \n          ? isDarkMode\n            ? 'bg-black/30 border-[#B19CD9]/20 hover:border-[#B19CD9]/40'\n            : 'bg-white border-gray-200 hover:border-gray-300'\n          : isDarkMode\n            ? 'bg-black/20 border-gray-700/50 opacity-60'\n            : 'bg-gray-50 border-gray-200 opacity-60'\n      }`}\n    >\n      {/* Header */}\n      <div className=\"flex items-start justify-between mb-3\">\n        <div className=\"flex items-center gap-3\">\n          <div \n            className=\"w-4 h-4 rounded-full flex-shrink-0\"\n            style={{ backgroundColor: peptide.color }}\n          />\n          <div>\n            <h3 className=\"font-semibold text-white\">{peptide.name}</h3>\n            <div className=\"flex items-center gap-2 text-xs text-gray-400\">\n              <span \n                className=\"px-1.5 py-0.5 rounded\"\n                style={{ backgroundColor: `${peptide.color}20`, color: peptide.color }}\n              >\n                {CATEGORY_LABELS[peptide.category]}\n              </span>\n              <span>{peptide.dose}{peptide.doseUnit}</span>\n              <span>{ROUTE_ICONS[peptide.route]}</span>\n            </div>\n          </div>\n        </div>\n        \n        {/* Actions */}\n        <div className=\"flex gap-1\">\n          <button\n            onClick={onToggleActive}\n            className={`p-1.5 rounded-lg transition-colors ${\n              peptide.isActive \n                ? 'text-green-400 hover:bg-green-400/20' \n                : 'text-gray-500 hover:bg-gray-500/20'\n            }`}\n            title={peptide.isActive ? 'Active' : 'Inactive'}\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              {peptide.isActive ? (\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n              ) : (\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              )}\n            </svg>\n          </button>\n          <button\n            onClick={onEdit}\n            className=\"p-1.5 rounded-lg text-gray-400 hover:bg-white/10 hover:text-white transition-colors\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\" />\n            </svg>\n          </button>\n          <button\n            onClick={onDelete}\n            className=\"p-1.5 rounded-lg text-gray-400 hover:bg-red-400/20 hover:text-red-400 transition-colors\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n\n      {/* Progress Bar */}\n      <div className=\"mb-3\">\n        <PeptideProgressBar \n          peptide={peptide}\n          latestLog={latestLog}\n          currentTime={currentTime}\n          color={peptide.color}\n        />\n      </div>\n\n      {/* Log Button: shown when due or overdue (copying MedicationTab styling) */}\n      {showLogButton && (\n        <button\n          onClick={onLog}\n          className={`mt-2 w-full py-2 px-4 rounded-lg font-semibold text-sm transition-all duration-300 ${\n            (isOverdue && !isDaily)\n              ? 'bg-gradient-to-r from-[#EF4444] to-[#F87171] text-white hover:scale-[1.02] animate-pulse'\n              : 'bg-gradient-to-r from-[#4ADEA8] to-[#4FD99C] text-white hover:scale-[1.02]'\n          }`}\n          style={{\n            transition: 'opacity 0.3s ease-out, transform 0.3s ease-out',\n            boxShadow: (isOverdue && !isDaily)\n              ? '0 0 20px rgba(239,68,68,0.8), 0 0 40px rgba(239,68,68,0.4)'\n              : '0 0 10px rgba(74,222,168,0.5), 0 0 20px rgba(74,222,168,0.3)',\n          }}\n        >\n          {logButtonText}\n        </button>\n      )}\n\n      {/* Notes Preview */}\n      {peptide.notes && (\n        <p className=\"mt-2 text-xs text-gray-500 line-clamp-2\">{peptide.notes}</p>\n      )}\n    </div>\n  );\n};\n\nexport default PeptideCard;\n","import React, { useMemo } from 'react';\nimport ReactECharts from 'echarts-for-react';\nimport { PeptideLogEntry } from '../../../types';\nimport { isMobile } from '../../../shared/utils/common';\n\ninterface PeptideChartProps {\n  logs: PeptideLogEntry[];\n  color: string;\n  height?: number;\n}\n\nconst PeptideChart: React.FC<PeptideChartProps> = ({ logs, color, height = 200 }) => {\n  const chartOption = useMemo(() => {\n    if (logs.length === 0) return null;\n\n    const grouped: Record<string, { date: string; count: number }> = {};\n    \n    logs.forEach(log => {\n      const date = log.date;\n      if (!grouped[date]) {\n        grouped[date] = { date, count: 0 };\n      }\n      grouped[date].count++;\n    });\n\n    const sortedData = Object.values(grouped)\n      .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime())\n      .slice(-30);\n\n    return {\n      backgroundColor: 'transparent',\n      animation: !isMobile(),\n      grid: {\n        top: 10,\n        right: 10,\n        bottom: 30,\n        left: 30,\n      },\n      xAxis: {\n        type: 'category',\n        data: sortedData.map(d => {\n          const date = new Date(d.date);\n          return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n        }),\n        axisLine: { lineStyle: { color: '#333' } },\n        axisLabel: { color: '#666', fontSize: 10 },\n        axisTick: { show: false },\n      },\n      yAxis: {\n        type: 'value',\n        axisLine: { show: false },\n        axisLabel: { color: '#666', fontSize: 10 },\n        splitLine: { lineStyle: { color: '#222' } },\n      },\n      tooltip: {\n        backgroundColor: '#1a1625',\n        borderColor: '#B19CD9',\n        borderWidth: 1,\n        borderRadius: 8,\n        textStyle: { color: '#fff', fontSize: 12 },\n        formatter: (params: any) => {\n          const data = params[0];\n          return `${data.name}<br/>${data.value} injections`;\n        },\n      },\n      series: [{\n        type: 'line',\n        data: sortedData.map(d => d.count),\n        smooth: true,\n        lineStyle: {\n          color: color,\n          width: 2,\n        },\n        itemStyle: {\n          color: color,\n        },\n        areaStyle: {\n          color: {\n            type: 'linear',\n            x: 0, y: 0, x2: 0, y2: 1,\n            colorStops: [\n              { offset: 0, color: `${color}40` },\n              { offset: 1, color: `${color}00` },\n            ],\n          },\n        },\n      }],\n    };\n  }, [logs, color]);\n\n  if (!chartOption) {\n    return (\n      <div \n        className=\"flex items-center justify-center text-gray-500 text-sm\"\n        style={{ height }}\n      >\n        No injection history yet\n      </div>\n    );\n  }\n\n  return (\n    <ReactECharts \n      option={chartOption} \n      style={{ height: `${height}px`, width: '100%' }}\n      opts={{ renderer: 'svg' }}\n    />\n  );\n};\n\nexport default PeptideChart;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport { useThemeStyles } from '../../contexts/ThemeContext';\nimport { useTime } from '../../shared/hooks';\nimport { Peptide, PeptideLogEntry, PeptideCategory } from '../../types';\nimport { \n  getPeptides, \n  savePeptides, \n  addPeptide as dbAddPeptide, \n  updatePeptide as dbUpdatePeptide, \n  deletePeptide as dbDeletePeptide,\n  addPeptideLog,\n  getPeptideLogsById,\n  getLatestPeptideLog,\n  deletePeptideLog,\n  addMedicationManualEntry \n} from '../../shared/utils/database';\nimport { timeService } from '../../core/timeService';\nimport PeptideModal from './components/PeptideModal';\nimport LogPeptideModal from './components/LogPeptideModal';\nimport PeptideCard from './components/PeptideCard';\nimport PeptideChart from './components/PeptideChart';\n\ninterface PeptidesTabProps {\n  useWheelForDate?: boolean;\n}\n\nconst CATEGORY_TABS: { id: PeptideCategory | 'all'; label: string }[] = [\n  { id: 'all', label: 'All' },\n  { id: 'healing', label: 'Healing' },\n  { id: 'growth_hormone', label: 'GH' },\n  { id: 'fat_loss', label: 'Fat Loss' },\n  { id: 'muscle', label: 'Muscle' },\n  { id: 'longevity', label: 'Longevity' },\n  { id: 'immune', label: 'Immune' },\n  { id: 'skin', label: 'Skin' },\n  { id: 'cognitive', label: 'Cognitive' },\n  { id: 'other', label: 'Other' },\n];\n\nconst PeptidesTab: React.FC<PeptidesTabProps> = ({ useWheelForDate = true }) => {\n  const { bigCard, bigCardText, smallCard, text, isDarkMode } = useThemeStyles();\n  const now = useTime(100);\n  const currentTime = useMemo(() => new Date(now), [now]);\n  \n  const [peptides, setPeptides] = useState<Peptide[]>([]);\n  const [selectedCategory, setSelectedCategory] = useState<PeptideCategory | 'all'>('all');\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showLogModal, setShowLogModal] = useState(false);\n  const [editingPeptide, setEditingPeptide] = useState<Peptide | null>(null);\n  const [selectedPeptide, setSelectedPeptide] = useState<Peptide | null>(null);\n  const [expandedCard, setExpandedCard] = useState<string | null>(() => {\n    return localStorage.getItem('glpal_expanded_peptide_card');\n  });\n  const [deleteConfirm, setDeleteConfirm] = useState<string | null>(null);\n  const [isDeleteClosing, setIsDeleteClosing] = useState(false);\n  const [showArchived, setShowArchived] = useState(false);\n\n  useEffect(() => {\n    if (expandedCard) {\n      localStorage.setItem('glpal_expanded_peptide_card', expandedCard);\n    } else {\n      localStorage.removeItem('glpal_expanded_peptide_card');\n    }\n  }, [expandedCard]);\n\n  // Load peptides on mount\n  useEffect(() => {\n    const loaded = getPeptides();\n    setPeptides(loaded);\n  }, []);\n\n  useEffect(() => {\n    if (deleteConfirm) {\n      document.body.classList.add('modal-open');\n    } else if (document.body.classList.contains('modal-open')) {\n      document.body.classList.remove('modal-open');\n    }\n  }, [deleteConfirm]);\n\n  const handleCloseDeleteConfirm = () => {\n    setIsDeleteClosing(true);\n    setTimeout(() => {\n      setDeleteConfirm(null);\n      setIsDeleteClosing(false);\n    }, 200);\n  };\n\n  const filteredPeptides = useMemo(() => {\n    let filtered = peptides;\n    \n    if (!showArchived) {\n      filtered = filtered.filter(p => !p.isArchived);\n    }\n    \n    if (selectedCategory !== 'all') {\n      filtered = filtered.filter(p => p.category === selectedCategory);\n    }\n    \n    return filtered.sort((a, b) => {\n      if (a.isActive !== b.isActive) return a.isActive ? -1 : 1;\n      return new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime();\n    });\n  }, [peptides, selectedCategory, showArchived]);\n\n  const activePeptides = peptides.filter(p => p.isActive && !p.isArchived);\n  const archivedPeptides = peptides.filter(p => p.isArchived);\n\n  const handleAddPeptide = (peptide: Peptide) => {\n    dbAddPeptide(peptide);\n    setPeptides(getPeptides());\n  };\n\n  const handleUpdatePeptide = (peptide: Peptide) => {\n    dbUpdatePeptide(peptide);\n    setPeptides(getPeptides());\n    setEditingPeptide(null);\n  };\n\n  const handleDeletePeptide = (id: string) => {\n    dbDeletePeptide(id);\n    setPeptides(getPeptides());\n    setDeleteConfirm(null);\n  };\n\n  const handleToggleActive = (peptide: Peptide) => {\n    const updated = { ...peptide, isActive: !peptide.isActive };\n    dbUpdatePeptide(updated);\n    setPeptides(getPeptides());\n  };\n\n  const handleArchivePeptide = (peptide: Peptide) => {\n    const updated = { ...peptide, isArchived: true, isActive: false };\n    dbUpdatePeptide(updated);\n    setPeptides(getPeptides());\n  };\n\n  const handleLogInjection = (log: PeptideLogEntry) => {\n    addPeptideLog(log);\n    setShowLogModal(false);\n    setSelectedPeptide(null);\n  };\n\n  const openLogModal = (peptide: Peptide) => {\n    setSelectedPeptide(peptide);\n    setShowLogModal(true);\n  };\n\n  return (\n    <div className=\"space-y-3\">\n      <div className={bigCard}>\n        <h1 className={bigCardText.title} style={{ textShadow: '0 0 15px var(--accent-purple-light-shadow)' }}>\n          Peptides\n        </h1>\n\n        {/* Category Tabs */}\n        <div className=\"flex gap-1 overflow-x-auto pb-2 mb-3 -mx-2 px-2 hide-scrollbar\">\n          {CATEGORY_TABS.map(tab => (\n            <button\n              key={tab.id}\n              onClick={() => setSelectedCategory(tab.id)}\n              className={`px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-all ${\n                selectedCategory === tab.id \n                  ? 'bg-[#B19CD9] text-white' \n                  : 'bg-white/10 text-gray-400 hover:bg-white/20'\n              }`}\n            >\n              {tab.label}\n            </button>\n          ))}\n        </div>\n\n        {/* Stats Row */}\n        <div className=\"grid grid-cols-3 gap-2 mb-4\">\n          <div className={smallCard}>\n            <p className={text.label}>Active</p>\n            <p className={text.value}>{activePeptides.length}</p>\n          </div>\n          <div className={smallCard}>\n            <p className={text.label}>Archived</p>\n            <p className={text.value}>{archivedPeptides.length}</p>\n          </div>\n          <div className={smallCard}>\n            <p className={text.label}>Total Logs</p>\n            <p className={text.value}>\n              {peptides.reduce((sum, p) => sum + getPeptideLogsById(p.id).length, 0)}\n            </p>\n          </div>\n        </div>\n\n        {/* Peptide Cards */}\n        {filteredPeptides.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <div className=\"text-4xl mb-3\"></div>\n            <p className=\"text-gray-400 mb-4\">No peptides yet</p>\n            <button\n              onClick={() => setShowAddModal(true)}\n              className=\"px-4 py-2 rounded-lg bg-gradient-to-r from-[#B19CD9] to-[#D4B8E8] text-white font-medium text-sm hover:shadow-lg hover:shadow-[#B19CD9]/30 transition-all\"\n            >\n              Add Your First Peptide\n            </button>\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {filteredPeptides.map(peptide => {\n              const latestLog = getLatestPeptideLog(peptide.id);\n              const logs = getPeptideLogsById(peptide.id);\n              const isExpanded = expandedCard === peptide.id;\n              \n              return (\n                <div key={peptide.id}>\n                  <PeptideCard\n                    peptide={peptide}\n                    latestLog={latestLog}\n                    currentTime={currentTime}\n                    onLog={() => openLogModal(peptide)}\n                    onEdit={() => setEditingPeptide(peptide)}\n                    onDelete={() => setDeleteConfirm(peptide.id)}\n                    onToggleActive={() => handleToggleActive(peptide)}\n                  />\n                  \n                  {/* Expanded Chart View */}\n                  {isExpanded && logs.length > 0 && (\n                    <div className={`mt-2 p-3 rounded-xl border ${\n                      isDarkMode \n                        ? 'bg-black/20 border-[#B19CD9]/10' \n                        : 'bg-gray-50 border-gray-200'\n                    }`}>\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <h4 className=\"text-sm font-medium text-white\">{peptide.name} - Injection History</h4>\n                        <button\n                          onClick={() => setExpandedCard(null)}\n                          className=\"text-gray-400 hover:text-white\"\n                        >\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                          </svg>\n                        </button>\n                      </div>\n                      <PeptideChart logs={logs} color={peptide.color} height={150} />\n                      \n                      {/* Recent Logs */}\n                      <div className=\"mt-3 space-y-1\">\n                        <p className=\"text-xs text-gray-500\">Recent Logs:</p>\n                        {logs.slice(0, 5).map(log => (\n                          <div key={log.id} className=\"flex items-center justify-between text-xs py-1 px-2 rounded bg-white/5\">\n                            <span className=\"text-gray-300\">{log.date} {log.time}</span>\n                            <span className=\"text-[#4ADEA8]\">{log.dose}{log.doseUnit}</span>\n                            <span className=\"text-gray-500\">{log.injectionSite}</span>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        )}\n\n        {/* Add Button */}\n        {filteredPeptides.length > 0 && (\n          <button\n            onClick={() => setShowAddModal(true)}\n            className=\"w-full mt-4 py-3 rounded-xl border-2 border-dashed border-[#B19CD9]/30 text-[#B19CD9] font-medium hover:border-[#B19CD9]/60 hover:bg-[#B19CD9]/5 transition-all\"\n          >\n            + Add Peptide\n          </button>\n        )}\n      </div>\n\n      {/* Add/Edit Modal */}\n      <PeptideModal\n        isOpen={showAddModal || editingPeptide !== null}\n        onClose={() => {\n          setShowAddModal(false);\n          setEditingPeptide(null);\n        }}\n        onSave={editingPeptide ? handleUpdatePeptide : handleAddPeptide}\n        editPeptide={editingPeptide}\n        useWheelForDate={useWheelForDate}\n      />\n\n      {/* Log Injection Modal */}\n      <LogPeptideModal\n        isOpen={showLogModal}\n        onClose={() => {\n          setShowLogModal(false);\n          setSelectedPeptide(null);\n        }}\n        onSave={handleLogInjection}\n        peptide={selectedPeptide}\n        useWheelForDate={useWheelForDate}\n      />\n\n      {/* Delete Confirmation Modal */}\n      {deleteConfirm && (\n        <div className=\"fixed inset-0 z-[9999] flex items-center justify-center p-4\">\n          <div className={`fixed inset-0 bg-black/60 ${isDeleteClosing ? 'backdrop-fade-out' : 'backdrop-fade-in'}`} onClick={() => setDeleteConfirm(null)} />\n          <div className={`relative bg-gradient-to-b from-[#1a1625]/98 to-[#0d0a15]/98 rounded-2xl shadow-2xl border border-red-500/30 w-full max-w-sm p-6 ${isDeleteClosing ? 'modal-fade-out' : 'modal-content-fade-in'}`}>\n            <h3 className=\"text-lg font-bold text-white mb-2\">Delete Peptide?</h3>\n            <p className=\"text-sm text-gray-400 mb-4\">\n              This will permanently delete this peptide and all its injection logs. This action cannot be undone.\n            </p>\n            <div className=\"flex gap-3\">\n              <button\n                onClick={handleCloseDeleteConfirm}\n                className=\"flex-1 py-2 rounded-lg bg-gray-600 text-white font-medium hover:bg-gray-500 transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={() => { handleCloseDeleteConfirm(); handleDeletePeptide(deleteConfirm); }}\n                className=\"flex-1 py-2 rounded-lg bg-red-500 text-white font-medium hover:bg-red-600 transition-colors\"\n              >\n                Delete\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PeptidesTab;\n","import React, { useRef, useEffect } from 'react';\nimport { format, startOfMonth, endOfMonth, eachDayOfInterval, getDay, isSameMonth, isSameDay, isToday, addMonths, subMonths } from 'date-fns';\n\ninterface DatePickerProps {\n  selected: Date | undefined;\n  onSelect: (date: Date | undefined) => void;\n  month: Date;\n  isDarkMode?: boolean;\n  // Called when user clicks the \"Today\" button. Receives the date representing \"today\".\n  onTodayClick?: (date: Date) => void;\n}\n\nconst DatePicker: React.FC<DatePickerProps> = ({\n  selected,\n  onSelect,\n  month,\n  isDarkMode = false,\n  onTodayClick,\n}) => {\n  // Show 13-month window: 6 months past, current month, 6 months future\n  const months = Array.from({ length: 13 }, (_, idx) => addMonths(month, idx - 6));\n  \n  const scrollRef = useRef<HTMLDivElement>(null);\n  const isFirstRender = useRef(true);\n  \n  useEffect(() => {\n    if (scrollRef.current && isFirstRender.current) {\n      const container = scrollRef.current;\n      const middleIndex = 6;\n      setTimeout(() => {\n        const middleMonthEl = container.children[middleIndex] as HTMLElement;\n        if (middleMonthEl) {\n          middleMonthEl.scrollIntoView({ behavior: 'auto', block: 'center' });\n        }\n        isFirstRender.current = false;\n      }, 100);\n    }\n  }, []);\n\n  const weekDays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n  const textColor = isDarkMode ? '#ffffff' : '#374151';\n  const outsideColor = isDarkMode ? 'rgba(255, 255, 255, 0.25)' : 'rgba(0, 0, 0, 0.15)';\n  const weekdayColor = isDarkMode ? '#9CA3AF' : '#6B7280';\n  const accentColor = isDarkMode ? '#B19CD9' : '#9C7BD3';\n  const todayColor = '#4ADEA8';\n\n  const handleDayClick = (day: Date) => {\n    onSelect(day);\n  };\n\n  const getMonthDays = (monthDate: Date) => {\n    const start = startOfMonth(monthDate);\n    const end = endOfMonth(monthDate);\n    return eachDayOfInterval({ start, end });\n  };\n\n  const renderMonth = (monthDate: Date, index: number) => {\n    const days = getMonthDays(monthDate);\n    const startDayOfWeek = getDay(startOfMonth(monthDate));\n    const monthLabel = format(monthDate, 'MMMM yyyy');\n\n    return (\n      <div key={monthDate.toISOString()} className=\"mb-4 last:mb-0\">\n        <div\n          className=\"text-center text-sm font-semibold mb-2\"\n          style={{ color: weekdayColor }}\n        >\n          {monthLabel}\n        </div>\n        <div className=\"grid grid-cols-7 mb-2\">\n          {weekDays.map((day) => (\n            <div\n              key={day}\n              className=\"text-center text-xs font-medium uppercase\"\n              style={{ color: weekdayColor }}\n            >\n              {day}\n            </div>\n          ))}\n        </div>\n        <div className=\"grid grid-cols-7 gap-1\">\n          {Array.from({ length: startDayOfWeek }).map((_, i) => (\n            <div key={`empty-${i}`} className=\"aspect-square\" />\n          ))}\n          {days.map((day) => {\n            const isSelected = selected && isSameDay(day, selected);\n            const isCurrentDay = isToday(day);\n            const isCurrentMonth = isSameMonth(day, month);\n\n            return (\n              <button\n                key={day.toISOString()}\n                type=\"button\"\n                onClick={() => handleDayClick(day)}\n                className=\"aspect-square rounded-lg flex items-center justify-center text-sm transition-all\"\n                style={{\n                  color: !isCurrentMonth\n                    ? outsideColor\n                    : isSelected\n                    ? '#ffffff'\n                    : textColor,\n                  backgroundColor: isSelected\n                    ? accentColor\n                    : 'transparent',\n                  fontWeight: isCurrentDay && !isSelected ? '600' : '400',\n                  border: isCurrentDay && !isSelected ? `2px solid ${todayColor}` : 'none',\n                }}\n              >\n                {format(day, 'd')}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"w-full\">\n      {onTodayClick && (\n        <div className=\"flex justify-center mb-3\">\n          <button\n            type=\"button\"\n            onClick={() => onTodayClick ? onTodayClick(new Date()) : undefined}\n            className=\"text-xs font-medium px-3 py-1 rounded-full transition-colors\"\n            style={{\n              backgroundColor: isDarkMode ? 'rgba(74, 222, 168, 0.2)' : 'rgba(74, 222, 168, 0.15)',\n              color: todayColor,\n            }}\n          >\n            Today\n          </button>\n        </div>\n      )}\n      <div ref={scrollRef} className=\"overflow-y-auto max-h-[500px] pr-1\">\n        {months.map((monthDate, index) => renderMonth(monthDate, index))}\n      </div>\n    </div>\n  );\n};\n\nexport default DatePicker;\n","import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { format, addMonths, subMonths } from 'date-fns';\nimport { useTheme } from '../../contexts/ThemeContext';\nimport DatePicker from './DatePicker';\n\ninterface CalendarPickerModalProps {\n  isOpen: boolean;\n  value: string;\n  onChange: (date: string) => void;\n  onClose: () => void;\n}\n\nconst CalendarPickerModal: React.FC<CalendarPickerModalProps> = ({\n  isOpen,\n  value,\n  onChange,\n  onClose,\n}) => {\n  const { isDarkMode } = useTheme();\n  const [selectedDate, setSelectedDate] = useState<Date | undefined>(\n    value ? new Date(value) : undefined\n  );\n  const getInitialMonth = () => {\n    if (value) {\n      const parsed = new Date(value);\n      return new Date(parsed.getFullYear(), parsed.getMonth(), 1);\n    }\n    const today = new Date();\n    return new Date(today.getFullYear(), today.getMonth(), 1);\n  };\n  const [currentMonth, setCurrentMonth] = useState<Date>(getInitialMonth());\n  const [isVisible, setIsVisible] = useState(false);\n  const [isClosing, setIsClosing] = useState(false);\n\n  const months = [\n    'January', 'February', 'March', 'April', 'May', 'June',\n    'July', 'August', 'September', 'October', 'November', 'December'\n  ];\n  \n  const currentYear = new Date().getFullYear();\n  const years = Array.from({ length: 20 }, (_, i) => currentYear - 10 + i);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsVisible(true);\n      setIsClosing(false);\n      setSelectedDate(value ? new Date(value) : undefined);\n      setCurrentMonth(getInitialMonth());\n    }\n  }, [isOpen, value]);\n\n  const handleSelect = (date: Date | undefined) => {\n    setSelectedDate(date);\n    if (date) {\n      onChange(format(date, 'yyyy-MM-dd'));\n      handleClose();\n    }\n  };\n\n  const handleClose = () => {\n    if (isClosing) return;\n    setIsClosing(true);\n    const timer = setTimeout(() => {\n      setIsVisible(false);\n      setIsClosing(false);\n      onClose();\n    }, 200);\n    return () => clearTimeout(timer);\n  };\n\n  const handlePrevMonth = () => {\n    setCurrentMonth(subMonths(currentMonth, 1));\n  };\n\n  const handleNextMonth = () => {\n    setCurrentMonth(addMonths(currentMonth, 1));\n  };\n\n  const handleMonthChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    const newMonth = parseInt(e.target.value);\n    setCurrentMonth(new Date(currentMonth.getFullYear(), newMonth, 1));\n  };\n\n  const handleYearChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    const newYear = parseInt(e.target.value);\n    setCurrentMonth(new Date(newYear, currentMonth.getMonth(), 1));\n  };\n\n  if (!isVisible) return null;\n\n  const modal = (\n    <div className=\"fixed inset-0 z-[99999] flex items-center justify-center p-4\">\n      <div\n        className={`absolute inset-0 bg-black/60 ${\n          isClosing ? 'backdrop-fade-out' : 'backdrop-fade-in'\n        }`}\n        style={{ backdropFilter: 'blur(8px)' }}\n        onClick={handleClose}\n      />\n\n      <div className=\"relative w-full max-w-sm\">\n        <div\n          className={`relative isolate rounded-2xl border shadow-2xl p-4 max-h-[90vh] overflow-y-auto transition-all ${\n            isDarkMode \n              ? 'border-[#B19CD9]/30 bg-gradient-to-b from-[#1a1625]/95 to-[#0d0a15]/95'\n              : 'border-gray-200 bg-white'\n          } ${\n            isClosing\n              ? 'modal-fade-out'\n              : 'modal-content-fade-in'\n          }`}\n          style={isDarkMode ? {\n            boxShadow: '0 0 30px rgba(177, 156, 217, 0.3)',\n          } : {}}\n        >\n          <div className=\"flex justify-between items-center mb-4\">\n            <h3 className={`text-lg font-semibold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n              Select Date\n            </h3>\n            <button\n              onClick={handleClose}\n              className={`p-1 rounded-lg transition-colors ${\n                isDarkMode ? 'text-gray-400 hover:text-white' : 'text-gray-500 hover:text-gray-700'\n              }`}\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n\n          <div className=\"flex items-center justify-between mb-4\">\n            <button\n              type=\"button\"\n              onClick={handlePrevMonth}\n              className={`p-2 rounded-lg transition-colors ${\n                isDarkMode ? 'text-[#B19CD9] hover:bg-[#B19CD9]/20' : 'text-[#9C7BD3] hover:bg-[#9C7BD3]/10'\n              }`}\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n            </button>\n            \n            <div className=\"flex items-center gap-2\">\n              <select\n                value={currentMonth.getMonth()}\n                onChange={handleMonthChange}\n                className={`text-sm font-semibold bg-transparent border-none cursor-pointer focus:outline-none ${\n                  isDarkMode ? 'text-white' : 'text-gray-900'\n                }`}\n              >\n                {months.map((month, index) => (\n                  <option key={month} value={index} className={isDarkMode ? 'bg-[#1a1625]' : 'bg-white'}>\n                    {month}\n                  </option>\n                ))}\n              </select>\n              <select\n                value={currentMonth.getFullYear()}\n                onChange={handleYearChange}\n                className={`text-sm font-semibold bg-transparent border-none cursor-pointer focus:outline-none ${\n                  isDarkMode ? 'text-white' : 'text-gray-900'\n                }`}\n              >\n                {years.map((year) => (\n                  <option key={year} value={year} className={isDarkMode ? 'bg-[#1a1625]' : 'bg-white'}>\n                    {year}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <button\n              type=\"button\"\n              onClick={handleNextMonth}\n              className={`p-2 rounded-lg transition-colors ${\n                isDarkMode ? 'text-[#B19CD9] hover:bg-[#B19CD9]/20' : 'text-[#9C7BD3] hover:bg-[#9C7BD3]/10'\n              }`}\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n              </svg>\n            </button>\n          </div>\n\n          <DatePicker\n            key={currentMonth.toISOString()}\n            selected={selectedDate}\n            onSelect={handleSelect}\n            month={currentMonth}\n            isDarkMode={isDarkMode}\n            onTodayClick={(date) => {\n              // Jump to today and reflect selection in the picker view\n              // Use the first day of the month to ensure the view centers on the correct month\n              const firstOfMonth = new Date(date.getFullYear(), date.getMonth(), 1);\n              setCurrentMonth(firstOfMonth);\n              setSelectedDate(date);\n            }}\n          />\n\n          <div className=\"flex gap-2 mt-4\">\n            <button\n              onClick={handleClose}\n              className={`flex-1 py-3 rounded-xl border transition-all font-medium ${\n                isDarkMode\n                  ? 'border-[#B19CD9]/40 text-white/80 hover:text-white hover:bg-white/10'\n                  : 'border-gray-300 text-gray-700 hover:bg-gray-100'\n              }`}\n            >\n              Cancel\n            </button>\n            <button\n              onClick={() => {\n                if (selectedDate) {\n                  onChange(format(selectedDate, 'yyyy-MM-dd'));\n                  handleClose();\n                }\n              }}\n              disabled={!selectedDate}\n              className={`flex-1 py-3 rounded-xl font-medium transition-all ${\n                selectedDate\n                  ? 'bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white hover:shadow-[0_0_20px_rgba(177,156,217,0.5)]'\n                  : isDarkMode\n                    ? 'bg-[#B19CD9]/30 text-white/50 cursor-not-allowed'\n                    : 'bg-[#B19CD9]/30 text-gray-400 cursor-not-allowed'\n              }`}\n            >\n              Confirm\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  return ReactDOM.createPortal(modal, document.body);\n};\n\nexport default CalendarPickerModal;\n","import React, { useState, useMemo, useEffect } from 'react';\nimport WheelPicker from './WheelPicker';\nimport { timeService } from '../../core/timeService';\nimport { useTheme } from '../../contexts/ThemeContext';\n\nconst getToday = () => new Date(timeService.now());\n\r\ninterface DateWheelPickerModalProps {\r\n  isOpen: boolean;\r\n  value: string;\r\n  onChange: (date: string) => void;\r\n  onClose: () => void;\r\n  minDate?: string;\r\n  maxDate?: string;\r\n}\r\n\r\nconst DateWheelPickerModal: React.FC<DateWheelPickerModalProps> = ({\n  isOpen,\n  value,\n  onChange,\n  onClose,\n  minDate,\n  maxDate,\n}) => {\n  const { isDarkMode } = useTheme();\n  const [localDate, setLocalDate] = useState(value);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const [isClosing, setIsClosing] = useState(false);\r\n\r\n  useEffect(() => {\n    if (isOpen) {\n      setIsVisible(true);\n      setIsClosing(false);\n      setLocalDate(value);\n    }\n  }, [isOpen, value]);\n\n  const handleClose = () => {\n    if (isClosing) return;\n    setIsClosing(true);\n    const timer = setTimeout(() => {\n      setIsVisible(false);\n      setIsClosing(false);\n      onClose();\n    }, 200);\n    return () => clearTimeout(timer);\n  };\n\r\n  const { year, month, day } = useMemo(() => {\r\n    const [y, m, d] = localDate.split('-');\r\n    return { year: y, month: m, day: d };\r\n  }, [localDate]);\r\n\r\n  const years = useMemo(() => {\n    const currentYear = getToday().getFullYear();\n    const startYear = minDate\r\n      ? new Date(minDate).getFullYear()\r\n      : currentYear - 10;\r\n    const endYear = maxDate\r\n      ? new Date(maxDate).getFullYear()\r\n      : currentYear + 10;\r\n\r\n    return Array.from(\r\n      { length: endYear - startYear + 1 },\r\n      (_, i) => String(startYear + i)\r\n    );\r\n  }, [minDate, maxDate]);\r\n\r\n  const months = useMemo(\r\n    () =>\r\n      Array.from({ length: 12 }, (_, i) =>\r\n        String(i + 1).padStart(2, '0')\r\n      ),\r\n    []\r\n  );\r\n\r\n  const daysInMonth = useMemo(\r\n    () =>\r\n      new Date(parseInt(year), parseInt(month), 0).getDate(),\r\n    [year, month]\r\n  );\r\n\r\n  const days = useMemo(\r\n    () =>\r\n      Array.from({ length: daysInMonth }, (_, i) =>\r\n        String(i + 1).padStart(2, '0')\r\n      ),\r\n    [daysInMonth]\r\n  );\r\n\r\n  const monthNames = [\r\n    'Jan','Feb','Mar','Apr','May','Jun',\r\n    'Jul','Aug','Sep','Oct','Nov','Dec'\r\n  ];\r\n\r\n  if (!isVisible) return null;\r\n\r\n  const handleChange = (\r\n    type: 'year' | 'month' | 'day',\r\n    newValue: string\r\n  ) => {\r\n    let newYear = parseInt(year);\r\n    let newMonth = parseInt(month);\r\n    let newDay = parseInt(day);\r\n\r\n    if (type === 'year') newYear = parseInt(newValue);\r\n    if (type === 'month') newMonth = parseInt(newValue);\r\n    if (type === 'day') newDay = parseInt(newValue);\r\n\r\n    const daysInNewMonth = new Date(\r\n      newYear,\r\n      newMonth,\r\n      0\r\n    ).getDate();\r\n\r\n    if (newDay > daysInNewMonth) {\r\n      newDay = daysInNewMonth;\r\n    }\r\n\r\n    const formatted = `${newYear}-${String(\r\n      newMonth\r\n    ).padStart(2, '0')}-${String(newDay).padStart(\r\n      2,\r\n      '0'\r\n    )}`;\r\n\r\n    setLocalDate(formatted);\r\n  };\r\n\r\n  const handleDone = () => {\n    onChange(localDate);\n    handleClose();\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-[10001] flex items-center justify-center p-4\">\n      <div\n        className={`fixed inset-0 bg-black/40 ${\n          isClosing\n            ? 'backdrop-fade-out'\n            : 'backdrop-fade-in'\n        }`}\n        style={{ backdropFilter: 'blur(8px)' }}\n        onClick={handleClose}\n      />\n\r\n      <div className=\"relative w-full max-w-sm\">\n        <div\n          className={`relative isolate rounded-2xl border shadow-2xl p-6 max-h-[90vh] overflow-y-auto transition-all ${\n            isDarkMode \n              ? 'border-[#B19CD9]/30 bg-gradient-to-b from-[#1a1625]/95 to-[#0d0a15]/95'\n              : 'border-gray-200 bg-white'\n          } ${\n            isClosing\n              ? 'modal-fade-out'\n              : 'modal-content-fade-in'\n          }`}\n        >\n          <div className=\"flex justify-between items-center mb-4\">\n            <h3 className={`text-xl font-semibold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n              Select Date\n            </h3>\n            <div className=\"w-8\" />\n          </div>\n          <div className={`border-t mb-3 ${isDarkMode ? 'border-[#B19CD9]/20' : 'border-gray-200'}`}></div>\n\n          <div className=\"flex items-center justify-center gap-3 mb-4 px-4\">\n            <WheelPicker\r\n              value={month}\r\n              onChange={(v) =>\r\n                handleChange('month', v)\r\n              }\r\n              options={months}\r\n              format={(v) =>\r\n                monthNames[parseInt(v) - 1]\r\n              }\r\n            />\r\n\r\n            <WheelPicker\r\n              value={day}\r\n              onChange={(v) =>\r\n                handleChange('day', v)\r\n              }\r\n              options={days}\r\n            />\r\n\r\n            <WheelPicker\r\n              value={year}\r\n              onChange={(v) =>\r\n                handleChange('year', v)\r\n              }\r\n              options={years}\r\n            />\n          </div>\n\n          <div className=\"border-t border-[#B19CD9]/20 my-3\"></div>\n\n          <div className=\"flex gap-3\">\n            <button\n              onClick={handleClose}\n              className={`flex-1 py-3 rounded-xl border transition-all font-medium ${\n                isDarkMode\n                  ? 'border-[#B19CD9]/40 text-white/80 hover:text-white hover:bg-white/10'\n                  : 'border-gray-300 text-gray-700 hover:bg-gray-100'\n              }`}\n            >\n              Cancel\n            </button>\n\r\n            <button\r\n              onClick={handleDone}\r\n              className=\"flex-1 py-3 rounded-xl bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white font-medium hover:shadow-[0_0_20px_rgba(177,156,217,0.5)] transition-all\"\r\n            >\r\n              Done\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DateWheelPickerModal;\r\n","/**\n * Utility functions for common operations\n */\n\n/**\n * Debounce function to delay function execution\n * @param func Function to debounce\n * @param delay Delay in milliseconds\n * @returns Debounced function\n */\nexport const debounce = <T extends (...args: any[]) => any>(\n  func: T,\n  delay: number\n): ((...args: Parameters<T>) => void) => {\n  let timeoutId: NodeJS.Timeout;\n  return (...args: Parameters<T>) => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => func(...args), delay);\n  };\n};\n\n/**\n * Check if the device is a mobile device\n * @returns true if mobile device\n */\nexport const isMobile = (): boolean => {\n  if (typeof window === 'undefined') return false;\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth < 768;\n};\n\n/**\n * Get animation duration based on device\n * @returns animation duration in milliseconds\n */\nexport const getAnimationDuration = (): number => {\n  return isMobile() ? 0 : 300;\n};"],"names":["MEDICATIONS","id","name","defaultDose","halfLifeHours","titrationDoses","generateId","Math","random","toString","substr","formatDateShort","dateStr","Date","toLocaleDateString","month","day","formatFrequency","frequencyPerWeek","concat","PEPTIDE_PRESETS","category","defaultDoseUnit","defaultFrequency","defaultRoute","description","CATEGORY_COLORS","healing","growth_hormone","fat_loss","muscle","longevity","immune","skin","cognitive","other","CATEGORY_LABELS","FREQUENCY_LABELS","daily","every_other_day","every_3_days","every_35_days","every_4_days","every_5_days","every_6_days","weekly","twice_week","biweekly","triweekly","monthly","as_needed","ROUTE_LABELS","subcutaneous","intramuscular","intravenous","oral","topical","intranasal","sublingual","getTodayString","timeService","todayString","_ref","isOpen","onClose","onSave","editPeptide","useWheelForDate","isDarkMode","useTheme","setName","useState","setCategory","dose","setDose","frequency","setFrequency","preferredTime","setPreferredTime","route","setRoute","startDate","setStartDate","endDate","setEndDate","notes","setNotes","color","setColor","showDatePicker","setShowDatePicker","datePickerType","setDatePickerType","showPresets","setShowPresets","isVisible","setIsVisible","isClosing","setIsClosing","showFrequencyPicker","setShowFrequencyPicker","showRoutePicker","setShowRoutePicker","contentKey","setContentKey","useEffect","handleClose","document","body","classList","remove","timer","setTimeout","clearTimeout","handleSubmit","e","preventDefault","doseValue","parseFloat","trim","peptide","doseUnit","isActive","isArchived","createdAt","toISOString","updatedAt","cycles","openDatePicker","type","_jsxs","_Fragment","children","className","_jsx","style","backdropFilter","onClick","boxShadow","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","map","preset","defaultPreferredTime","prev","handlePresetSelect","backgroundColor","onSubmit","value","onChange","target","placeholder","required","Object","keys","cat","handleCategoryChange","borderColor","borderWidth","background","undefined","step","rows","values","c","DateWheelPickerModal","date","CalendarPickerModal","BottomSheetModal","title","options","entries","_ref2","label","onSelect","val","_ref3","INJECTION_SITES","setDate","time","setTime","now","nowDate","getHours","padStart","getMinutes","injectionSite","setInjectionSite","painLevel","setPainLevel","log","peptideId","includes","site","level","newDate","getFrequencyLabel","latestLog","currentTime","result","useMemo","intervalDays","getFrequencyDays","intervalMs","isDaily","preferredParts","split","preferredHours","parseInt","preferredMinutes","progress","timeRemaining","days","hours","isDue","isOverdue","isLoggedToday","daysSinceLastDose","lastLogDate","parseLocalDateTime","timeStr","year","Number","minutes","timeSinceLastLog","getTime","daysSinceLastLog","progressPercent","timeUntilNext","currentTimeInMinutes","preferredTimeInMinutes","preferredTarget","setHours","getDate","timeFromLastLogToTarget","min","lastLogMidnight","timeSinceMidnight","max","dueWindowStartMinutes","dueWindowMs","dueWindowEndMinutes","isWithinDueWindow","todayStr","toLocalDateString","isOverdueFlag","isDueFlag","todayMidnight","lastLogMidnight2","nextDueMidnight","overdueHours","overdueMinutes","todaysPreferred","overdueMs","floor","remainingMs","remainingDays","remainingHours","remainingMinutes","overdueDays","abs","overdueHoursAbs","debug","peptidePurple","progressColor","glowColor","isOverdueDaily","displayProgress","displayLabel","backgroundImage","animation","width","textShadow","process","ROUTE_ICONS","onLog","onEdit","onDelete","onToggleActive","frequencyDays","getDueWindowHours","showLogButton","logButtonText","PeptideProgressBar","transition","logs","height","chartOption","length","grouped","forEach","count","sortedData","sort","a","b","slice","isMobile","grid","top","right","bottom","left","xAxis","data","axisLine","lineStyle","axisLabel","fontSize","axisTick","show","yAxis","splitLine","tooltip","borderRadius","textStyle","formatter","params","series","smooth","itemStyle","areaStyle","x","y","x2","y2","colorStops","offset","ReactECharts","option","opts","renderer","CATEGORY_TABS","bigCard","bigCardText","smallCard","text","useThemeStyles","useTime","peptides","setPeptides","selectedCategory","setSelectedCategory","showAddModal","setShowAddModal","showLogModal","setShowLogModal","editingPeptide","setEditingPeptide","selectedPeptide","setSelectedPeptide","expandedCard","setExpandedCard","localStorage","getItem","deleteConfirm","setDeleteConfirm","isDeleteClosing","setIsDeleteClosing","showArchived","setShowArchived","setItem","removeItem","loaded","getPeptides","add","contains","handleCloseDeleteConfirm","filteredPeptides","filtered","filter","p","activePeptides","archivedPeptides","tab","reduce","sum","getPeptideLogsById","getLatestPeptideLog","isExpanded","PeptideCard","openLogModal","updated","_objectSpread","dbUpdatePeptide","handleToggleActive","PeptideChart","PeptideModal","dbAddPeptide","LogPeptideModal","addPeptideLog","dbDeletePeptide","selected","onTodayClick","months","Array","from","_","idx","addMonths","scrollRef","useRef","isFirstRender","current","container","middleIndex","middleMonthEl","scrollIntoView","behavior","block","weekDays","textColor","outsideColor","weekdayColor","accentColor","todayColor","renderMonth","monthDate","index","start","startOfMonth","end","endOfMonth","eachDayOfInterval","getMonthDays","startDayOfWeek","getDay","monthLabel","format","i","isSelected","isSameDay","isCurrentDay","isToday","isCurrentMonth","isSameMonth","handleDayClick","fontWeight","border","ref","selectedDate","setSelectedDate","getInitialMonth","parsed","getFullYear","getMonth","today","currentMonth","setCurrentMonth","currentYear","years","modal","handlePrevMonth","subMonths","newMonth","newYear","handleNextMonth","DatePicker","firstOfMonth","disabled","ReactDOM","minDate","maxDate","localDate","setLocalDate","m","startYear","endYear","String","daysInMonth","monthNames","handleChange","newValue","newDay","daysInNewMonth","formatted","WheelPicker","v","handleDone","window","test","navigator","userAgent","innerWidth"],"sourceRoot":""}