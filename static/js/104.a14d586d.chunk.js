"use strict";(self.webpackChunkglpal=self.webpackChunkglpal||[]).push([[104],{5104(e,t,a){a.r(t),a.d(t,{default:()=>B});var s=a(5043),o=a(2555),l=a(3490),i=a(2292),r=a(7638),n=a(4231),d=a(3547),c=a(8171),h=a(8907),m=a(7647),g=a(579);const x=()=>new Date(h.P.now()),p=e=>e.replace(/\s*\(.*?\)/g,"").trim(),u=e=>{let{data:t,goalWeight:a,unitSystem:h="metric",period:u="month",medicationData:b=[],visibleMedications:f,onLegendChange:y}=e;const[v,w]=(0,s.useState)(void 0),S=void 0!==f?f:v,{sortedData:j,minWeight:N,maxWeight:D,weightPadding:C}=(0,r.s)(t),k=(0,s.useRef)(null),A=(0,s.useMemo)(()=>j.length>0?j[0].date:x(),[j]),B=(0,s.useMemo)(()=>j.length>0?j[j.length-1].date:x(),[j]),{zoomStart:M,zoomEnd:L,visibleStartIndex:W,visibleEndIndex:E,totalPoints:I}=(0,n.Z)(A,B,u,x(),.7),z=(0,s.useMemo)(()=>new Date(B.getTime()+5184e6),[B]),O=(0,s.useMemo)(()=>{const e=[],t=new Date(A);for(;t<=z;)e.push(t.toLocaleDateString("en-US",{month:"short",day:"numeric"})),t.setDate(t.getDate()+1);return e},[A,z]),T=x().toLocaleDateString("en-US",{month:"short",day:"numeric"}),F=O.indexOf(T),P=(0,s.useMemo)(()=>0===j.length?null:j[j.length-1],[j]),R=(0,s.useMemo)(()=>P?O.indexOf(P.displayDate):-1,[P,O]),_=(0,s.useMemo)(()=>{if(j.length<7)return null;const e=[];for(let t=0;t<j.length;t++){const a=Math.max(0,t-Math.floor(3.5)),s=Math.min(j.length,t+Math.ceil(3.5)),o=j.slice(a,s),l=o.reduce((e,t)=>e+t.weight,0)/o.length;e.push([j[t].displayDate,l])}return e},[j]),U=(0,s.useMemo)(()=>{if(j.length<7||!_)return null;const e=[];for(let l=j.length-7;l<j.length;l++){const t=Math.max(0,l-Math.floor(3.5)),a=Math.min(j.length,l+Math.ceil(3.5)),s=j.slice(t,a);e.push(s.reduce((e,t)=>e+t.weight,0)/s.length)}if(e.length<2)return null;const t=(e[e.length-1]-e[0])/e.length,a=_[_.length-1][1],s=O.indexOf(j[j.length-1].displayDate),o=[];for(let l=1;l<=60;l++){const e=s+l;if(e<O.length){const s=a+t*l;o.push([O[e],s])}}return o},[j,O,_]),Y=(0,s.useMemo)(()=>{if(!b||0===b.length)return[];const e=[...b].sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),t=Array.from(new Set(e.map(e=>e.medication))),a={};t.forEach((e,t)=>{a[e]=(0,c.xb)(t)});const s=[],o={};for(const r of e){const e=o[r.medication];var l;if(void 0===e)o[r.medication]=r.dose,s.push({date:r.date,dose:r.dose,medication:r.medication,color:(null===(l=a[r.medication])||void 0===l?void 0:l.stroke)||"#4ADEA8"});else if(r.dose>e){var i;o[r.medication]=r.dose,s.push({date:r.date,dose:r.dose,medication:r.medication,color:(null===(i=a[r.medication])||void 0===i?void 0:i.stroke)||"#4ADEA8"})}else r.dose<e&&(o[r.medication]=r.dose)}return s},[b]),V=(0,s.useMemo)(()=>{if(0===t.length)return{};const e=new Set((()=>{const e=E-W;if(e<=12)return Array.from({length:e},(e,t)=>W+t);const t=[];t.push(W);const a=(e-1)/11;for(let s=1;s<=10;s++)t.push(W+Math.round(s*a));return t.push(E),Array.from(new Set(t)).sort((e,t)=>e-t)})(j.length)),s=(()=>{if(0===Y.length)return[];const e=j.map(e=>e.displayDate),t=void 0===S;return Y.filter(e=>t||S&&S.includes(p(e.medication))).map(t=>{var a;const s=new Date(t.date),o=s.toLocaleDateString("en-US",{month:"short",day:"numeric"}),l=e.indexOf(o);if(-1===l){var i;const a=e.findIndex((e,t)=>new Date(A.getTime()+24*t*60*60*1e3)>=s);if(-1===a)return null;const o=e[a],l=null===(i=j[a])||void 0===i?void 0:i.weight;return l?{value:[o,l],dose:t.dose,medication:t.medication,color:t.color}:null}const r=null===(a=j[l])||void 0===a?void 0:a.weight;return r?{value:[o,r],dose:t.dose,medication:t.medication,color:t.color}:null}).filter(Boolean)})();return{backgroundColor:"transparent",animation:!(0,m.Fr)(),tooltip:{trigger:"axis",backgroundColor:"rgba(20, 15, 35, 0.95)",borderColor:"rgba(177, 156, 217, 0.4)",borderWidth:1,borderRadius:12,padding:[12,16],extraCssText:"box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4); backdrop-filter: blur(10px);",textStyle:{color:"#E2E8F0",fontSize:13},formatter:e=>{if(!e||!e.length)return"";const t=e[0],a=t.value[1],s=(0,i.ck)(a,h),o=j.findIndex(e=>e.displayDate===t.axisValue),l=o>=0?new Date(A.getTime()+24*o*60*60*1e3):new Date,r="".concat(t.axisValue," ").concat(l.getFullYear());let n="";if(_&&o>=0&&o<_.length){const e=_[o][1],t=(0,i.ck)(e,h);n='\n              <div style="display: flex; align-items: center; gap: 8px; margin-top: 4px;">\n                <span style="width: 8px; height: 8px; border-radius: 50%; background: #4ADEA8; box-shadow: 0 0 6px #4ADEA880;"></span>\n                <span style="color: #94a3b8;">Trend:</span>\n                <span style="font-weight: 600; color: #4ADEA8;">'.concat(t,"</span>\n              </div>")}return'<div style="font-weight: 600; margin-bottom: 4px;">'.concat(r,'</div>\n            <div style="display: flex; align-items: center; gap: 8px;">\n              <span style="width: 8px; height: 8px; border-radius: 50%; background: #9C7BD3; box-shadow: 0 0 6px #9C7BD380;"></span>\n              <span style="color: #94a3b8;">Weight:</span>\n              <span style="font-weight: 600; color: #fff;">').concat(s,"</span>\n            </div>").concat(n)}},legend:{data:Y.length>0?Array.from(new Set(b.map(e=>p(e.medication)))):[],bottom:0,icon:"circle",itemWidth:12,itemHeight:12,textStyle:{fontSize:12,color:"#94a3b8"},formatter:e=>p(e),tooltip:{trigger:"item"}},grid:{top:0,left:10,right:10,bottom:25,containLabel:!0},xAxis:{type:"category",data:O,boundaryGap:!1,axisLine:{lineStyle:{color:"rgba(156, 123, 211, 0.2)"}},axisTick:{lineStyle:{color:"rgba(156, 123, 211, 0.2)"}},axisLabel:{fontSize:12,color:"#94a3b8",margin:10},splitLine:{show:!1}},yAxis:{type:"value",position:"right",scale:!0,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#94a3b8",fontSize:11,margin:10,formatter:e=>(0,i.ck)(e,h)},splitLine:{lineStyle:{color:"rgba(156, 123, 211, 0.1)",type:"dashed"}}},series:[{name:"Weight",type:"line",z:10,smooth:!0,showSymbol:!1,symbol:"none",lineStyle:{width:2,color:"#9C7BD3"},itemStyle:{color:"#9C7BD3",borderColor:"#2D1B4E",borderWidth:2},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(156, 123, 211, 0.3)"},{offset:1,color:"rgba(156, 123, 211, 0.02)"}]}},data:j.map(e=>[e.displayDate,e.weight]),markLine:{silent:!0,symbol:"none",lineStyle:{color:"rgba(74, 222, 168, 0.6)",type:"dashed",width:2},data:[{yAxis:a,label:{show:!0,position:"insideStartTop",formatter:"Goal",color:"#4ADEA8",fontSize:12,padding:[0,0,0,20]}},...F>=0?[{xAxis:T,lineStyle:{type:"dotted",width:2,color:"#94A3B8"},label:{show:!1}}]:[]]}},...P&&R>=0?[{name:"LastWeight",type:"scatter",z:20,data:[{value:[P.displayDate,P.weight],symbolSize:12}],symbol:"circle",symbolSize:14,itemStyle:{color:"#4ADEA8",borderColor:"#1a3d2e",borderWidth:3,shadowBlur:12,shadowColor:"#4ADEA899"},label:{show:!0,position:"top",formatter:e=>Math.round((0,i.Qo)(e.value[1],h))+("imperial"===h?"lbs":"kg"),color:"#4ADEA8",fontSize:10,fontWeight:"bold",distance:8,backgroundColor:"rgba(0, 0, 0, 0.9)",borderRadius:4,borderColor:"#4ADEA8",borderWidth:1,padding:[4,6],textShadowColor:"rgba(0,0,0,0.8)",textShadowBlur:4,textShadowOffsetX:1,textShadowOffsetY:1}}]:[],{name:"WeightDots",type:"scatter",z:10,data:j.map((e,t)=>(0,o.A)((0,o.A)({},e),{},{index:t})).filter(t=>e.has(t.index)).map(e=>({value:[e.displayDate,e.weight],itemStyle:{color:"#9C7BD3",borderColor:"#2D1B4E",borderWidth:2,shadowBlur:8,shadowColor:"#9C7BD399"}})),symbol:"circle",symbolSize:10,label:{show:!0,position:"top",formatter:e=>Math.round((0,i.Qo)(e.value[1],h))+("imperial"===h?"lbs":"kg"),color:"#E2E8F0",fontSize:10,distance:8,backgroundColor:"rgba(0, 0, 0, 0.8)",borderRadius:4,borderColor:"rgba(0,0,0,0.4)",borderWidth:1,padding:[2,2],textShadowColor:"rgba(0,0,0,0.8)",textShadowBlur:4,textShadowOffsetX:1,textShadowOffsetY:1}},...s.length>0?[{name:"DoseChanges",type:"scatter",z:20,data:s.map(e=>({value:[e.value[0],e.value[1],e.dose],itemStyle:{color:e.color,borderColor:"#1a3d2e",borderWidth:2,shadowBlur:8,shadowColor:e.color+"99"}})),symbol:"pin",symbolSize:12,symbolOffset:[0,-40],label:{show:!0,position:"right",formatter:e=>e.value[2]+"mg",color:"#fff",fontSize:10,distance:2,backgroundColor:"rgba(0, 0, 0, 0.8)",borderRadius:4,borderColor:"rgba(0,0,0,0.4)",borderWidth:1,padding:[2,2],textShadowColor:"rgba(0,0,0,0.8)",textShadowBlur:4,textShadowOffsetX:1,textShadowOffsetY:1}}]:[],...Array.from(new Set(b.map(e=>p(e.medication)))).map(e=>{var t;b.find(t=>p(t.medication)===e);const a=Array.from(new Set(b.map(e=>p(e.medication)))),s={};return a.forEach((e,t)=>{s[e]=(0,c.xb)(t)}),{name:e,type:"scatter",data:[],itemStyle:{color:(null===(t=s[e])||void 0===t?void 0:t.stroke)||"#4ADEA8"},symbol:"circle",symbolSize:8}}),..._&&_.length>0?[{name:"Trend",type:"line",z:3,smooth:.4,data:_,symbol:"none",lineStyle:{width:2,color:"#4ADEA8",type:"solid",shadowBlur:8,shadowColor:"#4ADEA8"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(74, 222, 168, 0.12)"},{offset:1,color:"rgba(74, 222, 168, 0.01)"}]}}}]:[],...U&&U.length>0?[{name:"Projection",type:"line",z:2,smooth:.4,data:U,symbol:"none",lineStyle:{width:2,type:"dashed",color:{type:"linear",x:0,y:0,x2:1,y2:0,colorStops:[{offset:0,color:"rgba(74, 222, 168, 0.6)"},{offset:1,color:"rgba(74, 222, 168, 0.05)"}]}}}]:[]],dataZoom:[{type:"inside",start:M,end:L,zoomOnMouseWheel:!0,moveOnMouseWheel:!0}]}},[t,j,N,D,C,a,h,M,L,b,Y,S,F,T,O,z,R,U,_]);return 0===t.length?(0,g.jsx)(d.A,{title:"No weight data yet",description:"Log your first weight to see the chart"}):(0,g.jsx)("div",{className:"w-full h-full relative",children:(0,g.jsx)(l.A,{ref:k,option:V,style:{height:"100%",width:"100%",opacity:1},opts:{renderer:"svg"},onEvents:{legendselectchanged:e=>{const{selected:t}=e,a=Array.from(new Set(b.map(e=>p(e.medication)))).filter(e=>!1!==t[e]);y&&y(a),w(a)}}})})};var b=a(9396),f=a(3759),y=a(8421);const v=e=>{let{weights:t,totalLoss:a,startWeight:s,goalWeight:o,profile:l}=e;const{bigCard:r,bigCardText:n,smallCard:d,text:c}=(0,y.$E)(),m=(null===l||void 0===l?void 0:l.unitSystem)||"metric";return(0,g.jsxs)("div",{className:r,children:[(0,g.jsx)("h1",{className:n.title,style:{textShadow:"0 0 15px var(--accent-purple-light-shadow)"},children:"Performance Overview"}),(0,g.jsx)("div",{className:"border-t border-[#B19CD9]/20 mb-3"}),(0,g.jsxs)("div",{className:"space-y-3 mb-3",children:[(0,g.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,g.jsxs)("div",{className:d,children:[(0,g.jsx)("p",{className:c.label,children:"Progress Rate"}),(0,g.jsx)("div",{className:"text-left",children:(0,g.jsxs)("p",{className:c.value,children:[(a/(s-o)*100).toFixed(1),"%"]})})]}),(0,g.jsxs)("div",{className:d,children:[(0,g.jsx)("p",{className:c.label,children:"Best Week"}),(0,g.jsx)("div",{className:"text-left",children:(0,g.jsxs)("p",{className:c.value,children:["-",(0,i.ck)(f.Jp.calculateBestWeek(t),m)]})})]}),(0,g.jsxs)("div",{className:d,children:[(0,g.jsx)("p",{className:c.label,children:"Time Active"}),(0,g.jsx)("div",{className:"text-left",children:(0,g.jsx)("p",{className:c.value,children:(()=>{if(0===t.length)return"No data";const e=new Date(t[0].date),a=h.P.nowDate(),s=Math.floor((a.getTime()-e.getTime())/864e5);return 0===s?"Today":1===s?"1 Day":"".concat(s," Days")})()})})]})]}),(0,g.jsxs)("div",{className:"grid grid-cols-3 gap-2 sm:gap-3",children:[(0,g.jsxs)("div",{className:d,children:[(0,g.jsx)("p",{className:c.label,children:"Start Weight"}),(0,g.jsx)("div",{className:"text-left",children:(0,g.jsx)("p",{className:c.value,children:(0,i.ck)(s,m)})})]}),(0,g.jsxs)("div",{className:d,children:[(0,g.jsx)("p",{className:c.label,children:"Best Month"}),(0,g.jsx)("div",{className:"text-left",children:(0,g.jsxs)("p",{className:c.value,children:["-",(0,i.ck)(f.Jp.calculateBestMonth(t),m)]})})]}),(0,g.jsxs)("div",{className:d,children:[(0,g.jsx)("p",{className:c.label,children:"Total Loss"}),(0,g.jsx)("div",{className:"text-left",children:(0,g.jsx)("p",{className:c.value,children:(0,i.ck)(a,m)})})]})]})]})]})};var w=a(7012);const S=e=>{let{profile:t,currentWeight:a}=e;const s=(0,w.AB)(t,a),o=(0,w.f1)(s,t.activityLevel),l=t.unitSystem||"metric",r="imperial"===l?1.1:.5,n="imperial"===l?2.2:1,d=Math.round(550),c=Math.round(1100),h=Math.round(o-d),m=Math.round(o-c),{bigCardText:x,tdeeCard:p,tdeeText:u}=(0,y.$E)();return(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{className:x.title,style:{textShadow:"0 0 15px var(--accent-purple-light-shadow)"},children:"Weight Loss Calorie Targets"}),(0,g.jsx)("div",{className:"border-t border-[#B19CD9]/20 mt-3"}),(0,g.jsxs)("div",{className:"space-y-2 my-3",children:[(0,g.jsxs)("div",{className:p,children:[(0,g.jsxs)("div",{children:[(0,g.jsxs)("p",{className:u.label,children:["Loss ",r," ","imperial"===l?"lbs":"kg","/week"]}),(0,g.jsx)("p",{className:u.subtitle,children:"Gradual Pace"})]}),(0,g.jsxs)("div",{className:"text-right",children:[(0,g.jsxs)("p",{className:u.value,children:[h.toLocaleString()," kcal/day"]}),(0,g.jsxs)("p",{className:u.subtitle,children:[d.toLocaleString()," kcal deficit"]})]})]}),(0,g.jsxs)("div",{className:p,children:[(0,g.jsxs)("div",{children:[(0,g.jsxs)("p",{className:u.label,children:["Loss ",n," ","imperial"===l?"lbs":"kg","/week"]}),(0,g.jsx)("p",{className:u.subtitle,children:"Moderate Pace"})]}),(0,g.jsxs)("div",{className:"text-right",children:[(0,g.jsxs)("p",{className:u.value,children:[m.toLocaleString()," kcal/day"]}),(0,g.jsxs)("p",{className:u.subtitle,children:[c.toLocaleString()," kcal deficit"]})]})]}),(0,g.jsxs)("div",{className:p,children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:u.label,children:"Maintenance"}),(0,g.jsx)("p",{className:u.subtitle,children:"Current maintenance"})]}),(0,g.jsxs)("div",{className:"text-right",children:[(0,g.jsxs)("p",{className:u.value,children:[o.toLocaleString()," cal/day"]}),(0,g.jsx)("p",{className:u.subtitle,children:"No deficit"})]})]})]})]}),(0,g.jsxs)("div",{className:"border-t border-card-border pt-4",children:[(0,g.jsxs)("h4",{className:x.title,style:{textShadow:"0 0 15px var(--accent-purple-light-shadow)"},children:["Based on Current Weight: ",(0,i.ck)(a,l)]}),(0,g.jsx)("p",{className:"text-xs text-text-muted",children:"These calculations use the Mifflin-St Jeor equation, considered the most accurate BMR formula. Individual results may vary based on body composition and genetics."})]})]})};var j=a(7766);const N=e=>{let{onAddWeight:t,unitSystem:a="metric",lastWeight:o,useWheelForNumbers:l=!1}=e;const{isDarkMode:r}=(0,y.DP)(),n=o?String(Math.round(10*o)/10):"imperial"===a?"180":"80",[d,c]=(0,s.useState)(!1),[h,m]=(0,s.useState)(""),x="imperial"===a?1100:500,p=()=>{const e=parseFloat(h);if(e&&e>0&&e<x){const s=(0,i.dn)(e,a);t(s),m("")}};return(0,g.jsxs)("div",{children:[l?(0,g.jsx)("button",{type:"button",onClick:()=>c(!0),className:"w-full px-3 py-2 border rounded-lg text-sm text-left transition-all ".concat(r?"border-[#B19CD9]/50 bg-black/40 text-[#B19CD9]":"border-gray-300 bg-white text-gray-900"),children:"+ Log Weight"}):(0,g.jsxs)("div",{className:"flex gap-2",children:[(0,g.jsx)("input",{type:"number",value:h,onChange:e=>m(e.target.value),onKeyDown:e=>"Enter"===e.key&&p(),className:"flex-1 px-3 py-2 border rounded-lg text-sm transition-all ".concat(r?"border-[#B19CD9]/50 bg-black/40 text-[#B19CD9] placeholder-[#B19CD9]/50":"border-gray-300 bg-white text-gray-900 placeholder-gray-400"),placeholder:"Enter weight (".concat("imperial"===a?"lbs":"kg",")")}),(0,g.jsx)("button",{type:"button",onClick:p,className:"px-4 py-2 bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white rounded-lg text-sm font-medium",children:"Add"})]}),(0,g.jsx)(j.A,{isOpen:d,onSave:e=>{const s=parseFloat(e);if(s&&s>0&&s<x){const e=(0,i.dn)(s,a);t(e)}},onClose:()=>c(!1),min:1,max:x,label:"Select Weight",decimals:1,defaultValue:n})]})};var D=a(7950);const C=e=>{let{className:t=""}=e;const[a,o]=(0,s.useState)(!1),[l,i]=(0,s.useState)({top:0,left:0}),r=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(a&&r.current){const e=r.current.getBoundingClientRect();i({top:e.top+e.height+8,left:e.left+e.width/2})}},[a]);const n=a?(0,g.jsx)("div",{className:"fixed z-[9999] w-32 p-2 bg-black/90 backdrop-blur-lg rounded-lg shadow-xl border border-[#9C7BD3]/20",style:{top:l.top,left:l.left,transform:"translateX(-50%)"},children:(0,g.jsx)("div",{className:"text-white text-xs space-y-1",children:[{abbreviation:"UW",description:"Underweight",range:"BMI < 18.5"},{abbreviation:"NW",description:"Normal Weight",range:"BMI 18.5-24.9"},{abbreviation:"OW",description:"Overweight",range:"BMI 25-29.9"},{abbreviation:"OB I",description:"Obesity Class I",range:"BMI 30-34.9"},{abbreviation:"OB II",description:"Obesity Class II",range:"BMI 35-39.9"},{abbreviation:"OB III",description:"Obesity Class III",range:"BMI \u2265 40"}].map(e=>(0,g.jsxs)("div",{className:"flex justify-between items-center text-[10px]",children:[(0,g.jsxs)("span",{className:"font-medium",children:[e.abbreviation,":"]}),(0,g.jsxs)("div",{className:"text-right",children:[(0,g.jsx)("div",{className:"text-gray-300",children:e.description}),(0,g.jsx)("div",{className:"text-gray-400",children:e.range})]})]},e.abbreviation))})}):null;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"relative inline-block ".concat(t),children:(0,g.jsx)("button",{ref:r,className:"text-[#9C7BD3] hover:text-[#B19CD9] transition-colors duration-200 cursor-help",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onClick:()=>o(!a),"aria-label":"BMI category information",children:(0,g.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,g.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,g.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,g.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})})}),(0,D.createPortal)(n,document.body)]})};var k=a(5109),A=a(6855);const B=e=>{let{weights:t,dosesEntries:a,profile:o,goalWeight:l,onAddWeight:r,chartPeriod:n,onChartPeriodChange:d,useWheelForNumbers:c=!0}=e;const{bigCard:h,bigCardText:m,smallCard:x,text:p}=(0,y.$E)(),f=l||o.goalWeight||80,w=(0,A.d0)(t,o,f),j=o.unitSystem||"metric",D=t.length>0?t[t.length-1].weight:null,B=D?(0,i.Qo)(D,j):null,M=(0,s.useMemo)(()=>a.filter(e=>!e.isManual),[a]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:h,children:[(0,g.jsx)("h1",{className:m.title,style:{textShadow:"0 0 15px var(--accent-purple-light-shadow)"},children:"Dashboard"}),(0,g.jsx)("div",{className:"border-t border-[#B19CD9]/20 mb-3"}),(0,g.jsxs)("div",{className:"space-y-3 mb-3",children:[(0,g.jsxs)("div",{className:"grid grid-cols-3 gap-2 sm:gap-3 overflow-visible",children:[(0,g.jsxs)("div",{className:x,children:[(0,g.jsx)("p",{className:p.label,children:"Current"}),(0,g.jsx)("p",{className:p.value,children:(0,i.ck)(w.currentWeight,j)})]}),(0,g.jsxs)("div",{className:x,children:[(0,g.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,g.jsx)("p",{className:p.label,children:"BMI"}),(0,g.jsx)(C,{})]}),(0,g.jsxs)("p",{className:p.totalLossValue,style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,g.jsx)("span",{style:{display:"inline-block",whiteSpace:"nowrap"},children:w.bmi.toFixed(1)}),(0,g.jsxs)("span",{className:"".concat(p.bmiCategory," ").concat(w.bmiCategory.color),children:["(",w.bmiCategory.category,")"]})]})]}),(0,g.jsxs)("div",{className:x,children:[(0,g.jsx)("p",{className:p.label,children:"Total Loss"}),(0,g.jsxs)("p",{className:p.totalLossValue,style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,g.jsx)("span",{style:{display:"inline-block",whiteSpace:"nowrap"},children:(0,i.ck)(w.totalLoss,j)}),(0,g.jsxs)("span",{className:p.percentage,children:["(",w.totalLossPercentage.toFixed(1),"%)"]})]})]})]}),(0,g.jsxs)("div",{className:"grid grid-cols-3 gap-2 sm:gap-3",children:[(0,g.jsxs)("div",{className:x,children:[(0,g.jsx)("p",{className:p.label,children:"Weekly Avg"}),(0,g.jsxs)("p",{className:p.value,children:[w.weeklyAverageLoss>0?"-":"",(0,i.ck)(Math.abs(w.weeklyAverageLoss),j)]})]}),(0,g.jsxs)("div",{className:x,children:[(0,g.jsx)("p",{className:p.label,children:"Monthly Avg"}),(0,g.jsxs)("p",{className:p.value,children:[w.monthlyAverageLoss>0?"-":"",(0,i.ck)(Math.abs(w.monthlyAverageLoss),j)]})]}),(0,g.jsxs)("div",{className:x,children:[(0,g.jsx)("p",{className:p.label,children:"To Lose"}),(0,g.jsx)("p",{className:p.value,children:(0,i.ck)(w.currentWeight-f,j)})]})]})]}),(0,g.jsx)("div",{className:"border-t border-[#B19CD9]/20 my-3"}),(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)(k.A,{value:n,onChange:d}),(0,g.jsx)("div",{className:"h-64 sm:h-72",children:(0,g.jsx)(u,{data:t,goalWeight:f,unitSystem:j,period:n,medicationData:a})})]}),(0,g.jsx)("div",{children:(0,g.jsx)("div",{className:"h-64 sm:h-72",children:(0,g.jsx)(b.A,{data:M,period:n})})}),(0,g.jsx)("div",{className:"border-t border-[#B19CD9]/20 my-3"}),(0,g.jsx)("div",{className:"mb-6",children:(0,g.jsx)(N,{onAddWeight:r,unitSystem:j,lastWeight:B,useWheelForNumbers:c})})]})]}),(0,g.jsx)(v,{weights:t,totalLoss:w.totalLoss,startWeight:w.startWeight,goalWeight:f,profile:o}),(0,g.jsx)("div",{className:h,children:(0,g.jsx)(S,{profile:o,currentWeight:w.currentWeight})})]})}},9396(e,t,a){a.d(t,{A:()=>p});var s=a(2555),o=a(5043),l=a(3490),i=a(7638),r=a(4231),n=a(7012),d=a(8171);var c=a(3547),h=a(6855),m=a(7647),g=a(579);const x=e=>e.replace(/\s*\(.*?\)/g,"").trim(),p=e=>{let{data:t,period:a,onLegendChange:p}=e;const u=(0,o.useRef)(null),{medications:b,medicationColors:f,dosesByMed:y,halfLifeByMed:v}=(0,i.B)(t),w=(0,h.z5)(1e3),S=new Date(w),j=(0,o.useMemo)(()=>t.length>0?new Date(Math.min(...t.map(e=>new Date(e.date).getTime()))):new Date,[t]),N=(0,o.useMemo)(()=>t.length>0?new Date(Math.max(...t.map(e=>new Date(e.date).getTime()))):new Date,[t]),D=(0,o.useMemo)(()=>new Date(N.getTime()+5184e6),[N]),{xAxisDates:C,todayIndex:k,zoomStart:A,zoomEnd:B,visibleStartIndex:M,visibleEndIndex:L}=(0,r.l)(j,D,a,14,S),W=(0,o.useMemo)(()=>{if(0===t.length)return{};const e=(e=>{let{medications:t,medicationColors:a,dosesByMed:o,halfLifeByMed:l,firstDate:i,lastDate:r,xAxisDates:c,todayIndex:h,visibleStartIndex:m,visibleEndIndex:g}=e;const x={},p={},u=new Set,b={};t.forEach(e=>{x[e]=new Set,p[e]={},o[e].forEach(t=>{const a=new Date(t.date.getTime()+864e5).toLocaleDateString("en-US",{month:"short",day:"numeric"});x[e].add(a),p[e][a]=t.dose,u.add(a),b[a]=(b[a]||0)+t.dose})});const f=d.OK.combined,y=[],v=[],w=[],S=[],j=(Array.from(u),new Date(i));for(;j<=r;){let e=0;t.forEach(t=>{e+=(0,n.Rg)(o[t],l[t],new Date(j))});const a=j.toLocaleDateString("en-US",{month:"short",day:"numeric"}),s=u.has(a)?b[a]:void 0,i=isNaN(e)?null:e,r=c.indexOf(a);r<=h&&v.push([a,i]),r>=h&&w.push([a,i]),s&&S.push({name:a,value:[a,i],symbol:"circle",symbolSize:10,itemStyle:{color:f.stroke,borderColor:"#2D1B4E",borderWidth:2,shadowBlur:8,shadowColor:f.stroke+"99"}}),j.setDate(j.getDate()+1)}t.length>0&&y.push({name:"Combined",type:"line",smooth:!0,showSymbol:!1,symbol:"none",itemStyle:{color:f.stroke},lineStyle:{width:2,color:f.stroke},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:f.fill},{offset:1,color:f.fill.replace("0.3","0.02")}]}},emphasis:{lineStyle:{width:3},itemStyle:{opacity:0}},triggerLineEvent:!1,data:v},{name:"Combined_future",type:"line",smooth:!0,showSymbol:!1,symbol:"none",showInLegend:!1,lineStyle:{width:2,color:f.stroke,type:"dotted"},emphasis:{disabled:!0},triggerLineEvent:!1,data:w},{name:"Combined",type:"scatter",z:10,showInLegend:!1,emphasis:{scale:1.2},data:S}),y.forEach(e=>{if("scatter"===e.type&&e.data&&e.data.length>0){let t=null;e.data=e.data.map(e=>{const a=e.value[1];let o=!0;if(null!==t&&t>0&&Math.abs(a-t)/t<=.25&&(o=!1),o){t=a;const o=a<1?a.toFixed(2):a.toFixed(1);return(0,s.A)((0,s.A)({},e),{},{label:{show:!0,position:"top",formatter:o+"mg",color:"#E2E8F0",fontSize:10,distance:8,backgroundColor:"rgba(0, 0, 0, 0.8)",borderRadius:4,borderColor:"rgba(0,0,0,0.4)",borderWidth:1,padding:[2,2],textShadowColor:"rgba(0,0,0,0.8)",textShadowBlur:4,textShadowOffsetX:1,textShadowOffsetY:1}})}return(0,s.A)((0,s.A)({},e),{},{label:{show:!1}})})}}),y.forEach(e=>{if("scatter"===e.type&&e.data&&e.data.length>0){const t=e.data.filter(e=>{const t=c.indexOf(e.value[0]);return t>=m&&t<=g});if(t.length>6){const a=Math.floor(t.length/6);e.data=t.filter((e,t)=>t%a===0).slice(0,6)}}});const N=t.map(e=>{const t=[],s=[],d=[],m=a[e],g=new Date(i);for(;g<=r;){const a=(0,n.Rg)(o[e],l[e],new Date(g)),i=g.toLocaleDateString("en-US",{month:"short",day:"numeric"}),r=x[e].has(i)?p[e][i]:void 0,u=isNaN(a)?null:a,b=c.indexOf(i);b<=h&&t.push([i,u]),b>=h&&s.push([i,u]),r&&d.push({name:i,value:[i,u],symbol:"circle",symbolSize:10,itemStyle:{color:m.stroke,borderColor:"#2D1B4E",borderWidth:2,shadowBlur:8,shadowColor:m.stroke+"99"}}),g.setDate(g.getDate()+1)}return[{name:e,type:"line",smooth:!0,showSymbol:!1,symbol:"none",itemStyle:{color:m.stroke},lineStyle:{width:2,color:m.stroke},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:m.fill},{offset:1,color:m.fill.replace("0.3","0.02")}]}},emphasis:{lineStyle:{width:3},itemStyle:{opacity:0}},triggerLineEvent:!1,data:t},{name:e+"_future",type:"line",smooth:!0,showSymbol:!1,symbol:"none",showInLegend:!1,lineStyle:{width:2,color:m.stroke,type:"dotted"},emphasis:{disabled:!0},triggerLineEvent:!1,data:s},{name:e,type:"scatter",z:10,showInLegend:!1,emphasis:{scale:1.2},data:d}]}).flat();if(N.forEach(e=>{if("scatter"===e.type&&e.data&&e.data.length>0){let t=null;e.data=e.data.map(e=>{const a=e.value[1];let o=!0;if(null!==t&&t>0&&Math.abs(a-t)/t<=.25&&(o=!1),o){t=a;const o=a<1?a.toFixed(2):a.toFixed(1);return(0,s.A)((0,s.A)({},e),{},{label:{show:!0,position:"top",formatter:o+"mg",color:"#E2E8F0",fontSize:10,distance:8,backgroundColor:"rgba(0, 0, 0, 0.8)",borderRadius:4,borderColor:"rgba(0,0,0,0.4)",borderWidth:1,padding:[2,2],textShadowColor:"rgba(0,0,0,0.8)",textShadowBlur:4,textShadowOffsetX:1,textShadowOffsetY:1}})}return(0,s.A)((0,s.A)({},e),{},{label:{show:!1}})})}}),N.forEach(e=>{if("scatter"===e.type&&e.data&&e.data.length>0){const t=e.data.filter(e=>{const t=c.indexOf(e.value[0]);return t>=m&&t<=g});if(t.length>6){const a=Math.floor(t.length/6);e.data=t.filter((e,t)=>t%a===0).slice(0,6)}}}),h>=0){const e={silent:!0,symbol:"none",z:100,label:{show:!1},lineStyle:{type:"dotted",width:2,color:"#94A3B8"},data:[{xAxis:c[h]}]},a={name:"Today",type:"line",markLine:e,data:[],silent:!0,animation:!1,lineStyle:{opacity:0},areaStyle:{opacity:0}};return y.length>0&&(y[2].markLine=e),N.length>0&&(N[2].markLine=e),[...t.length>1?y:[],...N,a]}return[...t.length>1?y:[],...N]})({medications:b,medicationColors:f,dosesByMed:y,halfLifeByMed:v,firstDate:j,lastDate:D,xAxisDates:C,todayIndex:k,visibleStartIndex:M,visibleEndIndex:L});return{backgroundColor:"transparent",animation:!(0,m.Fr)(),tooltip:{trigger:"axis",backgroundColor:"rgba(20, 15, 35, 0.95)",borderColor:"rgba(177, 156, 217, 0.4)",borderWidth:1,borderRadius:12,padding:[12,16],extraCssText:"box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4); backdrop-filter: blur(10px);",textStyle:{color:"#E2E8F0",fontSize:13},formatter:e=>{if(!e||!e.length)return"";const t=e.filter(e=>"scatter"!==e.seriesType).map(e=>{var t;return(0,s.A)((0,s.A)({},e),{},{seriesName:(null===(t=e.seriesName)||void 0===t?void 0:t.replace("_future",""))||e.seriesName})}),a=[],o=new Set;for(const s of t)o.has(s.seriesName)||(o.add(s.seriesName),a.push(s));const l=a.filter(e=>{var t,a;return(null!==(t=null===(a=e.value)||void 0===a?void 0:a[1])&&void 0!==t?t:0)>0}),i=e[0].axisValue,r=C.indexOf(i),n=r>=0?new Date(j.getTime()+24*r*60*60*1e3):new Date,d="".concat(i," ").concat(n.getFullYear());if(0===l.length)return"".concat(d,'<div style="color: #94a3b8; font-size: 11px;">No active dose</div>');let c='<div style="font-weight: 600; margin-bottom: 8px; padding-bottom: 6px; border-bottom: 1px solid rgba(156, 123, 211, 0.2);">'.concat(d,"</div>");return l.forEach(e=>{var t,a;const s=e.color||"#9C7BD3",o=null!==(t=null===(a=e.value)||void 0===a?void 0:a[1])&&void 0!==t?t:0,l=o<1?o.toFixed(2):o.toFixed(1),i=x(e.seriesName);c+='<div style="display: flex; align-items: center; gap: 10px; margin: 4px 0;">\n              <span style="width: 10px; height: 10px; border-radius: 50%; background: '.concat(s,"; box-shadow: 0 0 6px ").concat(s,'80;"></span>\n              <span style="color: #94a3b8;">').concat(i,':</span>\n              <span style="font-weight: 600; color: #fff;">').concat(l," mg</span>\n            </div>")}),c}},legend:{data:b.length>1?["Combined",...b]:b,bottom:0,icon:"circle",itemWidth:12,itemHeight:12,textStyle:{fontSize:12,color:"#94a3b8"},formatter:e=>x(e),tooltip:{trigger:"item"}},dataZoom:[{type:"inside",start:A,end:B,zoomOnMouseWheel:!0,moveOnMouseWheel:!0}],grid:{top:0,left:10,right:10,bottom:25,containLabel:!0},xAxis:{type:"category",data:C,boundaryGap:!1,axisLine:{lineStyle:{color:"rgba(156, 123, 211, 0.2)"}},axisTick:{lineStyle:{color:"rgba(156, 123, 211, 0.2)"}},axisLabel:{fontSize:12,color:"#94a3b8"},splitLine:{show:!1}},yAxis:{type:"value",position:"right",min:0,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#94a3b8",fontSize:11,margin:10,formatter:e=>e.toFixed(1)+"mg"},splitLine:{lineStyle:{color:"rgba(156, 123, 211, 0.1)",type:"dashed"}}},series:e}},[t,b,f,y,v,j,N,C,k,A,B,M,L]);return 0===t.length?(0,g.jsx)(c.A,{title:"No dose data yet",description:"Log your first dose to see the chart"}):(0,g.jsx)("div",{className:"w-full h-full relative",children:(0,g.jsx)(l.A,{ref:u,option:W,style:{height:"100%",width:"100%",opacity:1},opts:{renderer:"svg"},onEvents:{legendselectchanged:e=>{var t;const{selected:a,name:s}=e,o=null===(t=u.current)||void 0===t?void 0:t.getEchartsInstance();if(!o)return;const l=a[s];"Combined"===s&&o.dispatchAction({type:l?"legendSelect":"legendUnSelect",name:"Combined_future"}),b.forEach(e=>{s===e&&o.dispatchAction({type:l?"legendSelect":"legendUnSelect",name:e+"_future"})})}}})})}},3547(e,t,a){a.d(t,{A:()=>o});a(5043);var s=a(579);const o=e=>{let{title:t,description:a}=e;return(0,s.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center text-text-muted",children:[(0,s.jsx)("p",{className:"text-sm",children:t}),(0,s.jsx)("p",{className:"text-xs mt-1",children:a})]})})}},5109(e,t,a){a.d(t,{A:()=>l});a(5043);var s=a(8421),o=a(579);const l=e=>{let{value:t,onChange:a}=e;const{button:l}=(0,s.$E)();return(0,o.jsx)("div",{className:"flex justify-center mb-3",children:(0,o.jsx)("div",{className:"grid grid-cols-4 gap-2 w-full",children:[{value:"week",label:"Week"},{value:"month",label:"Month"},{value:"90days",label:"90 Days"},{value:"all",label:"All Time"}].map(e=>(0,o.jsx)("button",{onClick:()=>a(e.value),className:"flex-1 px-2 py-2 text-sm rounded-lg transition-all duration-300 ".concat(t===e.value?"bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white shadow-[0_0_15px_rgba(177,156,217,0.4)]":"bg-[#B19CD9]/10 text-[#B19CD9] border border-[#B19CD9]/30 hover:bg-[#B19CD9]/20 hover:shadow-[0_0_10px_rgba(177,156,217,0.3)]"),children:e.label},e.value))})})}},7012(e,t,a){a.d(t,{AB:()=>s,Rg:()=>l,f1:()=>o});const s=(e,t)=>{const{age:a,gender:s,height:o}=e;return"male"===s?10*t+6.25*o-5*a+5:10*t+6.25*o-5*a-161},o=(e,t)=>Math.round(e*t),l=(e,t,a)=>e.reduce((e,s)=>{const o=(a.getTime()-s.date.getTime())/36e5;if(o<0)return e;let l;if(o<24){const e=o/24;l=s.dose*e}else{const e=o-24,a=Math.exp(-.693*e/t);l=s.dose*a}return e+l},0)},7647(e,t,a){a.d(t,{Fr:()=>s});const s=()=>"undefined"!==typeof window&&(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768)}}]);
//# sourceMappingURL=104.a14d586d.chunk.js.map