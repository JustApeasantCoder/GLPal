{"version":3,"file":"static/js/411.ea5f4319.chunk.js","mappings":"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","sources":["features/medication/LogTab.tsx","shared/components/DoseWheelPickerModal.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { GLP1Entry, GLP1Protocol, SideEffect, WeightEntry, WeightMacros, UserProfile, PeptideLogEntry, Peptide } from '../../types';\nimport { getMedicationManualEntries, getMedicationProtocols, saveMedicationManualEntries, getWeightEntries, saveWeightEntries, getPeptideLogs, getPeptides } from '../../shared/utils/database';\nimport { getMedicationColorByName } from '../../shared/utils/chartUtils';\nimport { useThemeStyles } from '../../contexts/ThemeContext';\nimport { convertWeightFromKg, getWeightUnit } from '../../shared/utils/unitConversion';\nimport DoseWheelPickerModal from '../../shared/components/DoseWheelPickerModal';\n\ninterface LogTabProps {\n  refreshKey?: number;\n  profile?: UserProfile;\n  useWheelForNumbers?: boolean;\n}\n\nconst getWeekStart = (date: Date): Date => {\n  const d = new Date(date);\n  const day = d.getDay();\n  const diff = d.getDate() - day + (day === 0 ? -6 : 1);\n  d.setDate(diff);\n  d.setHours(0, 0, 0, 0);\n  return d;\n};\n\nconst getWeekKey = (dateStr: string): string => {\n  const date = new Date(dateStr);\n  const weekStart = getWeekStart(date);\n  return weekStart.toISOString().split('T')[0];\n};\n\nconst getWeekLabel = (dateStr: string): string => {\n  const date = new Date(dateStr);\n  const weekStart = getWeekStart(date);\n  const weekEnd = new Date(weekStart);\n  weekEnd.setDate(weekEnd.getDate() + 6);\n  const formatOpts: Intl.DateTimeFormatOptions = { month: 'short', day: 'numeric' };\n  return `${weekStart.toLocaleDateString('en-US', formatOpts)} - ${weekEnd.toLocaleDateString('en-US', formatOpts)}`;\n};\n\nconst getMonthKey = (dateStr: string): string => {\n  const date = new Date(dateStr);\n  return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\n};\n\nconst getMonthLabel = (dateStr: string): string => {\n  const date = new Date(dateStr);\n  return date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });\n};\n\nconst COMMON_SIDE_EFFECTS = [\n  'Nausea',\n  'Vomiting',\n  'Diarrhea',\n  'Constipation',\n  'Abdominal Pain',\n  'Headache',\n  'Fatigue',\n  'Dizziness',\n  'Loss of Appetite',\n  'Heartburn',\n];\n\nconst LogTab: React.FC<LogTabProps> = ({ refreshKey, profile, useWheelForNumbers = true }) => {\n  const { bigCard, isDarkMode } = useThemeStyles();\n  const unitSystem = profile?.unitSystem || 'metric';\n  const weightUnit = getWeightUnit(unitSystem);\n  const bigCardText = {\n    title: \"text-lg font-bold text-text-primary mb-2\"\n  };\n  const [manualEntries, setManualEntries] = useState<GLP1Entry[]>([]);\n  const [protocols, setProtocols] = useState<GLP1Protocol[]>([]);\n  const [editingEntry, setEditingEntry] = useState<GLP1Entry | null>(null);\n  const [isDoseLogCollapsed, setIsDoseLogCollapsed] = useState(() => {\n    const saved = localStorage.getItem('glpal_dose_log_collapsed');\n    return saved === 'true';\n  });\n  const [sortBy, setSortBy] = useState<'date' | 'medication' | 'dose'>('date');\n  const [sortAsc, setSortAsc] = useState(false);\n  const [isSideEffectsVisible, setIsSideEffectsVisible] = useState(false);\n  const [isSideEffectsClosing, setIsSideEffectsClosing] = useState(false);\n  const [weightEntries, setWeightEntries] = useState<WeightEntry[]>([]);\n  const [isWeightLogCollapsed, setIsWeightLogCollapsed] = useState(() => {\n    const saved = localStorage.getItem('glpal_weight_log_collapsed');\n    return saved === 'true';\n  });\n  const [weightViewMode, setWeightViewMode] = useState<'daily' | 'weekly' | 'monthly'>('daily');\n  const [editingWeightEntry, setEditingWeightEntry] = useState<WeightEntry | null>(null);\n  const [editWeightNotes, setEditWeightNotes] = useState('');\n  const [editWeightMacros, setEditWeightMacros] = useState<WeightMacros>({ calories: 0, protein: 0, carbs: 0, fat: 0 });\n  const [isWeightModalVisible, setIsWeightModalVisible] = useState(false);\n  const [isWeightModalClosing, setIsWeightModalClosing] = useState(false);\n  const [peptideLogs, setPeptideLogs] = useState<PeptideLogEntry[]>([]);\n  const [peptides, setPeptides] = useState<Peptide[]>([]);\n  const [isPeptideLogCollapsed, setIsPeptideLogCollapsed] = useState(() => {\n    const saved = localStorage.getItem('glpal_peptide_log_collapsed');\n    return saved === 'true';\n  });\n\n  // Picker states\n  const [showCaloriePicker, setShowCaloriePicker] = useState(false);\n  const [showProteinPicker, setShowProteinPicker] = useState(false);\n  const [showCarbsPicker, setShowCarbsPicker] = useState(false);\n  const [showFatPicker, setShowFatPicker] = useState(false);\n\n  const weeklyAverages = useMemo(() => {\n    if (weightEntries.length === 0) return new Map<string, number>();\n    \n    const weekGroups = new Map<string, WeightEntry[]>();\n    weightEntries.forEach(entry => {\n      const key = getWeekKey(entry.date);\n      if (!weekGroups.has(key)) {\n        weekGroups.set(key, []);\n      }\n      weekGroups.get(key)!.push(entry);\n    });\n    \n    const averages = new Map<string, number>();\n    weekGroups.forEach((entries, weekKey) => {\n      const sum = entries.reduce((acc, e) => acc + e.weight, 0);\n      averages.set(weekKey, sum / entries.length);\n    });\n    \n    return averages;\n  }, [weightEntries]);\n\n  const aggregatedWeightData = useMemo(() => {\n    if (weightEntries.length === 0) return { data: [], prevChange: null };\n    \n    const sorted = [...weightEntries].sort((a, b) => a.date.localeCompare(b.date));\n    \n    if (weightViewMode === 'daily') {\n      const dailyWithChange = sorted.map((entry, idx) => {\n        let change: number | null = null;\n        if (idx > 0) {\n          change = sorted[idx - 1].weight - entry.weight;\n        }\n        return { ...entry, change };\n      });\n      \n      let prevChange: number | null = null;\n      if (sorted.length >= 2) {\n        prevChange = sorted[sorted.length - 2].weight - sorted[sorted.length - 1].weight;\n      }\n      \n      return { data: dailyWithChange, prevChange };\n    }\n    \n    if (weightViewMode === 'weekly') {\n      const weekGroups = new Map<string, WeightEntry[]>();\n      sorted.forEach(entry => {\n        const key = getWeekKey(entry.date);\n        if (!weekGroups.has(key)) weekGroups.set(key, []);\n        weekGroups.get(key)!.push(entry);\n      });\n      \n      const weekly: { date: string; avgWeight: number; weekLabel: string; change: number | null; macros: { calories: number; protein: number; carbs: number; fat: number } | null; hasNotes: boolean }[] = [];\n      const sortedWeeks = Array.from(weekGroups.keys()).sort();\n      \n      sortedWeeks.forEach((weekKey, idx) => {\n        const entries = weekGroups.get(weekKey)!;\n        const sum = entries.reduce((acc, e) => acc + e.weight, 0);\n        const avg = sum / entries.length;\n        const prevAvg = idx > 0 ? weekly[idx - 1].avgWeight : null;\n        const change = prevAvg !== null ? prevAvg - avg : null;\n        \n        const macrosSum = entries.reduce((acc, e) => ({\n          calories: acc.calories + (e.macros?.calories || 0),\n          protein: acc.protein + (e.macros?.protein || 0),\n          carbs: acc.carbs + (e.macros?.carbs || 0),\n          fat: acc.fat + (e.macros?.fat || 0),\n        }), { calories: 0, protein: 0, carbs: 0, fat: 0 });\n        \n        const hasNotes = entries.some(e => e.notes);\n        \n        weekly.push({ \n          date: weekKey, \n          avgWeight: avg, \n          weekLabel: getWeekLabel(entries[0].date), \n          change,\n          macros: macrosSum.calories > 0 || macrosSum.protein > 0 || macrosSum.carbs > 0 || macrosSum.fat > 0 ? macrosSum : null,\n          hasNotes\n        });\n      });\n      \n      let prevChange: number | null = null;\n      if (weekly.length >= 2) {\n        prevChange = weekly[weekly.length - 2].avgWeight - weekly[weekly.length - 1].avgWeight;\n      }\n      \n      return { data: weekly, prevChange };\n    }\n    \n    if (weightViewMode === 'monthly') {\n      const monthGroups = new Map<string, WeightEntry[]>();\n      sorted.forEach(entry => {\n        const key = getMonthKey(entry.date);\n        if (!monthGroups.has(key)) monthGroups.set(key, []);\n        monthGroups.get(key)!.push(entry);\n      });\n      \n      const monthly: { date: string; avgWeight: number; monthLabel: string; change: number | null; macros: { calories: number; protein: number; carbs: number; fat: number } | null; hasNotes: boolean }[] = [];\n      const sortedMonths = Array.from(monthGroups.keys()).sort();\n      \n      sortedMonths.forEach((monthKey, idx) => {\n        const entries = monthGroups.get(monthKey)!;\n        const sum = entries.reduce((acc, e) => acc + e.weight, 0);\n        const avg = sum / entries.length;\n        const prevAvg = idx > 0 ? monthly[idx - 1].avgWeight : null;\n        const change = prevAvg !== null ? prevAvg - avg : null;\n        \n        const macrosSum = entries.reduce((acc, e) => ({\n          calories: acc.calories + (e.macros?.calories || 0),\n          protein: acc.protein + (e.macros?.protein || 0),\n          carbs: acc.carbs + (e.macros?.carbs || 0),\n          fat: acc.fat + (e.macros?.fat || 0),\n        }), { calories: 0, protein: 0, carbs: 0, fat: 0 });\n        \n        const hasNotes = entries.some(e => e.notes);\n        \n        monthly.push({ \n          date: monthKey, \n          avgWeight: avg, \n          monthLabel: getMonthLabel(entries[0].date), \n          change,\n          macros: macrosSum.calories > 0 || macrosSum.protein > 0 || macrosSum.carbs > 0 || macrosSum.fat > 0 ? macrosSum : null,\n          hasNotes\n        });\n      });\n      \n      let prevChange: number | null = null;\n      if (monthly.length >= 2) {\n        prevChange = monthly[monthly.length - 2].avgWeight - monthly[monthly.length - 1].avgWeight;\n      }\n      \n      return { data: monthly, prevChange };\n    }\n    \n    return { data: sorted, prevChange: null };\n  }, [weightEntries, weightViewMode]);\n\n  const allMedications = useMemo(() => {\n    const medSet = new Set<string>();\n    manualEntries.forEach(e => medSet.add(e.medication));\n    protocols.forEach(p => medSet.add(p.medication));\n    return Array.from(medSet);\n  }, [manualEntries, protocols]);\n\n  const sortedEntries = useMemo(() => {\n    return [...manualEntries].sort((a, b) => {\n      if (sortBy === 'date') {\n        return sortAsc ? a.date.localeCompare(b.date) : b.date.localeCompare(a.date);\n      } else if (sortBy === 'medication') {\n        return sortAsc ? a.medication.localeCompare(b.medication) : b.medication.localeCompare(a.medication);\n      } else if (sortBy === 'dose') {\n        return sortAsc ? a.dose - b.dose : b.dose - a.dose;\n      }\n      return 0;\n    });\n  }, [manualEntries, sortBy, sortAsc]);\n\n  const getMedColor = (medicationName: string) => {\n    return getMedicationColorByName(medicationName, allMedications).stroke;\n  };\n  const [editSideEffects, setEditSideEffects] = useState<SideEffect[]>([]);\n  const [editNotes, setEditNotes] = useState('');\n  const [activeSideEffect, setActiveSideEffect] = useState<string | null>(null);\n\n  useEffect(() => {\n    const loadData = () => {\n      const entries = getMedicationManualEntries();\n      const prots = getMedicationProtocols();\n      setManualEntries(entries.sort((a, b) => b.date.localeCompare(a.date)));\n      setProtocols(prots);\n\n      const realWeightEntries = getWeightEntries();\n      setWeightEntries(realWeightEntries);\n\n      const loadedPeptides = getPeptides();\n      setPeptides(loadedPeptides);\n      const loadedPeptideLogs = getPeptideLogs();\n      setPeptideLogs(loadedPeptideLogs.sort((a, b) => b.date.localeCompare(a.date)));\n    };\n    loadData();\n  }, [refreshKey]);\n\n  useEffect(() => {\n    localStorage.setItem('glpal_dose_log_collapsed', String(isDoseLogCollapsed));\n  }, [isDoseLogCollapsed]);\n\n  useEffect(() => {\n    localStorage.setItem('glpal_weight_log_collapsed', String(isWeightLogCollapsed));\n  }, [isWeightLogCollapsed]);\n\n  useEffect(() => {\n    localStorage.setItem('glpal_peptide_log_collapsed', String(isPeptideLogCollapsed));\n  }, [isPeptideLogCollapsed]);\n\n  useEffect(() => {\n    if (editingEntry) {\n      setIsSideEffectsVisible(true);\n      setIsSideEffectsClosing(false);\n      document.body.classList.add('modal-open');\n    } else if (isSideEffectsVisible && !isSideEffectsClosing) {\n      setIsSideEffectsClosing(true);\n      setTimeout(() => {\n        setIsSideEffectsVisible(false);\n        setIsSideEffectsClosing(false);\n        document.body.classList.remove('modal-open');\n      }, 200);\n    }\n  }, [editingEntry, isSideEffectsVisible, isSideEffectsClosing]);\n\n  useEffect(() => {\n    if (editingWeightEntry) {\n      setIsWeightModalVisible(true);\n      setIsWeightModalClosing(false);\n      document.body.classList.add('modal-open');\n    } else if (isWeightModalVisible && !isWeightModalClosing) {\n      setIsWeightModalClosing(true);\n      setTimeout(() => {\n        setIsWeightModalVisible(false);\n        setIsWeightModalClosing(false);\n        document.body.classList.remove('modal-open');\n      }, 200);\n    }\n  }, [editingWeightEntry, isWeightModalVisible, isWeightModalClosing]);\n\n  const addSideEffect = (name: string) => {\n    setActiveSideEffect(name);\n    setEditSideEffects([...editSideEffects, { name, severity: 5 }]);\n  };\n\n  const removeSideEffect = (name: string) => {\n    setEditSideEffects(editSideEffects.filter(se => se.name !== name));\n  };\n\n  const updateSideEffectSeverity = (name: string, severity: number) => {\n    setEditSideEffects(editSideEffects.map(se => \n      se.name === name ? { ...se, severity } : se\n    ));\n  };\n\n  const handleSaveSideEffects = () => {\n    if (!editingEntry) return;\n    \n    const updatedEntries = manualEntries.map(entry => \n      entry.date === editingEntry.date \n        ? { ...entry, sideEffects: editSideEffects.length > 0 ? editSideEffects : undefined, notes: editNotes || undefined }\n        : entry\n    );\n    \n    saveMedicationManualEntries(updatedEntries);\n    setManualEntries(updatedEntries.sort((a, b) => b.date.localeCompare(a.date)));\n    setEditingEntry(null);\n  };\n\n  const openSideEffectsEditor = (entry: GLP1Entry) => {\n    setEditingEntry(entry);\n    setEditSideEffects(entry.sideEffects || []);\n    setEditNotes(entry.notes || '');\n    setActiveSideEffect(null);\n  };\n\n  const openWeightEditor = (entry: WeightEntry) => {\n    setEditingWeightEntry(entry);\n    setEditWeightNotes(entry.notes || '');\n    setEditWeightMacros(entry.macros || { calories: 0, protein: 0, carbs: 0, fat: 0 });\n  };\n\n  const handleSaveWeightMacros = () => {\n    if (!editingWeightEntry) return;\n    \n    const updatedEntries = weightEntries.map(entry => \n      entry.date === editingWeightEntry.date \n        ? { \n            ...entry, \n            notes: editWeightNotes || undefined, \n            macros: (editWeightMacros.calories > 0 || editWeightMacros.protein > 0 || editWeightMacros.carbs > 0 || editWeightMacros.fat > 0) \n              ? editWeightMacros \n              : undefined \n          }\n        : entry\n    );\n    \n    saveWeightEntries(updatedEntries);\n    setWeightEntries(updatedEntries);\n    setEditingWeightEntry(null);\n  };\n\n  const formatDate = (dateStr: string) => {\n    const date = new Date(dateStr);\n    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });\n  };\n\n  return (\n    <div className=\"space-y-3 pb-20\">\n      <div className={bigCard}>\n        <div className=\"flex justify-between items-center mb-2\">\n          <h1 className={bigCardText.title} style={{ textShadow: '0 0 15px var(--accent-purple-light-shadow)' }}>Dose Log</h1>\n          <button\n            onClick={() => setIsDoseLogCollapsed(!isDoseLogCollapsed)}\n            className=\"text-text-muted hover:text-white transition-colors\"\n          >\n            {isDoseLogCollapsed ? '▼' : '▲'}\n          </button>\n        </div>\n        <div className=\"border-t border-[#B19CD9]/20 mb-3\"></div>\n        \n        {isDoseLogCollapsed ? (\n          <p className=\"text-text-muted text-center py-2\">{manualEntries.length} entries</p>\n        ) : manualEntries.length === 0 ? (\n          <p className=\"text-text-muted text-center py-8\">No manually logged doses yet.</p>\n        ) : (\n          <>\n            <div className=\"flex items-center justify-between mb-3\">\n              <div className=\"flex gap-1\">\n                {(['date', 'medication', 'dose'] as const).map((key) => (\n                  <button\n                    key={key}\n                    onClick={() => { if (sortBy === key) setSortAsc(!sortAsc); else { setSortBy(key); setSortAsc(false); } }}\n                    className={`px-2 py-1 text-xs rounded transition-all ${\n                      sortBy === key \n                        ? 'bg-[#B19CD9] text-white' \n                        : isDarkMode\n                          ? 'bg-black/20 text-text-muted hover:text-white'\n                          : 'bg-gray-100 text-gray-600 hover:text-gray-900'\n                    }`}\n                  >\n                    {key === 'date' ? 'Date' : key === 'medication' ? 'Med' : 'Dose'}\n                    {sortBy === key && (\n                      <span className=\"ml-1\">{sortAsc ? '↑' : '↓'}</span>\n                    )}\n                  </button>\n                ))}\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              {sortedEntries.map((entry) => (\n              <div \n                key={`${entry.date}-${entry.medication}-${entry.time || ''}`}\n                className={`rounded-lg p-3 border ${\n                  isDarkMode \n                    ? 'bg-black/20 border-[#B19CD9]/20' \n                    : 'bg-gray-50 border-gray-200'\n                }`}\n              >\n                <div className=\"flex justify-between items-start mb-2\">\n                  <div>\n                    <p className=\"text-text-primary font-medium\">{formatDate(entry.date)}</p>\n                    <p className=\"text-sm\" style={{ color: getMedColor(entry.medication) }}>{entry.medication}</p>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"text-[#4ADEA8] font-bold\">{entry.dose}mg</p>\n                    {entry.isManual && (\n                      <span className=\"text-xs text-[#B19CD9]\">Manual</span>\n                    )}\n                  </div>\n                </div>\n                <div className=\"border-t border-[#B19CD9]/10 pt-2 mt-2\">\n                  <div className=\"flex flex-wrap gap-2 items-center\">\n                    {entry.time && (\n                      <span className=\"text-xs bg-[#B19CD9]/20 text-[#B19CD9] px-2 py-1 rounded\">\n                        {entry.time}\n                      </span>\n                    )}\n                    {entry.painLevel !== undefined && entry.painLevel > 0 && (\n                        <span className={`text-xs px-2 py-1 rounded ${\n                          entry.painLevel <= 3 ? 'bg-green-500/20 text-green-400' :\n                          entry.painLevel <= 6 ? 'bg-yellow-500/20 text-yellow-400' :\n                          'bg-red-500/20 text-red-400'\n                        }`}>\n                          Pain: {entry.painLevel}/10\n                        </span>\n                      )}\n                      {entry.injectionSite && (\n                        <span className=\"text-xs bg-[#4ADEA8]/20 text-[#4ADEA8] px-2 py-1 rounded\">\n                          {entry.injectionSite}\n                        </span>\n                      )}\n                      {entry.isr && entry.isr !== 'None' && (\n                        <span className={`text-xs px-2 py-1 rounded ${\n                          entry.isr === 'Mild' ? 'bg-yellow-500/20 text-yellow-400' :\n                          entry.isr === 'Moderate' ? 'bg-orange-500/20 text-orange-400' :\n                          'bg-red-500/20 text-red-400'\n                        }`}>\n                          ISR: {entry.isr}\n                        </span>\n                      )}\n                      {entry.sideEffects && entry.sideEffects.length > 0 && entry.sideEffects.map((se) => (\n                        <span key={se.name} className={`text-xs px-2 py-1 rounded ${\n                          se.severity <= 3 ? 'bg-green-500/20 text-green-400' :\n                          se.severity <= 6 ? 'bg-yellow-500/20 text-yellow-400' :\n                          'bg-red-500/20 text-red-400'\n                        }`}>\n                          {se.name} ({se.severity})\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                  \n                  {entry.notes && (\n                    <div className=\"mt-2 pt-2 border-t border-[#B19CD9]/10\">\n                      <p className=\"text-xs text-text-muted\">\n                        <span className=\"text-text-primary\">Notes:</span> {entry.notes}\n                      </p>\n                    </div>\n                  )}\n                  \n                  <div className=\"flex justify-end mt-2\">\n                    <button\n                      onClick={() => openSideEffectsEditor(entry)}\n                      className=\"px-3 py-1 text-xs rounded-lg transition-all duration-300 transform hover:scale-[1.02] bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white shadow-[0_0_10px_rgba(177,156,217,0.4)]\"\n                    >\n                      + Side Effects / Notes\n                    </button>\n                  </div>\n              </div>\n            ))}\n          </div>\n          </>\n        )}\n      </div>\n\n      <div className={bigCard}>\n        <div className=\"flex justify-between items-center mb-2\">\n          <h1 className={bigCardText.title} style={{ textShadow: '0 0 15px var(--accent-purple-light-shadow)' }}>Weight Log</h1>\n          <button\n            onClick={() => setIsWeightLogCollapsed(!isWeightLogCollapsed)}\n            className=\"text-text-muted hover:text-white transition-colors\"\n          >\n            {isWeightLogCollapsed ? '▼' : '▲'}\n          </button>\n        </div>\n        <div className=\"border-t border-[#B19CD9]/20 mb-3\"></div>\n        \n        {isWeightLogCollapsed ? (\n          <p className=\"text-text-muted text-center py-2\">{weightEntries.length} entries</p>\n        ) : weightEntries.length === 0 ? (\n          <p className=\"text-text-muted text-center py-8\">No weight entries yet.</p>\n        ) : (\n          <>\n            <div className=\"grid grid-cols-3 gap-2 mb-3\">\n              {(['daily', 'weekly', 'monthly'] as const).map((mode) => (\n                <button\n                  key={mode}\n                  onClick={() => setWeightViewMode(mode)}\n                  className={`px-2 py-2 text-sm rounded-lg transition-all duration-300 ${\n                    weightViewMode === mode\n                      ? 'bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white shadow-[0_0_15px_rgba(177,156,217,0.4)]'\n                      : 'bg-[#B19CD9]/10 text-[#B19CD9] border border-[#B19CD9]/30 hover:bg-[#B19CD9]/20 hover:shadow-[0_0_10px_rgba(177,156,217,0.3)]'\n                  }`}\n                >\n                  {mode.charAt(0).toUpperCase() + mode.slice(1)}\n                </button>\n              ))}\n            </div>\n            \n            {aggregatedWeightData.prevChange !== null && (\n              <div className={`text-xs text-center mb-2 py-1 rounded ${\n                aggregatedWeightData.prevChange > 0 \n                  ? 'bg-green-500/20 text-green-400' \n                  : aggregatedWeightData.prevChange < 0 \n                    ? 'bg-red-500/20 text-red-400'\n                    : 'bg-gray-500/20 text-gray-400'\n              }`}>\n                {aggregatedWeightData.prevChange > 0 \n                  ? `${convertWeightFromKg(aggregatedWeightData.prevChange, unitSystem).toFixed(1)}${weightUnit} VS Last ${weightViewMode.charAt(0).toUpperCase() + weightViewMode.slice(1)}`\n                  : aggregatedWeightData.prevChange < 0 \n                    ? `${Math.abs(convertWeightFromKg(aggregatedWeightData.prevChange, unitSystem)).toFixed(1)}${weightUnit} VS Last ${weightViewMode.charAt(0).toUpperCase() + weightViewMode.slice(1)}`\n                    : `No Change VS Last ${weightViewMode.charAt(0).toUpperCase() + weightViewMode.slice(1)}`\n                }\n              </div>\n            )}\n            \n            <div className=\"space-y-2\">\n              {(aggregatedWeightData.data as any[]).slice().reverse().map((entry: any, idx: number) => (\n                <div \n                  key={entry.date + '-' + idx}\n                  className={`rounded-lg p-3 border ${\n                    isDarkMode \n                      ? 'bg-black/20 border-[#B19CD9]/20' \n                      : 'bg-gray-50 border-gray-200'\n                  }`}\n                >\n                  <div className=\"flex justify-between items-start\">\n                    <div>\n                      <p className=\"text-text-primary font-medium\">\n                        {weightViewMode === 'daily' \n                          ? formatDate(entry.date)\n                          : weightViewMode === 'weekly'\n                            ? entry.weekLabel\n                            : entry.monthLabel\n                        }\n                      </p>\n                      {entry.change !== null && (\n                        <p className={`text-xs ${\n                          entry.change > 0 ? 'text-green-400' : entry.change < 0 ? 'text-red-400' : 'text-gray-400'\n                        }`}>\n                          {entry.change > 0 ? '↓' : entry.change < 0 ? '↑' : '='} {Math.abs(convertWeightFromKg(entry.change, unitSystem)).toFixed(1)}{weightUnit}\n                        </p>\n                      )}\n                    </div>\n                    <div className=\"text-right\">\n                      <p className=\"text-[#4ADEA8] font-bold\">\n                        {weightViewMode === 'daily' \n                          ? `${convertWeightFromKg(entry.weight, unitSystem).toFixed(1)}${weightUnit}` \n                          : `${convertWeightFromKg(entry.avgWeight, unitSystem).toFixed(1)}${weightUnit}`\n                        }\n                      </p>\n                    </div>\n                  </div>\n                  {(entry as any).macros || (entry as any).notes || (entry as any).hasNotes ? (\n                    <div className=\"flex flex-wrap gap-1 mt-2\">\n                      {(entry as any).macros && (\n                        <>\n                          {(entry as any).macros.calories > 0 && (\n                            <span className=\"text-xs bg-orange-500/20 text-orange-400 px-2 py-1 rounded\">\n                              {(entry as any).macros.calories} cal\n                            </span>\n                          )}\n                          {(entry as any).macros.protein > 0 && (\n                            <span className=\"text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded\">\n                              P: {(entry as any).macros.protein}g\n                            </span>\n                          )}\n                          {(entry as any).macros.carbs > 0 && (\n                            <span className=\"text-xs bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded\">\n                              C: {(entry as any).macros.carbs}g\n                            </span>\n                          )}\n                          {(entry as any).macros.fat > 0 && (\n                            <span className=\"text-xs bg-pink-500/20 text-pink-400 px-2 py-1 rounded\">\n                              F: {(entry as any).macros.fat}g\n                            </span>\n                          )}\n                        </>\n                      )}\n                      {((entry as any).notes || (entry as any).hasNotes) && (\n                        <span className=\"text-xs bg-[#B19CD9]/20 text-[#B19CD9] px-2 py-1 rounded\">\n                          📝\n                        </span>\n                      )}\n                    </div>\n                  ) : null}\n                  {weightViewMode === 'daily' && (\n                    <div className=\"flex justify-end mt-2\">\n                      <button\n                        onClick={() => openWeightEditor(entry)}\n                        className=\"px-3 py-1 text-xs rounded-lg transition-all duration-300 transform hover:scale-[1.02] bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white shadow-[0_0_10px_rgba(177,156,217,0.4)]\"\n                      >\n                        + Macros / Notes\n                      </button>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </>\n        )}\n      </div>\n\n      {!isSideEffectsVisible ? null : (\n        <div className=\"fixed inset-0 z-[9999] flex items-center justify-center p-4\">\n          <div \n            className={`fixed inset-0 bg-black/60 ${isSideEffectsClosing ? 'backdrop-fade-out' : 'backdrop-fade-in'}`}\n            style={{ backdropFilter: 'blur(8px)' }} \n            onClick={() => setEditingEntry(null)} \n          />\n          <div className={`relative rounded-2xl shadow-2xl border border-[#B19CD9]/30 w-full max-w-sm p-6 max-h-[90vh] overflow-y-auto pointer-events-auto ${\n            isDarkMode \n              ? 'bg-gradient-to-b from-[#1a1625]/70 to-[#0d0a15]/95' \n              : 'bg-white/95'\n          } ${isSideEffectsClosing ? 'modal-fade-out' : 'modal-content-fade-in'}`}>\n            {!editingEntry ? null : (\n            <>\n            <h3 className={`text-lg font-semibold mb-2 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>Side Effects & Notes</h3>\n            <p className={`text-sm mb-4 ${isDarkMode ? 'text-text-muted' : 'text-gray-600'}`}>{formatDate(editingEntry.date)} - <span style={{ color: getMedColor(editingEntry.medication) }}>{editingEntry.medication}</span></p>\n            \n            <div className={`border-t my-4 ${isDarkMode ? 'border-[#B19CD9]/20' : 'border-gray-200'}`}></div>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-text-secondary mb-2\">\n                  Side Effects\n                </label>\n                <div className=\"flex flex-wrap gap-2 mb-3\">\n                  {COMMON_SIDE_EFFECTS.filter(se => !editSideEffects.find(s => s.name === se)).map((se) => (\n                    <button\n                      key={se}\n                      type=\"button\"\n                      onClick={() => addSideEffect(se)}\n                      className={`text-xs border px-2 py-1 rounded transition-all ${\n                        isDarkMode\n                          ? 'bg-black/20 border-[#B19CD9]/30 text-[#B19CD9] hover:bg-[#B19CD9]/20 hover:border-[#B19CD9]/50'\n                          : 'bg-white border-gray-300 text-[#9C7BD3] hover:bg-gray-100'\n                      }`}\n                    >\n                      + {se}\n                    </button>\n                  ))}\n                </div>\n                \n                {editSideEffects.length > 0 && (\n                  <div className=\"space-y-3\">\n                    {editSideEffects.map((se) => (\n                      <div key={se.name} className={`rounded-lg p-3 border ${\n                        isDarkMode \n                          ? 'bg-black/20 border-[#B19CD9]/20' \n                          : 'bg-gray-50 border-gray-200'\n                      }`}>\n                        <div className=\"flex justify-between items-center mb-2\">\n                          <span className=\"text-sm text-text-primary font-medium\">{se.name}</span>\n                          <button\n                            type=\"button\"\n                            onClick={() => removeSideEffect(se.name)}\n                            className=\"text-xs text-red-400 hover:text-red-300\"\n                          >\n                            Remove\n                          </button>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <span className=\"text-xs text-gray-400\">Mild</span>\n                        <input\n                            type=\"range\"\n                            min=\"1\"\n                            max=\"10\"\n                            value={se.severity}\n                            onChange={(e) => updateSideEffectSeverity(se.name, parseInt(e.target.value))}\n                            className=\"pain-slider flex-1 h-10 appearance-none cursor-pointer\"\n                          />\n                          <span className=\"text-xs text-gray-400\">Severe</span>\n                        </div>\n                        <div className=\"text-center mt-1\">\n                          <span className={`text-xs font-medium ${\n                            se.severity <= 3 ? 'text-green-400' :\n                            se.severity <= 6 ? 'text-yellow-400' :\n                            'text-red-400'\n                          }`}>\n                            {se.severity}/10\n                          </span>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n              \n              <div className={`border-t my-4 ${isDarkMode ? 'border-[#B19CD9]/20' : 'border-gray-200'}`}></div>\n              \n              <div>\n                <label className={`block text-sm font-medium mb-2 ${isDarkMode ? 'text-text-secondary' : 'text-gray-700'}`}>\n                  Notes\n                </label>\n                <textarea\n                  value={editNotes}\n                  onChange={(e) => setEditNotes(e.target.value)}\n                  placeholder=\"Additional notes...\"\n                  className={`w-full px-3 py-2 border rounded-lg text-sm focus:outline-none resize-none ${\n                    isDarkMode\n                      ? 'bg-black/20 border-[#B19CD9]/30 text-text-primary placeholder-text-muted focus:border-[#B19CD9]/60'\n                      : 'bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-[#9C7BD3]'\n                  }`}\n                  rows={3}\n                />\n              </div>\n            </div>\n            \n            <div className={`border-t my-4 ${isDarkMode ? 'border-[#B19CD9]/20' : 'border-gray-200'}`}></div>\n            \n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => setEditingEntry(null)}\n                className={`flex-1 py-3 rounded-xl border transition-all font-medium ${\n                  isDarkMode\n                    ? 'border-[#B19CD9]/40 text-white/80 hover:text-white hover:bg-white/10'\n                    : 'border-gray-300 text-gray-700 hover:bg-gray-100'\n                }`}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSaveSideEffects}\n                className=\"flex-1 py-3 rounded-xl bg-gradient-to-r from-[#4ADEA8] to-[#4FD99C] text-white font-medium hover:shadow-[0_0_20px_rgba(74,222,168,0.5)] transition-all\"\n              >\n                Save\n              </button>\n            </div>\n            </>\n            )}\n          </div>\n        </div>\n      )}\n\n      {isWeightModalVisible && editingWeightEntry ? (\n        <div className=\"fixed inset-0 z-[9999] flex items-center justify-center p-4\">\n          <div \n            className={`fixed inset-0 bg-black/60 ${isWeightModalClosing ? 'backdrop-fade-out' : 'backdrop-fade-in'}`}\n            style={{ backdropFilter: 'blur(8px)' }} \n            onClick={() => setEditingWeightEntry(null)} \n          />\n          <div className={`relative rounded-2xl shadow-2xl border border-[#B19CD9]/30 w-full max-w-sm p-6 max-h-[90vh] overflow-y-auto pointer-events-auto ${\n              isWeightModalClosing ? 'modal-fade-out' : 'modal-content-fade-in'\n            } ${\n              isDarkMode \n                ? 'bg-gradient-to-b from-[#1a1625]/70 to-[#0d0a15]/95' \n                : 'bg-white/95'\n            }`}>\n            <h3 className={`text-lg font-semibold mb-2 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>Macros & Notes</h3>\n            <p className={`text-sm mb-4 ${isDarkMode ? 'text-text-muted' : 'text-gray-600'}`}>{formatDate(editingWeightEntry.date)} - {convertWeightFromKg(editingWeightEntry.weight, unitSystem).toFixed(1)}{weightUnit}</p>\n            \n            <div className={`border-t my-4 ${isDarkMode ? 'border-[#B19CD9]/20' : 'border-gray-200'}`}></div>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-text-secondary mb-2\">\n                  Macros\n                </label>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  <div>\n                    <label className=\"block text-xs text-orange-400 mb-1\">Calories</label>\n                    {useWheelForNumbers ? (\n                      <button\n                        type=\"button\"\n                        onClick={() => setShowCaloriePicker(true)}\n                        className={`w-full px-3 py-2 border rounded-lg text-sm text-left ${\n                          isDarkMode\n                            ? 'border-[#B19CD9]/30 bg-black/20 text-text-primary'\n                            : 'border-gray-300 bg-white text-gray-900'\n                        }`}\n                      >\n                        {editWeightMacros.calories || 'Tap to select'}\n                      </button>\n                    ) : (\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        value={editWeightMacros.calories || ''}\n                        onChange={(e) => setEditWeightMacros({ ...editWeightMacros, calories: parseInt(e.target.value) || 0 })}\n                        className={`w-full px-3 py-2 border rounded-lg text-sm focus:outline-none ${\n                          isDarkMode\n                            ? 'bg-black/20 border-[#B19CD9]/30 text-text-primary'\n                            : 'bg-white border-gray-300 text-gray-900'\n                        }`}\n                        placeholder=\"0\"\n                      />\n                    )}\n                  </div>\n                  <div>\n                    <label className=\"block text-xs text-blue-400 mb-1\">Protein (g)</label>\n                    {useWheelForNumbers ? (\n                      <button\n                        type=\"button\"\n                        onClick={() => setShowProteinPicker(true)}\n                        className={`w-full px-3 py-2 border rounded-lg text-sm text-left ${\n                          isDarkMode\n                            ? 'border-[#B19CD9]/30 bg-black/20 text-text-primary'\n                            : 'border-gray-300 bg-white text-gray-900'\n                        }`}\n                      >\n                        {editWeightMacros.protein || 'Tap to select'}\n                      </button>\n                    ) : (\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        value={editWeightMacros.protein || ''}\n                        onChange={(e) => setEditWeightMacros({ ...editWeightMacros, protein: parseInt(e.target.value) || 0 })}\n                        className={`w-full px-3 py-2 border rounded-lg text-sm focus:outline-none ${\n                          isDarkMode\n                            ? 'bg-black/20 border-[#B19CD9]/30 text-text-primary'\n                            : 'bg-white border-gray-300 text-gray-900'\n                        }`}\n                        placeholder=\"0\"\n                      />\n                    )}\n                  </div>\n                  <div>\n                    <label className=\"block text-xs text-yellow-400 mb-1\">Carbs (g)</label>\n                    {useWheelForNumbers ? (\n                      <button\n                        type=\"button\"\n                        onClick={() => setShowCarbsPicker(true)}\n                        className={`w-full px-3 py-2 border rounded-lg text-sm text-left ${\n                          isDarkMode\n                            ? 'border-[#B19CD9]/30 bg-black/20 text-text-primary'\n                            : 'border-gray-300 bg-white text-gray-900'\n                        }`}\n                      >\n                        {editWeightMacros.carbs || 'Tap to select'}\n                      </button>\n                    ) : (\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        value={editWeightMacros.carbs || ''}\n                        onChange={(e) => setEditWeightMacros({ ...editWeightMacros, carbs: parseInt(e.target.value) || 0 })}\n                        className={`w-full px-3 py-2 border rounded-lg text-sm focus:outline-none ${\n                          isDarkMode\n                            ? 'bg-black/20 border-[#B19CD9]/30 text-text-primary'\n                            : 'bg-white border-gray-300 text-gray-900'\n                        }`}\n                        placeholder=\"0\"\n                      />\n                    )}\n                  </div>\n                  <div>\n                    <label className=\"block text-xs text-pink-400 mb-1\">Fat (g)</label>\n                    {useWheelForNumbers ? (\n                      <button\n                        type=\"button\"\n                        onClick={() => setShowFatPicker(true)}\n                        className={`w-full px-3 py-2 border rounded-lg text-sm text-left ${\n                          isDarkMode\n                            ? 'border-[#B19CD9]/30 bg-black/20 text-text-primary'\n                            : 'border-gray-300 bg-white text-gray-900'\n                        }`}\n                      >\n                        {editWeightMacros.fat || 'Tap to select'}\n                      </button>\n                    ) : (\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        value={editWeightMacros.fat || ''}\n                        onChange={(e) => setEditWeightMacros({ ...editWeightMacros, fat: parseInt(e.target.value) || 0 })}\n                        className={`w-full px-3 py-2 border rounded-lg text-sm focus:outline-none ${\n                          isDarkMode\n                            ? 'bg-black/20 border-[#B19CD9]/30 text-text-primary'\n                            : 'bg-white border-gray-300 text-gray-900'\n                        }`}\n                        placeholder=\"0\"\n                      />\n                    )}\n                  </div>\n                </div>\n              </div>\n              \n              <div className={`border-t my-4 ${isDarkMode ? 'border-[#B19CD9]/20' : 'border-gray-200'}`}></div>\n              \n              <div>\n                <label className={`block text-sm font-medium mb-2 ${isDarkMode ? 'text-text-secondary' : 'text-gray-700'}`}>\n                  Notes\n                </label>\n                <textarea\n                  value={editWeightNotes}\n                  onChange={(e) => setEditWeightNotes(e.target.value)}\n                  placeholder=\"Additional notes...\"\n                  className={`w-full px-3 py-2 border rounded-lg text-sm focus:outline-none resize-none ${\n                    isDarkMode\n                      ? 'bg-black/20 border-[#B19CD9]/30 text-text-primary placeholder-text-muted focus:border-[#B19CD9]/60'\n                      : 'bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-[#9C7BD3]'\n                  }`}\n                  rows={3}\n                />\n              </div>\n            </div>\n            \n            <div className={`border-t my-4 ${isDarkMode ? 'border-[#B19CD9]/20' : 'border-gray-200'}`}></div>\n            \n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => setEditingWeightEntry(null)}\n                className={`flex-1 py-3 rounded-xl border transition-all font-medium ${\n                  isDarkMode\n                    ? 'border-[#B19CD9]/40 text-white/80 hover:text-white hover:bg-white/10'\n                    : 'border-gray-300 text-gray-700 hover:bg-gray-100'\n                }`}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSaveWeightMacros}\n                className=\"flex-1 py-3 rounded-xl bg-gradient-to-r from-[#4ADEA8] to-[#4FD99C] text-white font-medium hover:shadow-[0_0_20px_rgba(74,222,168,0.5)] transition-all\"\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      ) : null}\n\n      {/* Peptide Log Section */}\n      <div className={bigCard}>\n        <div className=\"flex justify-between items-center mb-2\">\n          <h1 className={bigCardText.title} style={{ textShadow: '0 0 15px var(--accent-purple-light-shadow)' }}>Peptide Log</h1>\n          <button\n            onClick={() => setIsPeptideLogCollapsed(!isPeptideLogCollapsed)}\n            className=\"text-text-muted hover:text-white transition-colors\"\n          >\n            {isPeptideLogCollapsed ? '▼' : '▲'}\n          </button>\n        </div>\n        <div className=\"border-t border-[#B19CD9]/20 mb-3\"></div>\n        \n        {isPeptideLogCollapsed ? (\n          <p className=\"text-text-muted text-center py-2\">{peptideLogs.length} entries</p>\n        ) : peptideLogs.length === 0 ? (\n          <p className=\"text-text-muted text-center py-8\">No peptide logs yet.</p>\n        ) : (\n          <div className=\"space-y-2\">\n            {peptideLogs.map((log) => {\n              const peptide = peptides.find(p => p.id === log.peptideId);\n              return (\n                <div \n                  key={log.id}\n                  className={`rounded-lg p-3 border ${\n                    isDarkMode \n                      ? 'bg-black/20 border-[#B19CD9]/20' \n                      : 'bg-gray-50 border-gray-200'\n                  }`}\n                >\n                  <div className=\"flex justify-between items-start mb-2\">\n                    <div>\n                      <p className=\"text-text-primary font-medium\">{formatDate(log.date)}</p>\n                      <p className=\"text-sm\" style={{ color: peptide?.color || '#B19CD9' }}>{peptide?.name || 'Unknown Peptide'}</p>\n                    </div>\n                    <div className=\"text-right\">\n                      <p className=\"text-[#4ADEA8] font-bold\">{log.dose}{log.doseUnit}</p>\n                    </div>\n                  </div>\n                  <div className=\"border-t border-[#B19CD9]/10 pt-2 mt-2\">\n                    <div className=\"flex flex-wrap gap-2 items-center\">\n                      {log.time && (\n                        <span className=\"text-xs bg-[#B19CD9]/20 text-[#B19CD9] px-2 py-1 rounded\">\n                          {log.time}\n                        </span>\n                      )}\n                      {log.injectionSite && (\n                        <span className=\"text-xs bg-[#4ADEA8]/20 text-[#4ADEA8] px-2 py-1 rounded\">\n                          {log.injectionSite}\n                        </span>\n                      )}\n                      {log.painLevel !== null && log.painLevel > 0 && (\n                        <span className={`text-xs px-2 py-1 rounded ${\n                          log.painLevel <= 3 ? 'bg-green-500/20 text-green-400' :\n                          log.painLevel <= 6 ? 'bg-yellow-500/20 text-yellow-400' :\n                          'bg-red-500/20 text-red-400'\n                        }`}>\n                          Pain: {log.painLevel}/10\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                  {log.notes && (\n                    <div className=\"mt-2 pt-2 border-t border-[#B19CD9]/10\">\n                      <p className=\"text-xs text-text-muted\">\n                        <span className=\"text-text-primary\">Notes:</span> {log.notes}\n                      </p>\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n\n      {/* Wheel Pickers for Macros */}\n      <DoseWheelPickerModal\n        isOpen={showCaloriePicker}\n        onSave={(value) => {\n          setEditWeightMacros({ ...editWeightMacros, calories: parseInt(value) || 0 });\n          setShowCaloriePicker(false);\n        }}\n        onClose={() => setShowCaloriePicker(false)}\n        min={0}\n        max={3000}\n        step={10}\n        label=\"Calories\"\n        decimals={0}\n        defaultValue={String(editWeightMacros.calories)}\n        presets={['500', '1000', '1500', '2000']}\n      />\n      <DoseWheelPickerModal\n        isOpen={showProteinPicker}\n        onSave={(value) => {\n          setEditWeightMacros({ ...editWeightMacros, protein: parseInt(value) || 0 });\n          setShowProteinPicker(false);\n        }}\n        onClose={() => setShowProteinPicker(false)}\n        min={0}\n        max={500}\n        label=\"Protein (g)\"\n        decimals={0}\n        defaultValue={String(editWeightMacros.protein)}\n        presets={['20', '40', '80', '150']}\n      />\n      <DoseWheelPickerModal\n        isOpen={showCarbsPicker}\n        onSave={(value) => {\n          setEditWeightMacros({ ...editWeightMacros, carbs: parseInt(value) || 0 });\n          setShowCarbsPicker(false);\n        }}\n        onClose={() => setShowCarbsPicker(false)}\n        min={0}\n        max={1000}\n        label=\"Carbs (g)\"\n        decimals={0}\n        defaultValue={String(editWeightMacros.carbs)}\n        presets={['20', '40', '80', '150']}\n      />\n      <DoseWheelPickerModal\n        isOpen={showFatPicker}\n        onSave={(value) => {\n          setEditWeightMacros({ ...editWeightMacros, fat: parseInt(value) || 0 });\n          setShowFatPicker(false);\n        }}\n        onClose={() => setShowFatPicker(false)}\n        min={0}\n        max={500}\n        label=\"Fat (g)\"\n        decimals={0}\n        defaultValue={String(editWeightMacros.fat)}\n        presets={['20', '40', '80', '150']}\n      />\n    </div>\n  );\n};\n\nexport default LogTab;\n","import React, { useState, useMemo, useEffect, useLayoutEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport WheelPicker from './WheelPicker';\nimport { useTheme } from '../../contexts/ThemeContext';\n\ninterface DoseWheelPickerModalProps {\n  isOpen: boolean;\n  onSave: (value: string) => void;\n  onClose: () => void;\n  min?: number;\n  max?: number;\n  step?: number;\n  label?: string;\n  decimals?: number;\n  defaultValue?: string;\n  presets?: string[];\n}\n\nconst DoseWheelPickerModal: React.FC<DoseWheelPickerModalProps> = ({\n  isOpen,\n  onSave,\n  onClose,\n  min = 0,\n  max = 100,\n  step = 1,\n  label = 'Select Dose',\n  decimals = 2,\n  defaultValue,\n  presets,\n}) => {\n  const { isDarkMode } = useTheme();\n  const [localValue, setLocalValue] = useState(defaultValue || '0.25');\n  const [isVisible, setIsVisible] = useState(false);\n  const [isClosing, setIsClosing] = useState(false);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsVisible(true);\n      setIsClosing(false);\n      setLocalValue(defaultValue || '0.25');\n    } else if (isVisible && !isClosing) {\n      setIsClosing(true);\n      setTimeout(() => {\n        setIsVisible(false);\n        setIsClosing(false);\n      }, 200);\n    }\n  }, [isOpen, defaultValue]);\n\n  const parsedValue = useMemo(() => {\n    const num = parseFloat(localValue) || 0;\n    const whole = Math.floor(num);\n    const decimal = Math.round((num - whole) * Math.pow(10, decimals));\n    return { whole, decimal };\n  }, [localValue, decimals]);\n\n  const wholeNumbers = useMemo(() => {\n    return Array.from({ length: Math.floor((max - min) / step) + 1 }, (_, i) => String(min + i * step));\n  }, [min, max, step]);\n\n  const decimalOptions = useMemo(() => {\n    const options: string[] = [];\n    const step = decimals === 2 ? 1 : 1;\n    for (let i = 0; i < Math.pow(10, decimals); i += step) {\n      options.push(String(i).padStart(decimals, '0'));\n    }\n    return options;\n  }, [decimals]);\n\n  const handleChange = (type: 'whole' | 'decimal', newValue: string) => {\n    let newWhole = parsedValue.whole;\n    let newDecimal = parsedValue.decimal;\n\n    if (type === 'whole') {\n      newWhole = parseInt(newValue);\n    } else {\n      newDecimal = parseInt(newValue);\n    }\n\n    const formatted = `${newWhole}.${String(newDecimal).padStart(decimals, '0')}`;\n    setLocalValue(formatted);\n  };\n\n  const handleDone = () => {\n    onSave(localValue);\n    onClose();\n  };\n\n  if (!isVisible) return null;\n\n  const modal = (\n    <div className=\"fixed inset-0 z-[99999] flex items-center justify-center p-4\">\n      <div\n        className={`absolute inset-0 bg-black/60 ${\n          isClosing\n            ? 'backdrop-fade-out'\n            : 'backdrop-fade-in'\n        }`}\n        style={{ backdropFilter: 'blur(8px)' }}\n        onClick={onClose}\n      />\n\n      <div className=\"relative w-full max-w-sm\">\n        <div\n          className={`relative isolate rounded-2xl border shadow-2xl p-6 max-h-[90vh] overflow-y-auto transition-all ${\n            isDarkMode \n              ? 'border-[#B19CD9]/30 bg-gradient-to-b from-[#1a1625]/95 to-[#0d0a15]/95'\n              : 'border-gray-200 bg-white'\n          } ${\n            isClosing\n              ? 'modal-fade-out'\n              : 'modal-content-fade-in'\n          }`}\n        >\n          <div className=\"flex justify-between items-center mb-4\">\n            <h3 className={`text-xl font-semibold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n              {label}\n            </h3>\n          </div>\n          <div className={`border-t mb-3 ${isDarkMode ? 'border-[#B19CD9]/20' : 'border-gray-200'}`}></div>\n\n          {presets && presets.length > 0 && (\n            <div className=\"grid grid-cols-4 gap-2 mb-4\">\n              {presets.map((val) => {\n                const isSelected = localValue === val;\n                return (\n                  <button\n                    key={`preset-${val}`}\n                    type=\"button\"\n                    onClick={() => setLocalValue(val)}\n                    className={`px-2 py-1.5 text-xs rounded-lg transition-all duration-300 ${\n                      isSelected\n                        ? 'bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white shadow-[0_0_15px_rgba(177,156,217,0.4)]'\n                        : isDarkMode\n                          ? 'bg-[#B19CD9]/10 text-[#B19CD9] border border-[#B19CD9]/30 hover:bg-[#B19CD9]/20'\n                          : 'bg-gray-100 text-gray-700 border border-gray-200 hover:bg-gray-200'\n                    }`}\n                  >\n                    {val}\n                  </button>\n                );\n              })}\n            </div>\n          )}\n\n          <div className=\"flex items-center justify-center gap-3 mb-4 px-2\">\n            <WheelPicker\n              value={String(parsedValue.whole)}\n              onChange={(v) => handleChange('whole', v)}\n              options={wholeNumbers}\n            />\n\n            <span className={`text-2xl font-bold mt-6 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>.</span>\n\n            <WheelPicker\n              value={String(parsedValue.decimal).padStart(decimals, '0')}\n              onChange={(v) => handleChange('decimal', v)}\n              options={decimalOptions}\n            />\n          </div>\n\n          <div className={`border-t my-3 ${isDarkMode ? 'border-[#B19CD9]/20' : 'border-gray-200'}`}></div>\n\n          <div className=\"flex gap-3\">\n            <button\n              onClick={onClose}\n              className={`flex-1 py-3 rounded-xl border transition-all font-medium ${\n                isDarkMode\n                  ? 'border-[#B19CD9]/40 text-white/80 hover:text-white hover:bg-white/10'\n                  : 'border-gray-300 text-gray-700 hover:bg-gray-100'\n              }`}\n            >\n              Cancel\n            </button>\n\n            <button\n              onClick={handleDone}\n              className=\"flex-1 py-3 rounded-xl bg-gradient-to-r from-[#B19CD9] to-[#9C7BD3] text-white font-medium hover:shadow-[0_0_20px_rgba(177,156,217,0.5)] transition-all\"\n            >\n              Done\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  return ReactDOM.createPortal(modal, document.body);\n};\n\nexport default DoseWheelPickerModal;\n"],"names":["getWeekStart","date","d","Date","day","getDay","diff","getDate","setDate","setHours","getWeekKey","dateStr","toISOString","split","getWeekLabel","weekStart","weekEnd","formatOpts","month","concat","toLocaleDateString","COMMON_SIDE_EFFECTS","_ref","refreshKey","profile","useWheelForNumbers","bigCard","isDarkMode","useThemeStyles","unitSystem","weightUnit","getWeightUnit","bigCardText","manualEntries","setManualEntries","useState","protocols","setProtocols","editingEntry","setEditingEntry","isDoseLogCollapsed","setIsDoseLogCollapsed","localStorage","getItem","sortBy","setSortBy","sortAsc","setSortAsc","isSideEffectsVisible","setIsSideEffectsVisible","isSideEffectsClosing","setIsSideEffectsClosing","weightEntries","setWeightEntries","isWeightLogCollapsed","setIsWeightLogCollapsed","weightViewMode","setWeightViewMode","editingWeightEntry","setEditingWeightEntry","editWeightNotes","setEditWeightNotes","editWeightMacros","setEditWeightMacros","calories","protein","carbs","fat","isWeightModalVisible","setIsWeightModalVisible","isWeightModalClosing","setIsWeightModalClosing","peptideLogs","setPeptideLogs","peptides","setPeptides","isPeptideLogCollapsed","setIsPeptideLogCollapsed","showCaloriePicker","setShowCaloriePicker","showProteinPicker","setShowProteinPicker","showCarbsPicker","setShowCarbsPicker","showFatPicker","setShowFatPicker","aggregatedWeightData","useMemo","length","Map","weekGroups","forEach","entry","key","has","set","get","push","averages","entries","weekKey","sum","reduce","acc","e","weight","data","prevChange","sorted","sort","a","b","localeCompare","dailyWithChange","map","idx","change","_objectSpread","weekly","Array","from","keys","avg","prevAvg","avgWeight","macrosSum","_e$macros","_e$macros2","_e$macros3","_e$macros4","macros","hasNotes","some","notes","weekLabel","monthGroups","getFullYear","String","getMonth","padStart","getMonthKey","monthly","monthKey","_e$macros5","_e$macros6","_e$macros7","_e$macros8","monthLabel","year","allMedications","medSet","Set","add","medication","p","sortedEntries","dose","getMedColor","medicationName","getMedicationColorByName","stroke","editSideEffects","setEditSideEffects","editNotes","setEditNotes","activeSideEffect","setActiveSideEffect","useEffect","loadData","getMedicationManualEntries","prots","getMedicationProtocols","realWeightEntries","getWeightEntries","loadedPeptides","getPeptides","loadedPeptideLogs","getPeptideLogs","setItem","document","body","classList","setTimeout","remove","formatDate","_jsxs","className","children","_jsx","style","textShadow","onClick","_Fragment","color","isManual","time","undefined","painLevel","injectionSite","isr","sideEffects","se","severity","name","openSideEffectsEditor","mode","charAt","toUpperCase","slice","convertWeightFromKg","toFixed","Math","abs","reverse","openWeightEditor","backdropFilter","filter","find","s","type","addSideEffect","removeSideEffect","min","max","value","onChange","updateSideEffectSeverity","parseInt","target","placeholder","rows","handleSaveSideEffects","updatedEntries","saveMedicationManualEntries","handleSaveWeightMacros","saveWeightEntries","log","peptide","id","peptideId","doseUnit","DoseWheelPickerModal","isOpen","onSave","onClose","step","label","decimals","defaultValue","presets","useTheme","localValue","setLocalValue","isVisible","setIsVisible","isClosing","setIsClosing","parsedValue","num","parseFloat","whole","floor","decimal","round","pow","wholeNumbers","_","i","decimalOptions","options","handleChange","newValue","newWhole","newDecimal","formatted","modal","val","isSelected","WheelPicker","v","handleDone","ReactDOM"],"sourceRoot":""}